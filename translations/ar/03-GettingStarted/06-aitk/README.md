<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "af6cee6052e751674c1d9022a4b204e6",
  "translation_date": "2025-06-03T14:22:53+00:00",
  "source_file": "03-GettingStarted/06-aitk/README.md",
  "language_code": "ar"
}
-->
# استهلاك خادم من امتداد AI Toolkit لبرنامج Visual Studio Code

عند بناء وكيل ذكاء اصطناعي، الأمر لا يقتصر فقط على توليد ردود ذكية؛ بل يتعلق أيضًا بمنح وكيلك القدرة على اتخاذ إجراءات. هنا يأتي دور بروتوكول سياق النموذج (MCP). يجعل MCP من السهل على الوكلاء الوصول إلى الأدوات والخدمات الخارجية بطريقة متسقة. فكر فيه كأنك توصل وكيلك بصندوق أدوات يمكنه *فعلاً* استخدامه.

لنفترض أنك ربطت وكيلًا بخادم MCP الخاص بالآلة الحاسبة. فجأة، يمكن لوكيلك إجراء العمليات الحسابية بمجرد تلقيه موجه مثل "كم يساوي 47 في 89؟" — دون الحاجة لكتابة منطق برمجي أو بناء واجهات برمجة تطبيقات مخصصة.

## نظرة عامة

يغطي هذا الدرس كيفية ربط خادم MCP للآلة الحاسبة بوكيل باستخدام امتداد [AI Toolkit](https://aka.ms/AIToolkit) في برنامج Visual Studio Code، مما يمكن وكيلك من إجراء عمليات حسابية مثل الجمع والطرح والضرب والقسمة عبر اللغة الطبيعية.

يُعد AI Toolkit امتدادًا قويًا لبرنامج Visual Studio Code يسهل تطوير الوكلاء. يمكن لمهندسي الذكاء الاصطناعي بناء تطبيقات ذكاء اصطناعي بسهولة عن طريق تطوير واختبار نماذج الذكاء الاصطناعي التوليدية — محليًا أو عبر السحابة. يدعم الامتداد معظم النماذج التوليدية الكبرى المتوفرة اليوم.

*ملاحظة*: يدعم AI Toolkit حاليًا بايثون وTypeScript.

## أهداف التعلم

بنهاية هذا الدرس، ستكون قادرًا على:

- استهلاك خادم MCP عبر AI Toolkit.
- تكوين إعدادات الوكيل لتمكينه من اكتشاف واستخدام الأدوات المقدمة من خادم MCP.
- استخدام أدوات MCP عبر اللغة الطبيعية.

## النهج

إليك كيف نحتاج إلى التعامل مع هذا على مستوى عالٍ:

- إنشاء وكيل وتحديد موجه النظام الخاص به.
- إنشاء خادم MCP مزود بأدوات آلة حاسبة.
- ربط منشئ الوكيل بخادم MCP.
- اختبار استدعاء أدوات الوكيل عبر اللغة الطبيعية.

رائع، الآن بعد أن فهمنا التسلسل، دعنا نكوّن وكيل ذكاء اصطناعي ليستفيد من الأدوات الخارجية عبر MCP، مما يعزز قدراته!

## المتطلبات الأساسية

- [Visual Studio Code](https://code.visualstudio.com/)
- [AI Toolkit لبرنامج Visual Studio Code](https://aka.ms/AIToolkit)

## التمرين: استهلاك خادم

في هذا التمرين، ستقوم ببناء، وتشغيل، وتحسين وكيل ذكاء اصطناعي باستخدام أدوات من خادم MCP داخل Visual Studio Code باستخدام AI Toolkit.

### -0- خطوة تمهيدية، إضافة نموذج OpenAI GPT-4o إلى نماذجي

يعتمد التمرين على نموذج **GPT-4o**. يجب إضافة النموذج إلى **نماذجي** قبل إنشاء الوكيل.

![لقطة شاشة لواجهة اختيار نموذج في امتداد AI Toolkit لبرنامج Visual Studio Code. العنوان: "اعثر على النموذج المناسب لحل الذكاء الاصطناعي الخاص بك" مع عنوان فرعي يشجع المستخدمين على اكتشاف، اختبار، ونشر نماذج الذكاء الاصطناعي. أسفل ذلك، ضمن "النماذج الشائعة"، ست بطاقات نماذج معروضة: DeepSeek-R1 (مستضاف على GitHub)، OpenAI GPT-4o، OpenAI GPT-4.1، OpenAI o1، Phi 4 Mini (CPU - صغير، سريع)، وDeepSeek-R1 (مستضاف على Ollama). كل بطاقة تتضمن خيارات "إضافة" النموذج أو "تجربة في الملعب".](../../../../translated_images/aitk-model-catalog.c0c66f0d9ac0ee73c1d21b9207db99e914ef9dd52fced6f226c2b1f537e2c447.ar.png)

1. افتح امتداد **AI Toolkit** من **شريط النشاط**.
1. في قسم **الكتالوج**، اختر **النماذج** لفتح **كتالوج النماذج**. اختيار **النماذج** يفتح **كتالوج النماذج** في تبويب محرر جديد.
1. في شريط البحث بـ **كتالوج النماذج**، اكتب **OpenAI GPT-4o**.
1. انقر على **+ إضافة** لإضافة النموذج إلى قائمة **نماذجي**. تأكد من اختيار النموذج الذي يتم **استضافته على GitHub**.
1. في **شريط النشاط**، تحقق من ظهور نموذج **OpenAI GPT-4o** في القائمة.

### -1- إنشاء وكيل

يتيح لك **منشئ الوكيل (الموجه)** إنشاء وكلاء مدعومين بالذكاء الاصطناعي وتخصيصهم. في هذا القسم، ستنشئ وكيلًا جديدًا وتحدد نموذجًا لتشغيل المحادثة.

![لقطة شاشة لواجهة منشئ "وكيل الآلة الحاسبة" في امتداد AI Toolkit لبرنامج Visual Studio Code. في اللوحة اليسرى، النموذج المختار هو "OpenAI GPT-4o (عبر GitHub)." موجه النظام يقول "أنت أستاذ في الجامعة تدرس الرياضيات"، وموجه المستخدم يقول "اشرح لي معادلة فورييه بمصطلحات بسيطة." خيارات إضافية تشمل أزرار لإضافة أدوات، تفعيل خادم MCP، واختيار إخراج منظم. زر أزرق "تشغيل" في الأسفل. في اللوحة اليمنى، تحت "ابدأ مع الأمثلة"، ثلاثة وكلاء نموذج: مطور ويب (مع خادم MCP، مبسط الصف الثاني، ومفسر الأحلام، مع وصف مختصر لوظائفهم).](../../../../translated_images/aitk-agent-builder.fb7df60f7923b4d8ba839662bf6d7647e843c01b57256e1e9adecb46a64d3408.ar.png)

1. افتح امتداد **AI Toolkit** من **شريط النشاط**.
1. في قسم **الأدوات**، اختر **منشئ الوكيل (الموجه)**. اختيار **منشئ الوكيل (الموجه)** يفتح النافذة في تبويب محرر جديد.
1. انقر على زر **+ وكيل جديد**. سيطلق الامتداد معالج إعداد عبر **لوحة الأوامر**.
1. أدخل الاسم **وكيل الآلة الحاسبة** واضغط **Enter**.
1. في **منشئ الوكيل (الموجه)**، في حقل **النموذج**، اختر نموذج **OpenAI GPT-4o (عبر GitHub)**.

### -2- إنشاء موجه نظام للوكيل

مع إعداد الوكيل، حان الوقت لتعريف شخصيته وهدفه. في هذا القسم، ستستخدم ميزة **توليد موجه النظام** لوصف سلوك الوكيل المقصود — في هذه الحالة، وكيل آلة حاسبة — وجعل النموذج يكتب موجه النظام نيابةً عنك.

![لقطة شاشة لواجهة "وكيل الآلة الحاسبة" في AI Toolkit مع نافذة منبثقة بعنوان "توليد موجه." تشرح النافذة أنه يمكن توليد قالب موجه بمشاركة تفاصيل أساسية وتتضمن مربع نص بموجه نظام نموذجي: "أنت مساعد رياضيات مفيد وفعال. عند إعطائك مسألة تتعلق بالحساب الأساسي، ترد بالنتيجة الصحيحة." أسفل مربع النص أزرار "إغلاق" و"توليد". في الخلفية، جزء من إعدادات الوكيل مع النموذج المختار "OpenAI GPT-4o (عبر GitHub)" وحقول لموجه النظام والمستخدم.](../../../../translated_images/aitk-generate-prompt.0d4292407c15282bf714e327f5d3d833389324004135727ef28adc22dbbb4e8f.ar.png)

1. في قسم **الموجهات**، انقر على زر **توليد موجه النظام**. يفتح هذا الزر منشئ الموجه الذي يستخدم الذكاء الاصطناعي لتوليد موجه نظام للوكيل.
1. في نافذة **توليد موجه**، أدخل التالي: `You are a helpful and efficient math assistant. When given a problem involving basic arithmetic, you respond with the correct result.`
1. انقر على زر **توليد**. ستظهر إشعار في الزاوية السفلى اليمنى يؤكد أن موجه النظام يُولد. بمجرد اكتمال التوليد، سيظهر الموجه في حقل **موجه النظام** في **منشئ الوكيل (الموجه)**.
1. راجع **موجه النظام** وعدّله إذا لزم الأمر.

### -3- إنشاء خادم MCP

الآن بعد أن عرّفت موجه نظام الوكيل — الذي يوجه سلوكه وردوده — حان الوقت لتزويد الوكيل بقدرات عملية. في هذا القسم، ستنشئ خادم MCP للآلة الحاسبة مزودًا بأدوات لتنفيذ عمليات الجمع والطرح والضرب والقسمة. سيمكن هذا الخادم وكيلك من إجراء عمليات حسابية في الوقت الحقيقي استجابةً للموجهات باللغة الطبيعية.

![لقطة شاشة للجزء السفلي من واجهة وكيل الآلة الحاسبة في امتداد AI Toolkit لبرنامج Visual Studio Code. تظهر قوائم قابلة للتوسيع لـ "الأدوات" و"الإخراج المنظم"، مع قائمة منسدلة بعنوان "اختر تنسيق الإخراج" مضبوطة على "نص". على اليمين، زر "+ خادم MCP" لإضافة خادم بروتوكول سياق النموذج. تظهر أيقونة صورة كنائب أعلى قسم الأدوات.](../../../../translated_images/aitk-add-mcp-server.9b158809336d87e8076eb5954846040a7370c88046639a09e766398c8855c3d3.ar.png)

تم تجهيز AI Toolkit بقوالب لتسهيل إنشاء خادم MCP خاص بك. سنستخدم قالب بايثون لإنشاء خادم MCP للآلة الحاسبة.

*ملاحظة*: يدعم AI Toolkit حاليًا بايثون وTypeScript.

1. في قسم **الأدوات** في **منشئ الوكيل (الموجه)**، انقر على زر **+ خادم MCP**. سيطلق الامتداد معالج إعداد عبر **لوحة الأوامر**.
1. اختر **+ إضافة خادم**.
1. اختر **إنشاء خادم MCP جديد**.
1. اختر قالب **python-weather**.
1. اختر **المجلد الافتراضي** لحفظ قالب خادم MCP.
1. أدخل الاسم التالي للخادم: **Calculator**
1. ستفتح نافذة جديدة لبرنامج Visual Studio Code. اختر **نعم، أثق بالمؤلفين**.
1. باستخدام الطرفية (**الطرفية** > **طرفية جديدة**)، أنشئ بيئة افتراضية: `python -m venv .venv`
1. باستخدام الطرفية، فعّل البيئة الافتراضية:
    1. ويندوز - `.venv\Scripts\activate`
    1. macOS/Linux - `source venv/bin/activate`
1. باستخدام الطرفية، ثبّت التبعيات: `pip install -e .[dev]`
1. في عرض **المستكشف** بشريط النشاط، وسّع مجلد **src** واختر **server.py** لفتح الملف في المحرر.
1. استبدل الكود في ملف **server.py** بما يلي واحفظ:

    ```python
    """
    Sample MCP Calculator Server implementation in Python.

    
    This module demonstrates how to create a simple MCP server with calculator tools
    that can perform basic arithmetic operations (add, subtract, multiply, divide).
    """
    
    from mcp.server.fastmcp import FastMCP
    
    server = FastMCP("calculator")
    
    @server.tool()
    def add(a: float, b: float) -> float:
        """Add two numbers together and return the result."""
        return a + b
    
    @server.tool()
    def subtract(a: float, b: float) -> float:
        """Subtract b from a and return the result."""
        return a - b
    
    @server.tool()
    def multiply(a: float, b: float) -> float:
        """Multiply two numbers together and return the result."""
        return a * b
    
    @server.tool()
    def divide(a: float, b: float) -> float:
        """
        Divide a by b and return the result.
        
        Raises:
            ValueError: If b is zero
        """
        if b == 0:
            raise ValueError("Cannot divide by zero")
        return a / b
    ```

### -4- تشغيل الوكيل مع خادم MCP للآلة الحاسبة

الآن بعد أن أصبح لدى وكيلك أدوات، حان وقت استخدامها! في هذا القسم، سترسل موجهات إلى الوكيل لاختبار والتحقق مما إذا كان الوكيل يستخدم الأداة المناسبة من خادم MCP للآلة الحاسبة.

![لقطة شاشة لواجهة وكيل الآلة الحاسبة في امتداد AI Toolkit لبرنامج Visual Studio Code. في اللوحة اليسرى، تحت "الأدوات"، أضيف خادم MCP باسم local-server-calculator_server، يعرض أربع أدوات متاحة: add، subtract، multiply، وdivide. تظهر شارة تفيد بأن أربع أدوات نشطة. أدناه قسم "الإخراج المنظم" مطوي وزر أزرق "تشغيل". في اللوحة اليمنى، تحت "استجابة النموذج"، يستدعي الوكيل أدوات الضرب والطرح مع مدخلات {"a": 3، "b": 25} و{"a": 75، "b": 20} على التوالي. تظهر "استجابة الأداة" النهائية كـ 75.0. يظهر زر "عرض الكود" في الأسفل.](../../../../translated_images/aitk-agent-response-with-tools.0f0da2c6eef5eb3f5b7592d6d056449aa8aaa42a3ab0b0c2f14269b3049cfdb5.ar.png)

ستشغّل خادم MCP للآلة الحاسبة على جهاز التطوير المحلي الخاص بك عبر **منشئ الوكيل** كعميل MCP.

1. اضغط `F5` to start debugging the MCP server. The **Agent (Prompt) Builder** will open in a new editor tab. The status of the server is visible in the terminal.
1. In the **User prompt** field of the **Agent (Prompt) Builder**, enter the following prompt: `I bought 3 items priced at $25 each, and then used a $20 discount. How much did I pay?`
1. Click the **Run** button to generate the agent's response.
1. Review the agent output. The model should conclude that you paid **$55**.
1. Here's a breakdown of what should occur:
    - The agent selects the **multiply** and **substract** tools to aid in the calculation.
    - The respective `a` and `b` values are assigned for the **multiply** tool.
    - The respective `a` and `b` تُعيّن القيم لأداة **subtract**.
    - يتم توفير الاستجابة من كل أداة في **استجابة الأداة** الخاصة بها.
    - يتم توفير الناتج النهائي من النموذج في **استجابة النموذج** النهائية.
1. أرسل موجهات إضافية لاختبار الوكيل بشكل أوسع. يمكنك تعديل الموجه الحالي في حقل **موجه المستخدم** بالنقر داخله واستبدال الموجه الموجود.
1. عند الانتهاء من اختبار الوكيل، يمكنك إيقاف الخادم عبر **الطرفية** بإدخال **CTRL/CMD+C** للخروج.

## المهمة

حاول إضافة أداة جديدة إلى ملف **server.py** الخاص بك (مثل: إرجاع الجذر التربيعي لرقم). أرسل موجهات إضافية تتطلب من الوكيل استخدام أداتك الجديدة (أو الأدوات الموجودة). تأكد من إعادة تشغيل الخادم لتحميل الأدوات المضافة حديثًا.

## الحل

[الحل](./solution/README.md)

## النقاط الرئيسية

النقاط الرئيسية من هذا الفصل هي:

- امتداد AI Toolkit هو عميل ممتاز يتيح لك استهلاك خوادم MCP وأدواتها.
- يمكنك إضافة أدوات جديدة إلى خوادم MCP، مما يوسع قدرات الوكيل لتلبية المتطلبات المتطورة.
- يتضمن AI Toolkit قوالب (مثل قوالب خادم MCP لبايثون) لتبسيط إنشاء الأدوات المخصصة.

## موارد إضافية

- [توثيق AI Toolkit](https://aka.ms/AIToolkit/doc)

## ماذا بعد

التالي: [الدرس 4 التنفيذ العملي](/04-PracticalImplementation/README.md)

**إخلاء المسؤولية**:  
تمت ترجمة هذا المستند باستخدام خدمة الترجمة الآلية [Co-op Translator](https://github.com/Azure/co-op-translator). بينما نسعى لتحقيق الدقة، يرجى العلم أن الترجمات الآلية قد تحتوي على أخطاء أو عدم دقة. يجب اعتبار المستند الأصلي بلغته الأصلية المصدر الموثوق به. بالنسبة للمعلومات الحساسة، يُنصح بالاعتماد على الترجمة المهنية البشرية. نحن غير مسؤولين عن أي سوء فهم أو تفسير خاطئ ينشأ عن استخدام هذه الترجمة.