<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "a3cbadbf632058aa59a523ac659aa1df",
  "translation_date": "2025-05-17T12:14:48+00:00",
  "source_file": "03-GettingStarted/06-aitk/README.md",
  "language_code": "ar"
}
-->
# استهلاك خادم من امتداد مجموعة أدوات الذكاء الاصطناعي لـ Visual Studio Code

عندما تقوم ببناء وكيل ذكاء اصطناعي، الأمر لا يتعلق فقط بتوليد ردود ذكية؛ بل أيضًا بإعطاء وكيلك القدرة على اتخاذ الإجراءات. هنا يأتي دور بروتوكول سياق النموذج (MCP). يجعل MCP من السهل على الوكلاء الوصول إلى الأدوات والخدمات الخارجية بطريقة متسقة. فكر في الأمر كما لو أنك تقوم بتوصيل وكيلك بصندوق أدوات يمكنه *فعليًا* استخدامه.

لنقل أنك قمت بتوصيل وكيلك بخادم MCP للآلة الحاسبة. فجأة، يمكن لوكيلك إجراء العمليات الحسابية فقط من خلال تلقي مطالبة مثل "ما هو حاصل ضرب 47 في 89؟" — لا حاجة لترميز المنطق أو بناء واجهات برمجة تطبيقات مخصصة.

## نظرة عامة

تغطي هذه الدرس كيفية توصيل خادم MCP للآلة الحاسبة بوكيل باستخدام امتداد [مجموعة أدوات الذكاء الاصطناعي](https://aka.ms/AIToolkit) في Visual Studio Code، مما يتيح لوكيلك إجراء عمليات حسابية مثل الجمع والطرح والضرب والقسمة من خلال اللغة الطبيعية.

مجموعة أدوات الذكاء الاصطناعي هي امتداد قوي لـ Visual Studio Code يسهل تطوير الوكلاء. يمكن لمهندسي الذكاء الاصطناعي بسهولة بناء تطبيقات الذكاء الاصطناعي من خلال تطوير واختبار نماذج الذكاء الاصطناعي التوليدي - محليًا أو في السحابة. يدعم الامتداد معظم النماذج التوليدية الكبرى المتاحة اليوم.

*ملاحظة*: تدعم مجموعة أدوات الذكاء الاصطناعي حاليًا Python وTypeScript.

## أهداف التعلم

بنهاية هذا الدرس، ستكون قادرًا على:

- استهلاك خادم MCP عبر مجموعة أدوات الذكاء الاصطناعي.
- تكوين إعدادات وكيل لتمكينه من اكتشاف واستخدام الأدوات المقدمة من خادم MCP.
- استخدام أدوات MCP عبر اللغة الطبيعية.

## النهج

إليك كيفية الاقتراب من هذا على مستوى عالٍ:

- إنشاء وكيل وتحديد مطالبة النظام الخاصة به.
- إنشاء خادم MCP بأدوات الآلة الحاسبة.
- توصيل منشئ الوكيل بخادم MCP.
- اختبار استدعاء أدوات الوكيل عبر اللغة الطبيعية.

رائع، الآن بعد أن فهمنا التدفق، دعونا نكوّن وكيل ذكاء اصطناعي للاستفادة من الأدوات الخارجية عبر MCP، مما يعزز قدراته!

## المتطلبات المسبقة

- [Visual Studio Code](https://code.visualstudio.com/)
- [مجموعة أدوات الذكاء الاصطناعي لـ Visual Studio Code](https://aka.ms/AIToolkit)

## تمرين: استهلاك خادم

في هذا التمرين، ستقوم ببناء وتشغيل وتعزيز وكيل ذكاء اصطناعي بأدوات من خادم MCP داخل Visual Studio Code باستخدام مجموعة أدوات الذكاء الاصطناعي.

### -0- الخطوة التمهيدية، أضف نموذج OpenAI GPT-4o إلى نماذجي

يستفيد التمرين من نموذج **GPT-4o**. يجب إضافة النموذج إلى **نماذجي** قبل إنشاء الوكيل.

![لقطة شاشة لواجهة اختيار النموذج في امتداد مجموعة أدوات الذكاء الاصطناعي لـ Visual Studio Code. العنوان يقرأ "اعثر على النموذج المناسب لحل الذكاء الاصطناعي الخاص بك" مع عنوان فرعي يشجع المستخدمين على اكتشاف واختبار ونشر نماذج الذكاء الاصطناعي. أدناه، تحت "النماذج الشعبية"، يتم عرض ست بطاقات نموذج: DeepSeek-R1 (مستضاف على GitHub)، OpenAI GPT-4o، OpenAI GPT-4.1، OpenAI o1، Phi 4 Mini (CPU - صغير، سريع)، وDeepSeek-R1 (مستضاف على Ollama). تتضمن كل بطاقة خيارات لإضافة النموذج أو تجربته في Playground](../../../../translated_images/aitk-model-catalog.143ab567942a0c88d21eb49c9f384182a688aa2ca7f44bc263a1c8ee45ee6252.ar.png)

1. افتح امتداد **مجموعة أدوات الذكاء الاصطناعي** من **شريط النشاط**.
1. في قسم **الكتالوج**، اختر **نماذج** لفتح **كتالوج النماذج**. اختيار **نماذج** يفتح **كتالوج النماذج** في علامة تبويب محرر جديدة.
1. في شريط البحث في **كتالوج النماذج**، أدخل **OpenAI GPT-4o**.
1. انقر على **+ إضافة** لإضافة النموذج إلى قائمة **نماذجي**. تأكد من أنك اخترت النموذج **المستضاف بواسطة GitHub**.
1. في **شريط النشاط**، تأكد من أن نموذج **OpenAI GPT-4o** يظهر في القائمة.

### -1- إنشاء وكيل

يتيح لك **منشئ الوكيل (Prompt)** إنشاء وتخصيص وكلاء مدعومين بالذكاء الاصطناعي خاصين بك. في هذا القسم، ستقوم بإنشاء وكيل جديد وتعيين نموذج لتشغيل المحادثة.

![لقطة شاشة لواجهة "منشئ وكيل الآلة الحاسبة" في امتداد مجموعة أدوات الذكاء الاصطناعي لـ Visual Studio Code. في اللوحة اليسرى، النموذج المختار هو "OpenAI GPT-4o (عبر GitHub)." مطالبة النظام تقرأ "أنت أستاذ في الجامعة تدرس الرياضيات"، ومطالبة المستخدم تقول "اشرح لي معادلة فورييه بطريقة بسيطة." تشمل الخيارات الإضافية أزرارًا لإضافة أدوات، وتمكين خادم MCP، واختيار إخراج منظم. يوجد زر "تشغيل" أزرق في الأسفل. في اللوحة اليمنى، تحت "ابدأ باستخدام الأمثلة"، يتم سرد ثلاثة وكلاء نموذجيين: مطور ويب (مع خادم MCP، مبسط للصف الثاني، ومفسر الأحلام، كل منهم مع وصف موجز لوظائفهم.](../../../../translated_images/aitk-agent-builder.df46f391ec9a2b0e8cd1ddbb1dbc968c42bb20411350a44d87c8f082ba4a45d5.ar.png)

1. افتح امتداد **مجموعة أدوات الذكاء الاصطناعي** من **شريط النشاط**.
1. في قسم **الأدوات**، اختر **منشئ الوكيل (Prompt)**. اختيار **منشئ الوكيل (Prompt)** يفتح **منشئ الوكيل (Prompt)** في علامة تبويب محرر جديدة.
1. انقر على زر **+ منشئ جديد**. سيقوم الامتداد بإطلاق معالج إعداد عبر **لوحة الأوامر**.
1. أدخل الاسم **وكيل الآلة الحاسبة** واضغط **إدخال**.
1. في **منشئ الوكيل (Prompt)**، لحقل **النموذج**، اختر نموذج **OpenAI GPT-4o (عبر GitHub)**.

### -2- إنشاء مطالبة النظام للوكيل

بعد أن تم تجهيز الوكيل، حان الوقت لتحديد شخصيته وغرضه. في هذا القسم، ستستخدم ميزة **توليد مطالبة النظام** لوصف السلوك المقصود للوكيل - في هذه الحالة، وكيل آلة حاسبة - وجعل النموذج يكتب مطالبة النظام لك.

![لقطة شاشة لواجهة "وكيل الآلة الحاسبة" في مجموعة أدوات الذكاء الاصطناعي لـ Visual Studio Code مع نافذة منبثقة مفتوحة بعنوان "توليد مطالبة." توضح النافذة المنبثقة أنه يمكن توليد قالب مطالبة من خلال مشاركة تفاصيل أساسية وتشمل مربع نص مع مطالبة نظام نموذجية: "أنت مساعد رياضيات مفيد وفعال. عندما تُعطى مشكلة تتعلق بالحساب الأساسي، ترد بالنتيجة الصحيحة." أسفل مربع النص توجد أزرار "إغلاق" و"توليد". في الخلفية، يظهر جزء من تكوين الوكيل، بما في ذلك النموذج المختار "OpenAI GPT-4o (عبر GitHub)" وحقول لمطالبات النظام والمستخدم.](../../../../translated_images/aitk-generate-prompt.fc5fdce97b37f4c22511cc2ed3cc1d85e79ccf21c339e64a9553b9e2cc4dac37.ar.png)

1. لقسم **المطالبات**، انقر على زر **توليد مطالبة النظام**. هذا الزر يفتح في منشئ المطالبات الذي يستفيد من الذكاء الاصطناعي لتوليد مطالبة نظام للوكيل.
1. في نافذة **توليد مطالبة**، أدخل ما يلي: `You are a helpful and efficient math assistant. When given a problem involving basic arithmetic, you respond with the correct result.`
1. انقر على زر **توليد**. ستظهر إشعار في الزاوية السفلية اليمنى يؤكد أن مطالبة النظام قيد التوليد. بمجرد اكتمال توليد المطالبة، ستظهر المطالبة في حقل **مطالبة النظام** في **منشئ الوكيل (Prompt)**.
1. راجع **مطالبة النظام** وعدلها إذا لزم الأمر.

### -3- إنشاء خادم MCP

الآن بعد أن قمت بتحديد مطالبة النظام للوكيل - موجهًا سلوكه واستجاباته - حان الوقت لتزويد الوكيل بقدرات عملية. في هذا القسم، ستقوم بإنشاء خادم MCP للآلة الحاسبة بأدوات لتنفيذ عمليات الجمع والطرح والضرب والقسمة. سيمكن هذا الخادم وكيلك من إجراء العمليات الحسابية في الوقت الفعلي استجابةً للمطالبات باللغة الطبيعية.

![لقطة شاشة للجزء السفلي من واجهة وكيل الآلة الحاسبة في امتداد مجموعة أدوات الذكاء الاصطناعي لـ Visual Studio Code. يظهر قوائم قابلة للتوسيع لـ "الأدوات" و"إخراج الهيكل"، إلى جانب قائمة منسدلة تحمل تسمية "اختر تنسيق الإخراج" مضبوطة على "النص." إلى اليمين، يوجد زر يحمل تسمية "+ خادم MCP" لإضافة خادم بروتوكول سياق النموذج. يظهر رمز الصورة النائب أعلى قسم الأدوات.](../../../../translated_images/aitk-add-mcp-server.7696efa0c3d1774d2ba903c86c8782fbc80fcb8ac9e51d7c6089cccc47396386.ar.png)

مجموعة أدوات الذكاء الاصطناعي مجهزة بقوالب لتسهيل إنشاء خادم MCP الخاص بك. سنستخدم قالب Python لإنشاء خادم MCP للآلة الحاسبة.

*ملاحظة*: تدعم مجموعة أدوات الذكاء الاصطناعي حاليًا Python وTypeScript.

1. في قسم **الأدوات** من **منشئ الوكيل (Prompt)**، انقر على زر **+ خادم MCP**. سيقوم الامتداد بإطلاق معالج إعداد عبر **لوحة الأوامر**.
1. اختر **+ إضافة خادم**.
1. اختر **إنشاء خادم MCP جديد**.
1. اختر **python-weather** كقالب.
1. اختر **المجلد الافتراضي** لحفظ قالب خادم MCP.
1. أدخل الاسم التالي للخادم: **آلة حاسبة**
1. ستفتح نافذة جديدة لـ Visual Studio Code. اختر **نعم، أثق بالمؤلفين**.
1. باستخدام الطرفية (**الطرفية** > **طرفية جديدة**)، قم بإنشاء بيئة افتراضية: `python -m venv .venv`
1. باستخدام الطرفية، قم بتنشيط البيئة الافتراضية:
    1. Windows - `.venv\Scripts\activate`
    1. macOS/Linux - `source venv/bin/activate`
1. باستخدام الطرفية، قم بتثبيت التبعيات: `pip install -e .[dev]`
1. في عرض **المستكشف** في **شريط النشاط**، قم بتوسيع دليل **src** واختر **server.py** لفتح الملف في المحرر.
1. استبدل الكود في ملف **server.py** بما يلي واحفظ:

    ```python
    """
    Sample MCP Calculator Server implementation in Python.

    
    This module demonstrates how to create a simple MCP server with calculator tools
    that can perform basic arithmetic operations (add, subtract, multiply, divide).
    """
    
    from mcp.server.fastmcp import FastMCP
    
    server = FastMCP("calculator")
    
    @server.tool()
    def add(a: float, b: float) -> float:
        """Add two numbers together and return the result."""
        return a + b
    
    @server.tool()
    def subtract(a: float, b: float) -> float:
        """Subtract b from a and return the result."""
        return a - b
    
    @server.tool()
    def multiply(a: float, b: float) -> float:
        """Multiply two numbers together and return the result."""
        return a * b
    
    @server.tool()
    def divide(a: float, b: float) -> float:
        """
        Divide a by b and return the result.
        
        Raises:
            ValueError: If b is zero
        """
        if b == 0:
            raise ValueError("Cannot divide by zero")
        return a / b
    ```

### -4- تشغيل الوكيل مع خادم MCP للآلة الحاسبة

الآن بعد أن أصبح لوكيلك أدوات، حان الوقت لاستخدامها! في هذا القسم، ستقدم مطالبات للوكيل لاختبار والتحقق مما إذا كان الوكيل يستخدم الأداة المناسبة من خادم MCP للآلة الحاسبة.

![لقطة شاشة لواجهة وكيل الآلة الحاسبة في امتداد مجموعة أدوات الذكاء الاصطناعي لـ Visual Studio Code. في اللوحة اليسرى، تحت "الأدوات"، تمت إضافة خادم MCP باسم local-server-calculator_server، يظهر أربعة أدوات متاحة: الجمع، الطرح، الضرب، والقسمة. تظهر شارة تشير إلى أن أربع أدوات نشطة. أدناه يوجد قسم "إخراج الهيكل" المطوي وزر "تشغيل" أزرق. في اللوحة اليمنى، تحت "استجابة النموذج"، يستدعي الوكيل أدوات الضرب والطرح مع المدخلات {"a": 3، "b": 25} و{"a": 75، "b": 20} على التوالي. تظهر "استجابة الأداة" النهائية كـ 75.0. يظهر زر "عرض الكود" في الأسفل.](../../../../translated_images/aitk-agent-response-with-tools.64afc99ab720b2cd97d0142ba8f98aca0ddc9eba46f148adc2c35d6979ddb349.ar.png)

ستقوم بتشغيل خادم MCP للآلة الحاسبة على جهاز التطوير المحلي الخاص بك عبر **منشئ الوكيل** باعتباره عميل MCP.

1. اضغط على `F5` to start debugging the MCP server. The **Agent (Prompt) Builder** will open in a new editor tab. The status of the server is visible in the terminal.
1. In the **User prompt** field of the **Agent (Prompt) Builder**, enter the following prompt: `اشتريت 3 عناصر بسعر 25 دولارًا لكل منها، ثم استخدمت خصمًا بقيمة 20 دولارًا. كم دفعت؟`
1. Click the **Run** button to generate the agent's response.
1. Review the agent output. The model should conclude that you paid **$55**.
1. Here's a breakdown of what should occur:
    - The agent selects the **multiply** and **substract** tools to aid in the calculation.
    - The respective `a` and `b` values are assigned for the **multiply** tool.
    - The respective `a` and `b` القيم المعينة لأداة **الطرح**.
    - يتم تقديم الاستجابة من كل أداة في **استجابة الأداة** الخاصة بها.
    - يتم تقديم الإخراج النهائي من النموذج في **استجابة النموذج** النهائية.
1. قدم مطالبات إضافية لاختبار الوكيل بشكل أكبر. يمكنك تعديل المطالبة الحالية في حقل **مطالبة المستخدم** بالنقر في الحقل واستبدال المطالبة الحالية.
1. بمجرد الانتهاء من اختبار الوكيل، يمكنك إيقاف الخادم عبر **الطرفية** عن طريق إدخال **CTRL/CMD+C** للإنهاء.

## المهمة

حاول إضافة إدخال أداة إضافية إلى ملف **server.py** الخاص بك (مثل: إرجاع الجذر التربيعي لعدد). قدم مطالبات إضافية تتطلب من الوكيل الاستفادة من أداتك الجديدة (أو الأدوات الحالية). تأكد من إعادة تشغيل الخادم لتحميل الأدوات المضافة حديثًا.

## الحل

[الحل](./solution/README.md)

## النقاط الرئيسية

النقاط الرئيسية من هذا الفصل هي ما يلي:

- امتداد مجموعة أدوات الذكاء الاصطناعي هو عميل رائع يتيح لك استهلاك خوادم MCP وأدواتها.
- يمكنك إضافة أدوات جديدة إلى خوادم MCP، مما يوسع قدرات الوكيل لتلبية المتطلبات المتطورة.
- تتضمن مجموعة أدوات الذكاء الاصطناعي قوالب (مثل قوالب خادم MCP لـ Python) لتبسيط إنشاء الأدوات المخصصة.

## موارد إضافية

- [وثائق مجموعة أدوات الذكاء الاصطناعي](https://aka.ms/AIToolkit/doc)

## ما القادم

التالي: [الدرس 4 التطبيق العملي](/04-PracticalImplementation/README.md)

**إخلاء مسؤولية**:  
تم ترجمة هذه الوثيقة باستخدام خدمة الترجمة بالذكاء الاصطناعي [Co-op Translator](https://github.com/Azure/co-op-translator). بينما نسعى لتحقيق الدقة، يرجى العلم أن الترجمات الآلية قد تحتوي على أخطاء أو عدم دقة. يجب اعتبار الوثيقة الأصلية بلغتها الأصلية المصدر الموثوق. بالنسبة للمعلومات الحيوية، يُوصى بالترجمة البشرية الاحترافية. نحن غير مسؤولين عن أي سوء فهم أو تفسير خاطئ ناتج عن استخدام هذه الترجمة.