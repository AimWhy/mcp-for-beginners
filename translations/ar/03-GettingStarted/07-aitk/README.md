<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "d1980763f2a545ca6648363bf5757b5a",
  "translation_date": "2025-06-13T02:14:29+00:00",
  "source_file": "03-GettingStarted/07-aitk/README.md",
  "language_code": "ar"
}
-->
# استهلاك خادم من امتداد AI Toolkit لبرنامج Visual Studio Code

عند بناء وكيل ذكاء اصطناعي، الأمر لا يقتصر فقط على توليد ردود ذكية؛ بل يتعلق أيضًا بمنح وكيلك القدرة على اتخاذ إجراءات. هنا يأتي دور بروتوكول سياق النموذج (MCP). يجعل MCP من السهل على الوكلاء الوصول إلى الأدوات والخدمات الخارجية بطريقة متسقة. فكر فيه كأنه توصيل وكيلك إلى صندوق أدوات يمكنه *فعلاً* استخدامه.

لنفترض أنك تربط وكيلًا بخادم MCP الخاص بالآلة الحاسبة. فجأة، يمكن لوكيلك إجراء عمليات حسابية بمجرد استلامه لمطالبة مثل "ما حاصل ضرب 47 في 89؟" — دون الحاجة إلى ترميز المنطق يدويًا أو بناء واجهات برمجة تطبيقات مخصصة.

## نظرة عامة

يغطي هذا الدرس كيفية ربط خادم MCP الخاص بالآلة الحاسبة بوكيل باستخدام امتداد [AI Toolkit](https://aka.ms/AIToolkit) في Visual Studio Code، مما يمكن وكيلك من إجراء عمليات حسابية مثل الجمع والطرح والضرب والقسمة من خلال اللغة الطبيعية.

يُعد AI Toolkit امتدادًا قويًا لبرنامج Visual Studio Code يبسط تطوير الوكلاء. يمكن لمهندسي الذكاء الاصطناعي بسهولة بناء تطبيقات ذكاء اصطناعي عن طريق تطوير واختبار نماذج الذكاء الاصطناعي التوليدية — محليًا أو في السحابة. يدعم الامتداد معظم النماذج التوليدية الرئيسية المتاحة اليوم.

*ملاحظة*: يدعم AI Toolkit حاليًا بايثون وTypeScript.

## أهداف التعلم

بنهاية هذا الدرس، ستكون قادرًا على:

- استهلاك خادم MCP عبر AI Toolkit.
- تكوين إعدادات الوكيل لتمكينه من اكتشاف واستخدام الأدوات التي يوفرها خادم MCP.
- استخدام أدوات MCP عبر اللغة الطبيعية.

## النهج

إليك كيف نحتاج إلى التعامل مع هذا على مستوى عالٍ:

- إنشاء وكيل وتحديد مطالبة النظام الخاصة به.
- إنشاء خادم MCP يحتوي على أدوات آلة حاسبة.
- ربط منشئ الوكيل بخادم MCP.
- اختبار استدعاء أدوات الوكيل عبر اللغة الطبيعية.

رائع، الآن بعد أن فهمنا التسلسل، دعنا نكوّن وكيل ذكاء اصطناعي للاستفادة من الأدوات الخارجية عبر MCP، مما يعزز قدراته!

## المتطلبات الأساسية

- [Visual Studio Code](https://code.visualstudio.com/)
- [AI Toolkit لـ Visual Studio Code](https://aka.ms/AIToolkit)

## التمرين: استهلاك خادم

في هذا التمرين، ستبني وتشغّل وتعزّز وكيل ذكاء اصطناعي باستخدام أدوات من خادم MCP داخل Visual Studio Code باستخدام AI Toolkit.

### -0- الخطوة التمهيدية، أضف نموذج OpenAI GPT-4o إلى نماذجي

يعتمد التمرين على نموذج **GPT-4o**. يجب إضافة النموذج إلى **نماذجي** قبل إنشاء الوكيل.

![لقطة شاشة لواجهة اختيار نموذج في امتداد AI Toolkit لـ Visual Studio Code. العنوان: "ابحث عن النموذج المناسب لحل الذكاء الاصطناعي الخاص بك" مع عنوان فرعي يشجع المستخدمين على اكتشاف واختبار ونشر نماذج الذكاء الاصطناعي. تحت “النماذج الشائعة”، تظهر ست بطاقات نماذج: DeepSeek-R1 (مستضاف على GitHub)، OpenAI GPT-4o، OpenAI GPT-4.1، OpenAI o1، Phi 4 Mini (CPU - صغير وسريع)، وDeepSeek-R1 (مستضاف على Ollama). كل بطاقة تشمل خيارات "إضافة" النموذج أو "تجربة في الملعب"](../../../../translated_images/aitk-model-catalog.2acd38953bb9c119aa629fe74ef34cc56e4eed35e7f5acba7cd0a59e614ab335.ar.png)

1. افتح امتداد **AI Toolkit** من **شريط النشاط**.
1. في قسم **الكتالوج**، اختر **النماذج** لفتح **كتالوج النماذج**. فتح **النماذج** يفتح **كتالوج النماذج** في تبويب محرر جديد.
1. في شريط البحث داخل **كتالوج النماذج**، اكتب **OpenAI GPT-4o**.
1. انقر على **+ إضافة** لإضافة النموذج إلى قائمة **نماذجي**. تأكد من اختيار النموذج الذي **يستضيفه GitHub**.
1. في **شريط النشاط**، تحقق من ظهور نموذج **OpenAI GPT-4o** في القائمة.

### -1- إنشاء وكيل

يتيح لك **منشئ الوكيل (المطالبة)** إنشاء وتخصيص وكلاء مدعومين بالذكاء الاصطناعي. في هذا القسم، ستنشئ وكيلًا جديدًا وتعيّن نموذجًا لتشغيل المحادثة.

![لقطة شاشة لواجهة منشئ "وكيل الآلة الحاسبة" في امتداد AI Toolkit لـ Visual Studio Code. في اللوحة اليسرى، النموذج المحدد هو "OpenAI GPT-4o (عبر GitHub)." مطالبة النظام تقول "أنت أستاذ في الجامعة يدرس الرياضيات"، ومطالبة المستخدم تقول "اشرح لي معادلة فورييه ببساطة." خيارات إضافية تشمل أزرار لإضافة أدوات، تفعيل خادم MCP، واختيار الإخراج المنظم. زر أزرق "تشغيل" في الأسفل. في اللوحة اليمنى، تحت "ابدأ بالأمثلة"، ثلاث وكلاء نموذجية مدرجة: مطور ويب (مع خادم MCP، مبسط الصف الثاني، ومفسر الأحلام، كل منها مع وصف مختصر لوظائفه)](../../../../translated_images/aitk-agent-builder.901e3a2960c3e4774b29a23024ff5bec2d4232f57fae2a418b2aaae80f81c05f.ar.png)

1. افتح امتداد **AI Toolkit** من **شريط النشاط**.
1. في قسم **الأدوات**، اختر **منشئ الوكيل (المطالبة)**. فتح **منشئ الوكيل (المطالبة)** يفتح تبويب محرر جديد.
1. انقر على زر **+ وكيل جديد**. سيطلق الامتداد معالج إعداد عبر **لوحة الأوامر**.
1. أدخل الاسم **وكيل الآلة الحاسبة** واضغط **إدخال**.
1. في **منشئ الوكيل (المطالبة)**، في حقل **النموذج**، اختر نموذج **OpenAI GPT-4o (عبر GitHub)**.

### -2- إنشاء مطالبة نظام للوكيل

بعد إعداد الوكيل، حان الوقت لتعريف شخصيته وهدفه. في هذا القسم، ستستخدم ميزة **توليد مطالبة النظام** لوصف سلوك الوكيل المقصود — في هذه الحالة، وكيل آلة حاسبة — وجعل النموذج يكتب مطالبة النظام نيابةً عنك.

![لقطة شاشة لواجهة "وكيل الآلة الحاسبة" في AI Toolkit مع نافذة منبثقة بعنوان "توليد مطالبة." تشرح النافذة أنه يمكن توليد قالب مطالبة بمشاركة التفاصيل الأساسية، وتشمل مربع نص مع مطالبة نموذجية: "أنت مساعد رياضيات مفيد وفعال. عند تقديم مشكلة تتعلق بالحساب الأساسي، ترد بالنتيجة الصحيحة." أسفل مربع النص أزرار "إغلاق" و"توليد". في الخلفية، يظهر جزء من إعداد الوكيل بما في ذلك النموذج المختار "OpenAI GPT-4o (عبر GitHub)" وحقول المطالبات النظامية ومطالبات المستخدم.](../../../../translated_images/aitk-generate-prompt.ba9e69d3d2bbe2a26444d0c78775540b14196061eee32c2054e9ee68c4f51f3a.ar.png)

1. في قسم **المطالبات**، انقر على زر **توليد مطالبة النظام**. يفتح هذا الزر منشئ المطالبات الذي يستخدم الذكاء الاصطناعي لتوليد مطالبة نظام للوكيل.
1. في نافذة **توليد مطالبة**، أدخل ما يلي: `You are a helpful and efficient math assistant. When given a problem involving basic arithmetic, you respond with the correct result.`
1. انقر على زر **توليد**. ستظهر إشعار في الزاوية اليمنى السفلى يؤكد أن مطالبة النظام قيد التوليد. بمجرد اكتمال التوليد، ستظهر المطالبة في حقل **مطالبة النظام** في **منشئ الوكيل (المطالبة)**.
1. راجع **مطالبة النظام** وعدلها إذا لزم الأمر.

### -3- إنشاء خادم MCP

الآن بعد أن عرفت مطالبة نظام وكيلك — التي توجه سلوكه وردوده — حان الوقت لتزويد الوكيل بقدرات عملية. في هذا القسم، ستنشئ خادم MCP للآلة الحاسبة مع أدوات لتنفيذ عمليات الجمع والطرح والضرب والقسمة. سيمكن هذا الخادم وكيلك من إجراء العمليات الحسابية في الوقت الفعلي استجابةً للمطالبات باللغة الطبيعية.

![لقطة شاشة للجزء السفلي من واجهة وكيل الآلة الحاسبة في امتداد AI Toolkit لـ Visual Studio Code. تظهر قوائم قابلة للتوسيع لـ "الأدوات" و"الإخراج المنظم"، مع قائمة منسدلة بعنوان "اختر تنسيق الإخراج" مضبوطة على "نص". على اليمين، يوجد زر "+ خادم MCP" لإضافة خادم بروتوكول سياق النموذج. يظهر رمز صورة كعنصر نائب فوق قسم الأدوات.](../../../../translated_images/aitk-add-mcp-server.9742cfddfe808353c0caf9cc0a7ed3e80e13abf4d2ebde315c81c3cb02a2a449.ar.png)

يأتي AI Toolkit مزودًا بقوالب لتسهيل إنشاء خادم MCP خاص بك. سنستخدم قالب بايثون لإنشاء خادم MCP للآلة الحاسبة.

*ملاحظة*: يدعم AI Toolkit حاليًا بايثون وTypeScript.

1. في قسم **الأدوات** في **منشئ الوكيل (المطالبة)**، انقر على زر **+ خادم MCP**. سيطلق الامتداد معالج إعداد عبر **لوحة الأوامر**.
1. اختر **+ إضافة خادم**.
1. اختر **إنشاء خادم MCP جديد**.
1. اختر قالب **python-weather**.
1. اختر **المجلد الافتراضي** لحفظ قالب خادم MCP.
1. أدخل الاسم التالي للخادم: **Calculator**
1. سيفتح نافذة جديدة من Visual Studio Code. اختر **نعم، أثق بالمؤلفين**.
1. باستخدام الطرفية (**Terminal** > **New Terminal**)، أنشئ بيئة افتراضية: `python -m venv .venv`
1. باستخدام الطرفية، فعّل البيئة الافتراضية:
    1. ويندوز - `.venv\Scripts\activate`
    1. macOS/Linux - `source venv/bin/activate`
1. باستخدام الطرفية، ثبّت التبعيات: `pip install -e .[dev]`
1. في عرض **المستكشف** بشريط النشاط، وسّع دليل **src** واختر ملف **server.py** لفتحه في المحرر.
1. استبدل الكود في ملف **server.py** بما يلي واحفظ:

    ```python
    """
    Sample MCP Calculator Server implementation in Python.

    
    This module demonstrates how to create a simple MCP server with calculator tools
    that can perform basic arithmetic operations (add, subtract, multiply, divide).
    """
    
    from mcp.server.fastmcp import FastMCP
    
    server = FastMCP("calculator")
    
    @server.tool()
    def add(a: float, b: float) -> float:
        """Add two numbers together and return the result."""
        return a + b
    
    @server.tool()
    def subtract(a: float, b: float) -> float:
        """Subtract b from a and return the result."""
        return a - b
    
    @server.tool()
    def multiply(a: float, b: float) -> float:
        """Multiply two numbers together and return the result."""
        return a * b
    
    @server.tool()
    def divide(a: float, b: float) -> float:
        """
        Divide a by b and return the result.
        
        Raises:
            ValueError: If b is zero
        """
        if b == 0:
            raise ValueError("Cannot divide by zero")
        return a / b
    ```

### -4- تشغيل الوكيل مع خادم MCP للآلة الحاسبة

الآن بعد أن أصبح لدى وكيلك أدوات، حان وقت استخدامها! في هذا القسم، سترسل مطالبات إلى الوكيل لاختبار والتحقق مما إذا كان الوكيل يستخدم الأداة المناسبة من خادم MCP للآلة الحاسبة.

![لقطة شاشة لواجهة وكيل الآلة الحاسبة في امتداد AI Toolkit لـ Visual Studio Code. في اللوحة اليسرى، تحت "الأدوات"، أضيف خادم MCP باسم local-server-calculator_server، مع عرض أربع أدوات متاحة: add، subtract، multiply، وdivide. يظهر شارة تُظهر أن أربع أدوات نشطة. تحتها قسم "الإخراج المنظم" مطوي وزر أزرق "تشغيل". في اللوحة اليمنى، تحت "استجابة النموذج"، يستدعي الوكيل أدوات الضرب والطرح مع مدخلات {"a": 3, "b": 25} و{"a": 75, "b": 20} على التوالي. يظهر "استجابة الأداة" النهائية كـ 75.0. يظهر زر "عرض الكود" في الأسفل.](../../../../translated_images/aitk-agent-response-with-tools.e7c781869dc8041a25f9903ed4f7e8e0c7e13d7d94f6786a6c51b1e172f56866.ar.png)

ستشغّل خادم MCP للآلة الحاسبة على جهاز التطوير المحلي عبر **منشئ الوكيل** كعميل MCP.

1. اضغط `F5` to start debugging the MCP server. The **Agent (Prompt) Builder** will open in a new editor tab. The status of the server is visible in the terminal.
1. In the **User prompt** field of the **Agent (Prompt) Builder**, enter the following prompt: `اشتريت 3 عناصر بسعر 25 دولارًا لكل منها، ثم استخدمت خصمًا بقيمة 20 دولارًا. كم دفعت؟`
1. Click the **Run** button to generate the agent's response.
1. Review the agent output. The model should conclude that you paid **$55**.
1. Here's a breakdown of what should occur:
    - The agent selects the **multiply** and **substract** tools to aid in the calculation.
    - The respective `a` and `b` values are assigned for the **multiply** tool.
    - The respective `a` and `b` القيم تم تعيينها لأداة **subtract**.
    - يتم توفير الاستجابة من كل أداة في **استجابة الأداة** الخاصة بها.
    - يتم توفير الإخراج النهائي من النموذج في **استجابة النموذج** النهائية.
1. قدّم مطالبات إضافية لاختبار الوكيل بشكل أعمق. يمكنك تعديل المطالبة الحالية في حقل **مطالبة المستخدم** بالنقر داخل الحقل واستبدال المطالبة الموجودة.
1. بمجرد الانتهاء من اختبار الوكيل، يمكنك إيقاف الخادم عبر **الطرفية** بإدخال **CTRL/CMD+C** للخروج.

## المهمة

حاول إضافة إدخال أداة إضافي إلى ملف **server.py** الخاص بك (مثل: إرجاع الجذر التربيعي لرقم). قدّم مطالبات إضافية تتطلب من الوكيل استخدام أداتك الجديدة (أو الأدوات الموجودة). تأكد من إعادة تشغيل الخادم لتحميل الأدوات المضافة حديثًا.

## الحل

[الحل](./solution/README.md)

## النقاط الرئيسية

النقاط الأساسية من هذا الفصل هي:

- امتداد AI Toolkit هو عميل رائع يتيح لك استهلاك خوادم MCP وأدواتها.
- يمكنك إضافة أدوات جديدة إلى خوادم MCP، مما يوسع قدرات الوكيل لتلبية المتطلبات المتطورة.
- يتضمن AI Toolkit قوالب (مثل قوالب خادم MCP للبايثون) لتبسيط إنشاء الأدوات المخصصة.

## موارد إضافية

- [وثائق AI Toolkit](https://aka.ms/AIToolkit/doc)

## ماذا بعد
- التالي: [الاختبار وتصحيح الأخطاء](/03-GettingStarted/08-testing/README.md)

**تنويه**:  
تمت ترجمة هذا المستند باستخدام خدمة الترجمة الآلية [Co-op Translator](https://github.com/Azure/co-op-translator). بينما نسعى لتحقيق الدقة، يرجى العلم أن الترجمات الآلية قد تحتوي على أخطاء أو عدم دقة. يجب اعتبار المستند الأصلي بلغته الأصلية المصدر الموثوق به. للمعلومات الحساسة أو الهامة، يُنصح بالاستعانة بترجمة بشرية محترفة. نحن غير مسؤولين عن أي سوء فهم أو تفسير ناتج عن استخدام هذه الترجمة.