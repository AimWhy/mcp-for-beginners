<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "98be664d3b19a81ee24fa3f920233864",
  "translation_date": "2025-05-20T22:50:39+00:00",
  "source_file": "02-Security/README.md",
  "language_code": "ar"
}
-->
# أفضل ممارسات الأمان

اعتماد بروتوكول سياق النموذج (MCP) يضيف قدرات قوية جديدة لتطبيقات الذكاء الاصطناعي، لكنه يقدم أيضًا تحديات أمنية فريدة تتجاوز المخاطر التقليدية للبرمجيات. بالإضافة إلى المخاوف المعروفة مثل البرمجة الآمنة، مبدأ أقل الامتيازات، وأمان سلسلة التوريد، يواجه MCP وأحمال عمل الذكاء الاصطناعي تهديدات جديدة مثل حقن المطالبات، تسميم الأدوات، وتعديل الأدوات الديناميكي. هذه المخاطر قد تؤدي إلى تسريب البيانات، انتهاكات الخصوصية، وسلوك غير مقصود للنظام إذا لم تُدار بشكل صحيح.

تستعرض هذه الدرس أهم المخاطر الأمنية المتعلقة بـ MCP — بما في ذلك المصادقة، التفويض، الصلاحيات المفرطة، حقن المطالبات غير المباشر، وضعف سلسلة التوريد — وتقدم ضوابط عملية وأفضل الممارسات للتخفيف منها. ستتعلم أيضًا كيفية الاستفادة من حلول Microsoft مثل Prompt Shields، Azure Content Safety، وGitHub Advanced Security لتعزيز تنفيذ MCP الخاص بك. بفهم وتطبيق هذه الضوابط، يمكنك تقليل احتمالية حدوث اختراق أمني بشكل كبير وضمان بقاء أنظمة الذكاء الاصطناعي قوية وموثوقة.

# أهداف التعلم

بنهاية هذا الدرس، ستكون قادرًا على:

- تحديد وشرح المخاطر الأمنية الفريدة التي يقدمها بروتوكول سياق النموذج (MCP)، بما في ذلك حقن المطالبات، تسميم الأدوات، الصلاحيات المفرطة، وضعف سلسلة التوريد.
- وصف وتطبيق ضوابط فعالة للتخفيف من مخاطر أمان MCP، مثل المصادقة القوية، مبدأ أقل الامتياز، إدارة الرموز الآمنة، والتحقق من سلسلة التوريد.
- فهم والاستفادة من حلول Microsoft مثل Prompt Shields، Azure Content Safety، وGitHub Advanced Security لحماية MCP وأحمال عمل الذكاء الاصطناعي.
- التعرف على أهمية التحقق من بيانات وصف الأدوات، المراقبة للتغييرات الديناميكية، والدفاع ضد هجمات حقن المطالبات غير المباشر.
- دمج أفضل ممارسات الأمان المعروفة — مثل البرمجة الآمنة، تعزيز الخوادم، وهندسة الثقة الصفرية — في تنفيذ MCP الخاص بك لتقليل احتمالية وتأثير الاختراقات الأمنية.

# ضوابط أمان MCP

أي نظام يمتلك وصولًا إلى موارد مهمة يواجه تحديات أمنية ضمنية. يمكن معالجة هذه التحديات عادةً من خلال التطبيق الصحيح للضوابط والمفاهيم الأمنية الأساسية. بما أن MCP هو بروتوكول جديد التعريف، فإن المواصفات تتغير بسرعة مع تطوره. مع مرور الوقت، ستتطور الضوابط الأمنية داخله، مما يتيح تكاملًا أفضل مع بنى الأمان المؤسسية والممارسات المثلى المعتمدة.

تشير الأبحاث المنشورة في [تقرير الدفاع الرقمي من Microsoft](https://aka.ms/mddr) إلى أن 98% من الاختراقات المبلغ عنها يمكن منعها من خلال نظافة أمنية قوية، وأفضل حماية ضد أي اختراق هي تحقيق نظافة أمنية أساسية صحيحة، ممارسات البرمجة الآمنة، وأمان سلسلة التوريد — تلك الممارسات المجربة والمختبرة التي نعرفها لا تزال الأكثر تأثيرًا في تقليل المخاطر الأمنية.

لنستعرض بعض الطرق التي يمكنك البدء بها لمعالجة مخاطر الأمان عند اعتماد MCP.

# مصادقة خادم MCP (إذا كان تنفيذ MCP الخاص بك قبل 26 أبريل 2025)

> **ملاحظة:** المعلومات التالية صحيحة حتى 26 أبريل 2025. بروتوكول MCP يتطور باستمرار، وقد تقدم الإصدارات المستقبلية أنماط وضوابط مصادقة جديدة. للحصول على أحدث التحديثات والإرشادات، يرجى دائمًا الرجوع إلى [مواصفات MCP](https://spec.modelcontextprotocol.io/) ومستودع [MCP الرسمي على GitHub](https://github.com/modelcontextprotocol).

### بيان المشكلة  
كانت مواصفات MCP الأصلية تفترض أن المطورين سيكتبون خادم المصادقة الخاص بهم. هذا يتطلب معرفة بـ OAuth والقيود الأمنية المرتبطة به. كان خادم MCP يعمل كخادم تفويض OAuth 2.0، يدير مصادقة المستخدم المطلوبة مباشرة بدلاً من تفويضها إلى خدمة خارجية مثل Microsoft Entra ID. اعتبارًا من 26 أبريل 2025، يسمح تحديث مواصفات MCP لخوادم MCP بتفويض مصادقة المستخدم إلى خدمة خارجية.

### المخاطر
- منطق التفويض الخاطئ في خادم MCP يمكن أن يؤدي إلى كشف بيانات حساسة وتطبيق ضوابط وصول بشكل غير صحيح.
- سرقة رموز OAuth على خادم MCP المحلي. إذا سُرقت، يمكن استخدام الرمز لانتحال شخصية خادم MCP والوصول إلى الموارد والبيانات الخاصة بالخدمة المرتبطة بالرمز.

### الضوابط المخففة
- **مراجعة وتقوية منطق التفويض:** قم بتدقيق تنفيذ التفويض في خادم MCP بعناية لضمان وصول المستخدمين والعملاء المقصودين فقط إلى الموارد الحساسة. للإرشادات العملية، راجع [Azure API Management Your Auth Gateway For MCP Servers | Microsoft Community Hub](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690) و [Using Microsoft Entra ID To Authenticate With MCP Servers Via Sessions - Den Delimarsky](https://den.dev/blog/mcp-server-auth-entra-id-session/).
- **فرض ممارسات أمان الرموز:** اتبع [أفضل ممارسات Microsoft للتحقق من الرموز وعمرها](https://learn.microsoft.com/en-us/entra/identity-platform/access-tokens) لمنع سوء استخدام رموز الوصول وتقليل مخاطر إعادة استخدام الرموز أو سرقتها.
- **حماية تخزين الرموز:** احفظ الرموز دائمًا بشكل آمن واستخدم التشفير لحمايتها أثناء التخزين والنقل. لنصائح التنفيذ، راجع [استخدام تخزين رموز آمن وتشفير الرموز](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2).

# الصلاحيات المفرطة لخوادم MCP

### بيان المشكلة  
قد تكون خوادم MCP مُنحت صلاحيات مفرطة على الخدمة أو المورد الذي تصل إليه. على سبيل المثال، خادم MCP جزء من تطبيق مبيعات ذكاء اصطناعي يتصل بمخزن بيانات مؤسسي يجب أن تكون صلاحياته محدودة على بيانات المبيعات فقط وليس الوصول إلى جميع الملفات في المخزن. بالرجوع إلى مبدأ أقل الامتياز (أحد أقدم المبادئ الأمنية)، لا ينبغي أن يمتلك أي مورد صلاحيات تتجاوز ما هو مطلوب لتنفيذ المهام المخصصة له. يقدم الذكاء الاصطناعي تحديًا متزايدًا في هذا المجال لأنه لتوفير المرونة قد يكون من الصعب تحديد الصلاحيات الدقيقة المطلوبة.

### المخاطر  
- منح صلاحيات مفرطة يمكن أن يسمح بتسريب أو تعديل بيانات لم يكن من المفترض أن يصل إليها خادم MCP. قد يكون هذا أيضًا مشكلة خصوصية إذا كانت البيانات معلومات تعريف شخصية (PII).

### الضوابط المخففة
- **تطبيق مبدأ أقل الامتياز:** امنح خادم MCP فقط الحد الأدنى من الصلاحيات اللازمة لأداء مهامه المطلوبة. راجع هذه الصلاحيات بانتظام وتحديثها لضمان عدم تجاوزها لما هو مطلوب. للإرشادات المفصلة، راجع [الوصول الآمن بأقل امتياز](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access).
- **استخدام التحكم في الوصول بناءً على الأدوار (RBAC):** خصص أدوارًا لخادم MCP تكون محددة بدقة على موارد وإجراءات معينة، مع تجنب الصلاحيات الواسعة أو غير الضرورية.
- **مراقبة وتدقيق الصلاحيات:** راقب استخدام الصلاحيات باستمرار وراجع سجلات الوصول لاكتشاف ومعالجة الصلاحيات المفرطة أو غير المستخدمة بسرعة.

# هجمات حقن المطالبات غير المباشر

### بيان المشكلة

يمكن لخوادم MCP الخبيثة أو المخترقة أن تقدم مخاطر كبيرة من خلال كشف بيانات العملاء أو تمكين إجراءات غير مقصودة. هذه المخاطر ذات صلة خاصة في أحمال عمل الذكاء الاصطناعي وMCP، حيث:

- **هجمات حقن المطالبات:** يقوم المهاجمون بإدخال تعليمات خبيثة ضمن المطالبات أو المحتوى الخارجي، مما يجعل نظام الذكاء الاصطناعي ينفذ إجراءات غير مقصودة أو يسرّب بيانات حساسة. للمزيد: [حقن المطالبات](https://simonwillison.net/2025/Apr/9/mcp-prompt-injection/)
- **تسميم الأدوات:** يقوم المهاجمون بتعديل بيانات وصف الأدوات (مثل الأوصاف أو المعلمات) للتأثير على سلوك الذكاء الاصطناعي، مما قد يتجاوز الضوابط الأمنية أو يؤدي إلى تسريب البيانات. التفاصيل: [تسميم الأدوات](https://invariantlabs.ai/blog/mcp-security-notification-tool-poisoning-attacks)
- **حقن المطالبات عبر النطاقات:** تعليمات خبيثة مدمجة في مستندات، صفحات ويب، أو رسائل بريد إلكتروني، والتي تتم معالجتها من قبل الذكاء الاصطناعي، مما يؤدي إلى تسريب البيانات أو التلاعب بها.
- **تعديل الأدوات الديناميكي (Rug Pulls):** يمكن تغيير تعريفات الأدوات بعد موافقة المستخدم، مما يقدم سلوكيات خبيثة جديدة دون علم المستخدم.

تُبرز هذه الثغرات الحاجة إلى تحقق صارم، مراقبة، وضوابط أمنية عند دمج خوادم وأدوات MCP في بيئتك. للمزيد من التفاصيل، راجع المراجع المرتبطة أعلاه.

![prompt-injection-lg-2048x1034](../../../translated_images/prompt-injection.ed9fbfde297ca877c15bc6daa808681cd3c3dc7bf27bbbda342ef1ba5fc4f52d.ar.png)

**حقن المطالبات غير المباشر** (المعروف أيضًا بحقن المطالبات عبر النطاقات أو XPIA) هو ثغرة حرجة في أنظمة الذكاء الاصطناعي التوليدية، بما في ذلك تلك التي تستخدم بروتوكول سياق النموذج (MCP). في هذا الهجوم، تُخفي التعليمات الخبيثة داخل محتوى خارجي مثل مستندات، صفحات ويب، أو رسائل بريد إلكتروني. عند معالجة النظام لهذه المحتويات، قد يفسر التعليمات المدمجة كأوامر شرعية من المستخدم، مما يؤدي إلى إجراءات غير مقصودة مثل تسريب البيانات، إنشاء محتوى ضار، أو التلاعب بتفاعلات المستخدم. لتفسير مفصل وأمثلة من الواقع، راجع [حقن المطالبات](https://simonwillison.net/2025/Apr/9/mcp-prompt-injection/).

شكل خطير خاص من هذا الهجوم هو **تسميم الأدوات**. هنا، يقوم المهاجمون بحقن تعليمات خبيثة في بيانات وصف أدوات MCP (مثل أوصاف الأدوات أو المعلمات). نظرًا لاعتماد نماذج اللغة الكبيرة (LLMs) على هذه البيانات لاتخاذ قرار بشأن الأدوات التي يجب استدعاؤها، فإن الأوصاف المخترقة قد تخدع النموذج لتنفيذ استدعاءات أدوات غير مصرح بها أو تجاوز الضوابط الأمنية. غالبًا ما تكون هذه التلاعبات غير مرئية للمستخدمين النهائيين لكنها تُفسر وتُنفذ بواسطة نظام الذكاء الاصطناعي. يزداد هذا الخطر في بيئات خوادم MCP المستضافة، حيث يمكن تحديث تعريفات الأدوات بعد موافقة المستخدم — وهو سيناريو يُعرف أحيانًا بـ "[سحب السجادة rug pull](https://www.wiz.io/blog/mcp-security-research-briefing#remote-servers-22)". في مثل هذه الحالات، قد يتم تعديل أداة كانت آمنة سابقًا لأداء إجراءات خبيثة مثل تسريب البيانات أو تغيير سلوك النظام دون علم المستخدم. للمزيد حول هذا النوع من الهجمات، راجع [تسميم الأدوات](https://invariantlabs.ai/blog/mcp-security-notification-tool-poisoning-attacks).

![tool-injection-lg-2048x1239 (1)](../../../translated_images/tool-injection.3b0b4a6b24de6befe7d3afdeae44138ef005881aebcfc84c6f61369ce31e3640.ar.png)

## المخاطر  
الإجراءات غير المقصودة للذكاء الاصطناعي تقدم مجموعة من المخاطر الأمنية التي تشمل تسريب البيانات وانتهاكات الخصوصية.

### الضوابط المخففة  
### استخدام دروع المطالبات للحماية من هجمات حقن المطالبات غير المباشر
-----------------------------------------------------------------------------

**دروع مطالبات الذكاء الاصطناعي** هي حل طورته Microsoft للدفاع ضد هجمات حقن المطالبات المباشرة وغير المباشرة. تساعد هذه الدروع من خلال:

1.  **الكشف والتصفية:** تستخدم دروع المطالبات خوارزميات تعلم آلي متقدمة ومعالجة اللغة الطبيعية للكشف عن التعليمات الخبيثة المدمجة في المحتوى الخارجي مثل المستندات، صفحات الويب، أو البريد الإلكتروني، وتصفيتها.
    
2.  **التسليط الضوئي:** تساعد هذه التقنية نظام الذكاء الاصطناعي على التمييز بين التعليمات النظامية الصحيحة والمدخلات الخارجية غير الموثوقة. من خلال تحويل نص الإدخال بطريقة تجعله أكثر صلة بالنموذج، يضمن التسليط الضوئي قدرة الذكاء الاصطناعي على التعرف بشكل أفضل على التعليمات الخبيثة وتجاهلها.
    
3.  **الفواصل وعلامات البيانات:** تضمين فواصل في رسالة النظام يحدد بوضوح موقع نص الإدخال، مما يساعد النظام على التعرف وفصل مدخلات المستخدم عن المحتوى الخارجي المحتمل أن يكون ضارًا. يمتد مفهوم علامات البيانات باستخدام علامات خاصة لتسليط الضوء على حدود البيانات الموثوقة وغير الموثوقة.
    
4.  **المراقبة المستمرة والتحديثات:** تراقب Microsoft باستمرار وتحدث دروع المطالبات لمواجهة التهديدات الجديدة والمتطورة. هذا النهج الاستباقي يضمن بقاء الدفاعات فعالة ضد أحدث تقنيات الهجوم.
    
5. **التكامل مع Azure Content Safety:** تعد دروع المطالبات جزءًا من مجموعة Azure AI Content Safety الأوسع، التي توفر أدوات إضافية للكشف عن محاولات اختراق المحتوى، المحتوى الضار، وغيرها من المخاطر الأمنية في تطبيقات الذكاء الاصطناعي.

يمكنك قراءة المزيد عن دروع المطالبات في [توثيق Prompt Shields](https://learn.microsoft.com/azure/ai-services/content-safety/concepts/jailbreak-detection).

![prompt-shield-lg-2048x1328](../../../translated_images/prompt-shield.ff5b95be76e9c78c6ec0888206a4a6a0a5ab4bb787832a9eceef7a62fe0138d1.ar.png)

### أمان سلسلة التوريد

يبقى أمان سلسلة التوريد أساسيًا في عصر الذكاء الاصطناعي، لكن نطاق ما يُعتبر سلسلة التوريد قد توسع. بالإضافة إلى حزم الكود التقليدية، يجب الآن التحقق بدقة ومراقبة جميع مكونات الذكاء الاصطناعي، بما في ذلك النماذج الأساسية، خدمات التضمين، مزودي السياق، وواجهات برمجة التطبيقات الخارجية. يمكن لكل منها أن يقدم ثغرات أو مخاطر إذا لم تُدار بشكل صحيح.

**ممارسات أمان سلسلة التوريد الرئيسية للذكاء الاصطناعي وMCP:**
- **التحقق من جميع المكونات قبل التكامل:** يشمل ذلك ليس فقط المكتبات مفتوحة المصدر، بل أيضًا نماذج الذكاء الاصطناعي، مصادر البيانات، وواجهات برمجة التطبيقات الخارجية. تحقق دائمًا من الأصل، الترخيص، والثغرات المعروفة.
- **الحفاظ على خطوط نشر آمنة:** استخدم خطوط CI/CD مؤتمتة مع فحص أمني مدمج لاكتشاف المشكلات مبكرًا. تأكد من نشر القطع الموثوقة فقط في الإنتاج.
- **المراقبة والتدقيق المستمر:** نفذ مراقبة مستمرة لجميع التبعيات، بما في ذلك النماذج وخدمات البيانات، لاكتشاف ثغرات جديدة أو هجمات على سلسلة التوريد.
- **تطبيق مبدأ أقل الامتياز وضوابط الوصول:** قيد الوصول إلى النماذج والبيانات والخدمات بما هو ضروري فقط لعمل خادم MCP.
- **الاستجابة السريعة للتهديدات:** امتلك عملية لتصحيح أو استبدال المكونات المخترقة، ولتدوير الأسرار أو بيانات الاعتماد إذا تم اكتشاف اختراق.

يقدم [GitHub Advanced Security](https://github.com/security/advanced-security) ميزات مثل فحص الأسرار، فحص التبعيات، وتحليل CodeQL. تتكامل هذه الأدوات مع [Azure DevOps](https://azure.microsoft.com/en-us/products/devops) و [Azure Repos](https://azure.microsoft.com/en-us/products/devops/repos/) لمساعدة الفرق على تحديد وتخفيف الثغرات عبر كل من الكود ومكونات سلسلة توريد الذكاء الاصطناعي.

تطبق Microsoft أيضًا ممارسات أمان سلسلة التوريد بشكل واسع داخليًا لكل المنتجات. تعرف على المزيد في [الرحلة لتأمين سلسلة توريد البرمجيات في Microsoft](https://devblogs.microsoft.com/engineering-at-microsoft/the-journey-to-secure-the-software-supply-chain-at-microsoft/).

# أفضل ممارسات الأمان المعتمدة التي سترفع من مستوى أمان تنفيذ MCP الخاص بك

أي تنفيذ لـ MCP يرث الوضع الأمني الحالي لبيئة مؤسستك التي يُبنى عليها، لذلك عند النظر في أمان MCP كجزء من أنظمة الذكاء الاصطناعي الشاملة، يُنصح برفع مستوى الوضع الأمني العام القائم. الضوابط الأمنية المعتمدة التالية ذات صلة خاصة:

- أفضل ممارسات البرمجة الآمنة في تطبيق الذكاء الاصطناعي الخاص بك — الحماية ضد [OWASP Top 10](https://owasp.org/www-project-top-ten/)، و [OWASP Top 10 للنماذج اللغوية الكبيرة](https://genai.owasp.org/download/43299/?tmstv=1731900559)، استخدام خزائن آمنة للأسرار والرموز، تنفيذ اتصالات آمنة من الطرف إلى الطرف بين كل مكونات التطبيق، وغيرها.
- تعزيز الخوادم — استخدام المصادقة متعددة العوامل حيثما أمكن، الحفاظ على تحديث التصحيحات، دمج الخادم مع مزود هوية خارجي للوصول، وغيرها.
- الحفاظ على تحديث الأجهزة والبنية التحتية والتطبيقات بالتصحيحات.
- المراقبة الأمنية — تنفيذ تسجيل ومراقبة تطبيق الذكاء الاصطناعي (بما في ذلك عميل/خوادم MCP) وإرسال هذه السجلات إلى نظام SIEM مركزي لاكتشاف الأنشطة الشاذة.
- هندسة الثقة الص
- [OWASP أفضل 10 للـ LLMs](https://genai.owasp.org/download/43299/?tmstv=1731900559)
- [GitHub الأمان المتقدم](https://github.com/security/advanced-security)
- [Azure DevOps](https://azure.microsoft.com/products/devops)
- [Azure Repos](https://azure.microsoft.com/products/devops/repos/)
- [الرحلة لتأمين سلسلة توريد البرمجيات في Microsoft](https://devblogs.microsoft.com/engineering-at-microsoft/the-journey-to-secure-the-software-supply-chain-at-microsoft/)
- [الوصول الأقل امتيازًا الآمن (Microsoft)](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access)
- [أفضل الممارسات للتحقق من صحة الرموز ومدة صلاحيتها](https://learn.microsoft.com/entra/identity-platform/access-tokens)
- [استخدام تخزين الرموز الآمن وتشفير الرموز (YouTube)](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2)
- [إدارة واجهات برمجة التطبيقات في Azure كبوابة مصادقة لـ MCP](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690)
- [استخدام Microsoft Entra ID للمصادقة مع خوادم MCP](https://den.dev/blog/mcp-server-auth-entra-id-session/)

### التالي

التالي: [الفصل 3: البدء](/03-GettingStarted/README.md)

**إخلاء المسؤولية**:  
تمت ترجمة هذا المستند باستخدام خدمة الترجمة الآلية [Co-op Translator](https://github.com/Azure/co-op-translator). بينما نسعى لتحقيق الدقة، يرجى العلم أن الترجمات الآلية قد تحتوي على أخطاء أو عدم دقة. يجب اعتبار المستند الأصلي بلغته الأصلية المصدر الموثوق به. للمعلومات الحساسة، يُنصح بالاعتماد على الترجمة المهنية البشرية. نحن غير مسؤولين عن أي سوء فهم أو تفسيرات خاطئة تنشأ عن استخدام هذه الترجمة.