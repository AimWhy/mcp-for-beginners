<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b59b477037dc1dd6b1740a0420f3be14",
  "translation_date": "2025-07-16T23:05:21+00:00",
  "source_file": "02-Security/mcp-security-controls-2025.md",
  "language_code": "hk"
}
-->
# 最新 MCP 安全控制 - 2025 年 7 月更新

隨著 Model Context Protocol (MCP) 持續發展，安全性依然是關鍵考量。本文檔概述截至 2025 年 7 月，實施 MCP 時的最新安全控制措施及最佳實踐。

## 認證與授權

### OAuth 2.0 委派支援

MCP 規範的最新更新允許 MCP 伺服器將使用者認證委派給外部服務，例如 Microsoft Entra ID。這大幅提升安全性，具體表現在：

1. **避免自訂認證實作**：降低自訂認證程式碼中出現安全漏洞的風險  
2. **利用成熟的身份提供者**：享有企業級的安全功能  
3. **集中身份管理**：簡化使用者生命週期管理與存取控制  

## 防止 Token 直通

MCP 授權規範明確禁止 Token 直通，以防止繞過安全控制及責任歸屬問題。

### 主要要求

1. **MCP 伺服器不得接受非為其發行的 Token**：驗證所有 Token 是否具有正確的 audience 聲明  
2. **實施適當的 Token 驗證**：檢查發行者、受眾、過期時間及簽章  
3. **使用獨立的 Token 發行**：為下游服務發行新 Token，而非直接傳遞現有 Token  

## 安全的會話管理

為防止會話劫持及固定攻擊，請實施以下控制措施：

1. **使用安全且非決定性的會話 ID**：透過密碼學安全的隨機數產生器生成  
2. **將會話綁定至使用者身份**：結合會話 ID 與使用者特定資訊  
3. **實施適當的會話輪替**：在認證變更或權限提升後進行  
4. **設定合適的會話逾時時間**：在安全與使用者體驗間取得平衡  

## 工具執行沙盒化

為防止橫向移動並限制潛在的安全破壞：

1. **隔離工具執行環境**：使用容器或獨立程序  
2. **設定資源限制**：防止資源耗盡攻擊  
3. **實施最小權限存取**：僅授予必要權限  
4. **監控執行行為模式**：偵測異常行為  

## 工具定義保護

為防止工具中毒：

1. **使用前驗證工具定義**：檢查是否含有惡意指令或不當模式  
2. **使用完整性驗證**：透過雜湊或簽章檢測未授權變更  
3. **實施變更監控**：對工具元資料的異常修改發出警報  
4. **版本控制工具定義**：追蹤變更並在需要時回滾  

這些控制措施相輔相成，為 MCP 實作建立堅實的安全防護，應對 AI 驅動系統的獨特挑戰，同時維持強健的傳統安全實務。

**免責聲明**：  
本文件由 AI 翻譯服務 [Co-op Translator](https://github.com/Azure/co-op-translator) 進行翻譯。雖然我們致力於確保準確性，但請注意自動翻譯可能包含錯誤或不準確之處。原始文件的母語版本應被視為權威來源。對於重要資訊，建議採用專業人工翻譯。我們不對因使用本翻譯而引起的任何誤解或誤釋承擔責任。