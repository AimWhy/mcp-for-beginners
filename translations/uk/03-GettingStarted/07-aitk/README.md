<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "8248e3491f5245ee6ab48ef724a4f65a",
  "translation_date": "2025-07-04T19:30:33+00:00",
  "source_file": "03-GettingStarted/07-aitk/README.md",
  "language_code": "uk"
}
-->
# Використання сервера з розширення AI Toolkit для Visual Studio Code

Коли ви створюєте AI-агента, справа не лише в генерації розумних відповідей; важливо також надати агенту можливість виконувати дії. Саме тут на допомогу приходить Model Context Protocol (MCP). MCP полегшує агентам доступ до зовнішніх інструментів і сервісів у послідовний спосіб. Уявіть це як підключення вашого агента до набору інструментів, якими він *справді* може користуватися.

Припустимо, ви підключаєте агента до вашого MCP-сервера калькулятора. Раптом ваш агент може виконувати математичні операції, просто отримуючи запит на кшталт «Скільки буде 47 помножити на 89?» — без необхідності жорстко кодувати логіку або створювати власні API.

## Огляд

У цьому уроці розглядається, як підключити MCP-сервер калькулятора до агента за допомогою розширення [AI Toolkit](https://aka.ms/AIToolkit) у Visual Studio Code, що дозволить вашому агенту виконувати математичні операції, такі як додавання, віднімання, множення та ділення, використовуючи природну мову.

AI Toolkit — це потужне розширення для Visual Studio Code, яке спрощує розробку агентів. AI-інженери можуть легко створювати AI-додатки, розробляючи та тестуючи генеративні AI-моделі — локально або в хмарі. Розширення підтримує більшість популярних генеративних моделей, доступних сьогодні.

*Примітка*: наразі AI Toolkit підтримує Python та TypeScript.

## Цілі навчання

Після завершення цього уроку ви зможете:

- Використовувати MCP-сервер через AI Toolkit.
- Налаштовувати конфігурацію агента для виявлення та використання інструментів, які надає MCP-сервер.
- Використовувати інструменти MCP за допомогою природної мови.

## Підхід

Ось загальний план дій:

- Створити агента та визначити його системний запит.
- Створити MCP-сервер з інструментами калькулятора.
- Підключити Agent Builder до MCP-сервера.
- Перевірити виклик інструментів агента через природну мову.

Чудово, тепер, коли ми розуміємо послідовність, налаштуємо AI-агента для використання зовнішніх інструментів через MCP, розширюючи його можливості!

## Вимоги

- [Visual Studio Code](https://code.visualstudio.com/)
- [AI Toolkit для Visual Studio Code](https://aka.ms/AIToolkit)

## Практичне завдання: Використання сервера

У цьому завданні ви створите, запустите та вдосконалите AI-агента з інструментами MCP-сервера всередині Visual Studio Code за допомогою AI Toolkit.

### -0- Попередній крок, додайте модель OpenAI GPT-4o до My Models

У завданні використовується модель **GPT-4o**. Модель потрібно додати до **My Models** перед створенням агента.

![Скріншот інтерфейсу вибору моделі в розширенні AI Toolkit для Visual Studio Code. Заголовок: "Знайдіть правильну модель для вашого AI-рішення" з підзаголовком, що заохочує відкривати, тестувати та розгортати AI-моделі. Нижче, у розділі “Popular Models,” відображено шість карток моделей: DeepSeek-R1 (розміщена на GitHub), OpenAI GPT-4o, OpenAI GPT-4.1, OpenAI o1, Phi 4 Mini (CPU - Small, Fast) та DeepSeek-R1 (розміщена на Ollama). Кожна картка має опції “Add” або “Try in Playground”.](../../../../translated_images/aitk-model-catalog.2acd38953bb9c119aa629fe74ef34cc56e4eed35e7f5acba7cd0a59e614ab335.uk.png)

1. Відкрийте розширення **AI Toolkit** через **Activity Bar**.
2. У розділі **Catalog** виберіть **Models**, щоб відкрити **Model Catalog**. Вибір **Models** відкриває **Model Catalog** у новій вкладці редактора.
3. У рядку пошуку **Model Catalog** введіть **OpenAI GPT-4o**.
4. Натисніть **+ Add**, щоб додати модель до списку **My Models**. Переконайтеся, що ви обрали модель, яка **розміщена на GitHub**.
5. У **Activity Bar** переконайтеся, що модель **OpenAI GPT-4o** з’явилася у списку.

### -1- Створення агента

**Agent (Prompt) Builder** дозволяє створювати та налаштовувати власних AI-агентів. У цьому розділі ви створите нового агента та призначите модель для ведення розмови.

![Скріншот інтерфейсу "Calculator Agent" у розширенні AI Toolkit для Visual Studio Code. Ліва панель показує вибрану модель "OpenAI GPT-4o (через GitHub)". Системний запит: "Ви професор університету, який викладає математику," а користувацький запит: "Поясни мені рівняння Фур’є простими словами." Додаткові опції включають кнопки для додавання інструментів, увімкнення MCP Server та вибору структурованого виводу. Внизу синя кнопка “Run”. На правій панелі під заголовком "Get Started with Examples" наведено три приклади агентів: Web Developer (з MCP Server, Second-Grade Simplifier та Dream Interpreter, кожен з коротким описом функцій).](../../../../translated_images/aitk-agent-builder.901e3a2960c3e4774b29a23024ff5bec2d4232f57fae2a418b2aaae80f81c05f.uk.png)

1. Відкрийте розширення **AI Toolkit** через **Activity Bar**.
2. У розділі **Tools** виберіть **Agent (Prompt) Builder**. Вибір відкриває **Agent (Prompt) Builder** у новій вкладці редактора.
3. Натисніть кнопку **+ New Agent**. Розширення запустить майстер налаштування через **Command Palette**.
4. Введіть ім’я **Calculator Agent** і натисніть **Enter**.
5. У **Agent (Prompt) Builder** у полі **Model** виберіть модель **OpenAI GPT-4o (через GitHub)**.

### -2- Створення системного запиту для агента

Після створення агента настав час визначити його особистість і призначення. У цьому розділі ви скористаєтеся функцією **Generate system prompt**, щоб описати поведінку агента — у нашому випадку агента-калькулятора — і модель автоматично створить системний запит.

![Скріншот інтерфейсу "Calculator Agent" у AI Toolkit для Visual Studio Code з відкритим модальним вікном "Generate a prompt." У вікні пояснюється, що шаблон запиту можна згенерувати, надавши базову інформацію, і є текстове поле з прикладом системного запиту: "Ви корисний і ефективний помічник з математики. Коли отримуєте завдання з базової арифметики, відповідаєте правильним результатом." Під текстовим полем кнопки "Close" і "Generate". На фоні видно частину конфігурації агента, включно з вибраною моделлю "OpenAI GPT-4o (через GitHub)" та полями для системного і користувацького запитів.](../../../../translated_images/aitk-generate-prompt.ba9e69d3d2bbe2a26444d0c78775540b14196061eee32c2054e9ee68c4f51f3a.uk.png)

1. У розділі **Prompts** натисніть кнопку **Generate system prompt**. Вона відкриє конструктор запитів, який використовує AI для створення системного запиту агента.
2. У вікні **Generate a prompt** введіть: `Ви корисний і ефективний помічник з математики. Коли отримуєте завдання з базової арифметики, відповідаєте правильним результатом.`
3. Натисніть кнопку **Generate**. У нижньому правому куті з’явиться повідомлення про те, що системний запит генерується. Після завершення запит з’явиться у полі **System prompt** у **Agent (Prompt) Builder**.
4. Перегляньте системний запит і за потреби відредагуйте.

### -3- Створення MCP-сервера

Тепер, коли ви визначили системний запит агента — який керує його поведінкою та відповідями — настав час надати агенту практичні можливості. У цьому розділі ви створите MCP-сервер калькулятора з інструментами для виконання додавання, віднімання, множення та ділення. Цей сервер дозволить вашому агенту виконувати математичні операції в режимі реального часу у відповідь на запити природною мовою.

!["Скріншот нижньої частини інтерфейсу Calculator Agent у розширенні AI Toolkit для Visual Studio Code. Показано розкривні меню “Tools” і “Structure output”, а також випадаюче меню “Choose output format”, встановлене на “text.” Праворуч кнопка “+ MCP Server” для додавання сервера Model Context Protocol. Над розділом Tools розміщено заповнювач іконки зображення.](../../../../translated_images/aitk-add-mcp-server.9742cfddfe808353c0caf9cc0a7ed3e80e13abf4d2ebde315c81c3cb02a2a449.uk.png)

AI Toolkit має шаблони, які полегшують створення власного MCP-сервера. Ми використаємо шаблон Python для створення MCP-сервера калькулятора.

*Примітка*: наразі AI Toolkit підтримує Python та TypeScript.

1. У розділі **Tools** у **Agent (Prompt) Builder** натисніть кнопку **+ MCP Server**. Розширення запустить майстер налаштування через **Command Palette**.
2. Виберіть **+ Add Server**.
3. Виберіть **Create a New MCP Server**.
4. Виберіть шаблон **python-weather**.
5. Виберіть **Default folder** для збереження шаблону MCP-сервера.
6. Введіть ім’я сервера: **Calculator**
7. Відкриється нове вікно Visual Studio Code. Виберіть **Yes, I trust the authors**.
8. У терміналі (**Terminal** > **New Terminal**) створіть віртуальне середовище: `python -m venv .venv`
9. Активуйте віртуальне середовище:
    1. Windows - `.venv\Scripts\activate`
    2. macOS/Linux - `source venv/bin/activate`
10. Встановіть залежності: `pip install -e .[dev]`
11. У вікні **Explorer** в **Activity Bar** розгорніть директорію **src** і відкрийте файл **server.py**.
12. Замініть код у файлі **server.py** на наступний і збережіть:

    ```python
    """
    Sample MCP Calculator Server implementation in Python.

    
    This module demonstrates how to create a simple MCP server with calculator tools
    that can perform basic arithmetic operations (add, subtract, multiply, divide).
    """
    
    from mcp.server.fastmcp import FastMCP
    
    server = FastMCP("calculator")
    
    @server.tool()
    def add(a: float, b: float) -> float:
        """Add two numbers together and return the result."""
        return a + b
    
    @server.tool()
    def subtract(a: float, b: float) -> float:
        """Subtract b from a and return the result."""
        return a - b
    
    @server.tool()
    def multiply(a: float, b: float) -> float:
        """Multiply two numbers together and return the result."""
        return a * b
    
    @server.tool()
    def divide(a: float, b: float) -> float:
        """
        Divide a by b and return the result.
        
        Raises:
            ValueError: If b is zero
        """
        if b == 0:
            raise ValueError("Cannot divide by zero")
        return a / b
    ```

### -4- Запуск агента з MCP-сервером калькулятора

Тепер, коли у вашого агента є інструменти, настав час їх використати! У цьому розділі ви надішлете запити агенту, щоб перевірити, чи використовує він відповідний інструмент із MCP-сервера калькулятора.

![Скріншот інтерфейсу Calculator Agent у розширенні AI Toolkit для Visual Studio Code. Ліва панель у розділі “Tools” показує доданий MCP-сервер local-server-calculator_server з чотирма доступними інструментами: add, subtract, multiply і divide. Значок показує, що активні чотири інструменти. Нижче — згорнутий розділ “Structure output” і синя кнопка “Run”. На правій панелі у розділі “Model Response” агент викликає інструменти multiply і subtract з вхідними даними {"a": 3, "b": 25} і {"a": 75, "b": 20} відповідно. Остаточна “Tool Response” показана як 75.0. Внизу є кнопка “View Code”.](../../../../translated_images/aitk-agent-response-with-tools.e7c781869dc8041a25f9903ed4f7e8e0c7e13d7d94f6786a6c51b1e172f56866.uk.png)

Ви запустите MCP-сервер калькулятора на локальній машині розробника через **Agent Builder** як MCP-клієнт.

1. Натисніть `F5`, щоб почати налагодження MCP-сервера. **Agent (Prompt) Builder** відкриється у новій вкладці редактора. Статус сервера видно у терміналі.
2. У полі **User prompt** у **Agent (Prompt) Builder** введіть: `Я купив 3 товари по $25 кожен, а потім використав знижку $20. Скільки я заплатив?`
3. Натисніть кнопку **Run**, щоб згенерувати відповідь агента.
4. Перегляньте відповідь агента. Модель має зробити висновок, що ви заплатили **$55**.
5. Ось що має відбутися:
    - Агент вибирає інструменти **multiply** і **subtract** для допомоги у розрахунку.
    - Відповідні значення `a` і `b` призначаються для інструменту **multiply**.
    - Відповідні значення `a` і `b` призначаються для інструменту **subtract**.
    - Відповіді від кожного інструменту відображаються у відповідних полях **Tool Response**.
    - Остаточна відповідь моделі відображається у полі **Model Response**.
6. Надсилайте додаткові запити, щоб далі тестувати агента. Ви можете змінити існуючий запит у полі **User prompt**, клікнувши в нього та замінивши текст.
7. Коли закінчите тестування, зупиніть сервер у терміналі, натиснувши **CTRL/CMD+C**.

## Завдання

Спробуйте додати новий інструмент у файл **server.py** (наприклад, обчислення квадратного кореня числа). Надсилайте додаткові запити, які вимагатимуть від агента використання вашого нового інструменту (або існуючих). Не забудьте перезапустити сервер, щоб завантажити нові інструменти.

## Розв’язок

[Розв’язок](./solution/README.md)

## Основні висновки

Основні висновки з цього розділу:

- Розширення AI Toolkit — це чудовий клієнт, який дозволяє використовувати MCP-сервери та їхні інструменти.
- Ви можете додавати нові інструменти до MCP-серверів, розширюючи можливості агента відповідно до змінних вимог.
- AI Toolkit містить шаблони (наприклад, шаблони MCP-серверів на Python), що спрощують створення власних інструментів.

## Додаткові ресурси

- [Документація AI Toolkit](https://aka.ms/AIToolkit/doc)

## Що далі
- Далі: [Тестування та налагодження](../08-testing/README.md)

**Відмова від відповідальності**:  
Цей документ було перекладено за допомогою сервісу автоматичного перекладу [Co-op Translator](https://github.com/Azure/co-op-translator). Хоча ми прагнемо до точності, будь ласка, майте на увазі, що автоматичні переклади можуть містити помилки або неточності. Оригінальний документ рідною мовою слід вважати авторитетним джерелом. Для критично важливої інформації рекомендується звертатися до професійного людського перекладу. Ми не несемо відповідальності за будь-які непорозуміння або неправильні тлумачення, що виникли внаслідок використання цього перекладу.