<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "d1980763f2a545ca6648363bf5757b5a",
  "translation_date": "2025-06-17T16:48:29+00:00",
  "source_file": "03-GettingStarted/07-aitk/README.md",
  "language_code": "uk"
}
-->
# Використання сервера з розширення AI Toolkit для Visual Studio Code

Коли ви створюєте AI-агента, справа не лише в генерації розумних відповідей; важливо також надати агенту можливість виконувати дії. Саме тут на допомогу приходить Model Context Protocol (MCP). MCP спрощує агентам доступ до зовнішніх інструментів і сервісів у послідовний спосіб. Уявіть це як підключення агента до набору інструментів, яким він *дійсно* може користуватися.

Припустімо, ви підключаєте агента до вашого MCP-сервера калькулятора. Раптом ваш агент може виконувати математичні операції просто отримуючи запит на кшталт «Скільки буде 47 помножити на 89?» — без необхідності жорстко прописувати логіку або створювати власні API.

## Огляд

У цьому уроці розглядається, як підключити MCP-сервер калькулятора до агента за допомогою розширення [AI Toolkit](https://aka.ms/AIToolkit) у Visual Studio Code, щоб ваш агент міг виконувати математичні операції, такі як додавання, віднімання, множення та ділення, використовуючи природну мову.

AI Toolkit — потужне розширення для Visual Studio Code, яке спрощує розробку агентів. AI-інженери можуть легко створювати AI-додатки, розробляючи та тестуючи генеративні AI-моделі — локально або в хмарі. Розширення підтримує більшість основних доступних сьогодні генеративних моделей.

*Примітка*: Наразі AI Toolkit підтримує Python і TypeScript.

## Цілі навчання

До кінця цього уроку ви зможете:

- Використовувати MCP-сервер через AI Toolkit.
- Налаштовувати конфігурацію агента для його здатності знаходити та використовувати інструменти, які надає MCP-сервер.
- Використовувати інструменти MCP за допомогою природної мови.

## Підхід

Ось як ми будемо діяти на високому рівні:

- Створити агента та визначити його системний запит.
- Створити MCP-сервер з інструментами калькулятора.
- Підключити Agent Builder до MCP-сервера.
- Перевірити виклик інструментів агента через природну мову.

Чудово, тепер, коли ми розуміємо послідовність, давайте налаштуємо AI-агента для використання зовнішніх інструментів через MCP, розширюючи його можливості!

## Вимоги

- [Visual Studio Code](https://code.visualstudio.com/)
- [AI Toolkit для Visual Studio Code](https://aka.ms/AIToolkit)

## Практичне завдання: Використання сервера

У цьому завданні ви створите, запустите та покращите AI-агента з інструментами з MCP-сервера всередині Visual Studio Code за допомогою AI Toolkit.

### -0- Попередній крок, додайте модель OpenAI GPT-4o до Моєї Колекції Моделей

У завданні використовується модель **GPT-4o**. Модель слід додати до **Моїх моделей** перед створенням агента.

![Скріншот інтерфейсу вибору моделі у розширенні AI Toolkit для Visual Studio Code. Заголовок: "Знайдіть правильну модель для вашого AI-рішення" із підзаголовком, що заохочує відкривати, тестувати та розгортати AI-моделі. Нижче, у розділі «Популярні моделі», відображено шість карток моделей: DeepSeek-R1 (розміщена на GitHub), OpenAI GPT-4o, OpenAI GPT-4.1, OpenAI o1, Phi 4 Mini (CPU - маленька, швидка) та DeepSeek-R1 (розміщена на Ollama). Кожна картка містить опції «Додати» модель або «Спробувати у Playground».](../../../../translated_images/aitk-model-catalog.2acd38953bb9c119aa629fe74ef34cc56e4eed35e7f5acba7cd0a59e614ab335.uk.png)

1. Відкрийте розширення **AI Toolkit** через **Activity Bar**.
2. У розділі **Catalog** оберіть **Models** для відкриття **Model Catalog**. Вибір **Models** відкриває **Model Catalog** у новій вкладці редактора.
3. У пошуковому рядку **Model Catalog** введіть **OpenAI GPT-4o**.
4. Натисніть **+ Add**, щоб додати модель до списку **Мої моделі**. Переконайтеся, що ви обрали модель, яка **розміщена на GitHub**.
5. У **Activity Bar** переконайтеся, що модель **OpenAI GPT-4o** відображається у списку.

### -1- Створення агента

**Agent (Prompt) Builder** дозволяє створювати та налаштовувати власних AI-агентів. У цьому розділі ви створите нового агента та призначите модель для підтримки розмови.

![Скріншот інтерфейсу створення агента "Calculator Agent" у розширенні AI Toolkit для Visual Studio Code. Ліва панель показує обрану модель "OpenAI GPT-4o (через GitHub)". Системний запит: "Ви професор університету, що викладає математику", а користувацький запит: "Поясни мені рівняння Фур'є простими словами". Додаткові опції включають кнопки для додавання інструментів, увімкнення MCP Server і вибору структурованого виводу. Внизу кнопка «Run» синього кольору. На правій панелі у розділі "Get Started with Examples" наведено три приклади агентів: Web Developer (з MCP Server, Second-Grade Simplifier, Dream Interpreter), кожен з коротким описом функцій.](../../../../translated_images/aitk-agent-builder.901e3a2960c3e4774b29a23024ff5bec2d4232f57fae2a418b2aaae80f81c05f.uk.png)

1. Відкрийте розширення **AI Toolkit** через **Activity Bar**.
2. У розділі **Tools** оберіть **Agent (Prompt) Builder**. Вибір відкриває **Agent (Prompt) Builder** у новій вкладці редактора.
3. Натисніть кнопку **+ New Agent**. Розширення запустить майстер налаштування через **Command Palette**.
4. Введіть ім’я **Calculator Agent** і натисніть **Enter**.
5. У полі **Model** в **Agent (Prompt) Builder** оберіть модель **OpenAI GPT-4o (через GitHub)**.

### -2- Створення системного запиту для агента

Після створення агента настав час визначити його особистість і мету. У цьому розділі ви скористаєтеся функцією **Generate system prompt**, щоб описати поведінку агента — у цьому випадку агента-калькулятора — і дозволите моделі згенерувати системний запит за вас.

![Скріншот інтерфейсу "Calculator Agent" у AI Toolkit для Visual Studio Code з відкритим модальним вікном "Generate a prompt". Вікно пояснює, що шаблон запиту можна створити, надавши базову інформацію, і містить текстове поле з прикладом системного запиту: "Ви корисний і ефективний помічник з математики. Коли отримуєте задачу з базової арифметики, відповідаєте правильним результатом." Під текстовим полем кнопки "Close" і "Generate". На задньому плані видно частину конфігурації агента, включно з обраною моделлю "OpenAI GPT-4o (через GitHub)" та полями для системного і користувацького запитів.](../../../../translated_images/aitk-generate-prompt.ba9e69d3d2bbe2a26444d0c78775540b14196061eee32c2054e9ee68c4f51f3a.uk.png)

1. У розділі **Prompts** натисніть кнопку **Generate system prompt**. Ця кнопка відкриває конструктор запитів, який використовує AI для генерації системного запиту для агента.
2. У вікні **Generate a prompt** введіть наступне: `You are a helpful and efficient math assistant. When given a problem involving basic arithmetic, you respond with the correct result.`
3. Натисніть кнопку **Generate**. У правому нижньому куті з’явиться повідомлення, що системний запит генерується. Після завершення генерації запит з’явиться у полі **System prompt** в **Agent (Prompt) Builder**.
4. Перегляньте системний запит і за потреби відредагуйте.

### -3- Створення MCP-сервера

Тепер, коли ви визначили системний запит агента — який керуватиме його поведінкою та відповідями — настав час надати агенту практичні можливості. У цьому розділі ви створите MCP-сервер калькулятора з інструментами для виконання операцій додавання, віднімання, множення та ділення. Цей сервер дозволить агенту виконувати математичні операції в режимі реального часу у відповідь на запити природною мовою.

!["Скріншот нижньої частини інтерфейсу Calculator Agent у розширенні AI Toolkit для Visual Studio Code. Показані розгорнуті меню “Tools” і “Structure output”, а також випадаюче меню “Choose output format”, встановлене на “text”. Праворуч кнопка “+ MCP Server” для додавання сервера Model Context Protocol. Вище розділу Tools — заповнювач зображення іконки.](../../../../translated_images/aitk-add-mcp-server.9742cfddfe808353c0caf9cc0a7ed3e80e13abf4d2ebde315c81c3cb02a2a449.uk.png)

AI Toolkit має шаблони для спрощення створення власного MCP-сервера. Ми використаємо шаблон Python для створення MCP-сервера калькулятора.

*Примітка*: Наразі AI Toolkit підтримує Python і TypeScript.

1. У розділі **Tools** в **Agent (Prompt) Builder** натисніть кнопку **+ MCP Server**. Розширення запустить майстер налаштування через **Command Palette**.
2. Оберіть **+ Add Server**.
3. Оберіть **Create a New MCP Server**.
4. Оберіть шаблон **python-weather**.
5. Оберіть **Default folder** для збереження шаблону MCP-сервера.
6. Введіть наступне ім’я сервера: **Calculator**
7. Відкриється нове вікно Visual Studio Code. Оберіть **Yes, I trust the authors**.
8. У терміналі (**Terminal** > **New Terminal**) створіть віртуальне середовище: `python -m venv .venv`
9. Активуйте віртуальне середовище в терміналі:
    1. Windows - `.venv\Scripts\activate`
    2. macOS/Linux - `source venv/bin/activate`
10. Встановіть залежності через термінал: `pip install -e .[dev]`
11. У перегляді **Explorer** в **Activity Bar** розгорніть директорію **src** і відкрийте файл **server.py** в редакторі.
12. Замініть код у файлі **server.py** на наступний і збережіть:

    ```python
    """
    Sample MCP Calculator Server implementation in Python.

    
    This module demonstrates how to create a simple MCP server with calculator tools
    that can perform basic arithmetic operations (add, subtract, multiply, divide).
    """
    
    from mcp.server.fastmcp import FastMCP
    
    server = FastMCP("calculator")
    
    @server.tool()
    def add(a: float, b: float) -> float:
        """Add two numbers together and return the result."""
        return a + b
    
    @server.tool()
    def subtract(a: float, b: float) -> float:
        """Subtract b from a and return the result."""
        return a - b
    
    @server.tool()
    def multiply(a: float, b: float) -> float:
        """Multiply two numbers together and return the result."""
        return a * b
    
    @server.tool()
    def divide(a: float, b: float) -> float:
        """
        Divide a by b and return the result.
        
        Raises:
            ValueError: If b is zero
        """
        if b == 0:
            raise ValueError("Cannot divide by zero")
        return a / b
    ```

### -4- Запуск агента з MCP-сервером калькулятора

Тепер, коли у вашого агента є інструменти, час їх використати! У цьому розділі ви надішлете запити агенту, щоб перевірити і підтвердити, що агент використовує відповідний інструмент із MCP-сервера калькулятора.

![Скріншот інтерфейсу Calculator Agent у розширенні AI Toolkit для Visual Studio Code. Ліва панель у розділі “Tools” показує доданий MCP сервер local-server-calculator_server із чотирма доступними інструментами: add, subtract, multiply, divide. Показано бейдж із кількістю активних інструментів — 4. Нижче — згорнутий розділ “Structure output” і синя кнопка “Run”. На правій панелі у розділі “Model Response” агент викликає інструменти multiply і subtract з параметрами {"a": 3, "b": 25} і {"a": 75, "b": 20} відповідно. Кінцева відповідь інструменту — 75.0. Внизу кнопка “View Code”.](../../../../translated_images/aitk-agent-response-with-tools.e7c781869dc8041a25f9903ed4f7e8e0c7e13d7d94f6786a6c51b1e172f56866.uk.png)

Ви запустите MCP-сервер калькулятора на локальному комп’ютері розробника через **Agent Builder** як клієнт MCP.

1. Натисніть `F5` to start debugging the MCP server. The **Agent (Prompt) Builder** will open in a new editor tab. The status of the server is visible in the terminal.
1. In the **User prompt** field of the **Agent (Prompt) Builder**, enter the following prompt: `I bought 3 items priced at $25 each, and then used a $20 discount. How much did I pay?`
1. Click the **Run** button to generate the agent's response.
1. Review the agent output. The model should conclude that you paid **$55**.
1. Here's a breakdown of what should occur:
    - The agent selects the **multiply** and **substract** tools to aid in the calculation.
    - The respective `a` and `b` values are assigned for the **multiply** tool.
    - The respective `a` and `b` — значення призначені для інструменту **subtract**.
    - Відповіді від кожного інструменту відображаються у відповідних полях **Tool Response**.
    - Кінцевий результат від моделі виводиться у полі **Model Response**.
2. Надсилайте додаткові запити, щоб детальніше протестувати агента. Ви можете змінити існуючий запит у полі **User prompt**, натиснувши на нього та замінивши текст.
3. Коли завершите тестування, можете зупинити сервер у терміналі, натиснувши **CTRL/CMD+C**.

## Завдання

Спробуйте додати новий інструмент у файл **server.py** (наприклад, функцію, що повертає квадратний корінь числа). Надсилайте додаткові запити, які вимагатимуть від агента використання вашого нового інструменту (або існуючих). Не забудьте перезапустити сервер, щоб завантажити нові інструменти.

## Рішення

[Рішення](./solution/README.md)

## Основні висновки

Основні ідеї цього розділу:

- Розширення AI Toolkit — чудовий клієнт для використання MCP-серверів та їх інструментів.
- Ви можете додавати нові інструменти до MCP-серверів, розширюючи можливості агента відповідно до нових вимог.
- AI Toolkit містить шаблони (наприклад, шаблони MCP-серверів на Python) для спрощення створення власних інструментів.

## Додаткові ресурси

- [Документація AI Toolkit](https://aka.ms/AIToolkit/doc)

## Що далі
- Далі: [Тестування та налагодження](/03-GettingStarted/08-testing/README.md)

**Відмова від відповідальності**:  
Цей документ було перекладено за допомогою сервісу автоматичного перекладу [Co-op Translator](https://github.com/Azure/co-op-translator). Хоча ми прагнемо до точності, будь ласка, майте на увазі, що автоматичні переклади можуть містити помилки або неточності. Оригінальний документ рідною мовою слід вважати авторитетним джерелом. Для критично важливої інформації рекомендується звертатися до професійного людського перекладу. Ми не несемо відповідальності за будь-які непорозуміння або неправильні тлумачення, що виникли внаслідок використання цього перекладу.