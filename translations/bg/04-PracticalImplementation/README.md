<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "7919ce2e537f0c435c7c23fa6775b613",
  "translation_date": "2025-06-11T18:28:03+00:00",
  "source_file": "04-PracticalImplementation/README.md",
  "language_code": "bg"
}
-->
# Практическа реализация

Практическата реализация е моментът, в който силата на Model Context Protocol (MCP) става осезаема. Докато разбирането на теорията и архитектурата зад MCP е важно, истинската стойност се проявява, когато приложите тези концепции за изграждане, тестване и внедряване на решения, които решават реални проблеми. Тази глава преодолява пропастта между концептуалните знания и практическата разработка, като ви води през процеса на създаване на приложения, базирани на MCP.

Независимо дали разработвате интелигентни асистенти, интегрирате AI в бизнес процеси или изграждате персонализирани инструменти за обработка на данни, MCP предоставя гъвкава основа. Неговият езиконезависим дизайн и официалните SDK-та за популярни програмни езици го правят достъпен за широк кръг разработчици. Чрез използването на тези SDK-та можете бързо да прототипирате, итеративно да подобрявате и мащабирате решенията си в различни платформи и среди.

В следващите раздели ще намерите практически примери, примерен код и стратегии за внедряване, които показват как да реализирате MCP на C#, Java, TypeScript, JavaScript и Python. Ще научите и как да отстранявате грешки и тествате MCP сървъри, да управлявате API-та и да внедрявате решения в облака с помощта на Azure. Тези практически ресурси са създадени, за да ускорят вашето обучение и да ви помогнат уверено да изградите стабилни MCP приложения, готови за продукция.

## Преглед

Този урок се фокусира върху практическите аспекти на имплементацията на MCP на няколко програмни езика. Ще разгледаме как да използваме MCP SDK-та на C#, Java, TypeScript, JavaScript и Python за създаване на стабилни приложения, отстраняване на грешки и тестване на MCP сървъри, както и за създаване на многократно използваеми ресурси, подсказки и инструменти.

## Учебни цели

Към края на този урок ще можете да:
- Имплементирате MCP решения с официалните SDK-та на различни програмни езици
- Систематично да отстранявате грешки и тествате MCP сървъри
- Да създавате и използвате функции на сървъра (Ресурси, Подсказки и Инструменти)
- Да проектирате ефективни MCP работни потоци за сложни задачи
- Да оптимизирате имплементациите на MCP за производителност и надеждност

## Официални SDK ресурси

Model Context Protocol предлага официални SDK-та за няколко езика:

- [C# SDK](https://github.com/modelcontextprotocol/csharp-sdk)
- [Java SDK](https://github.com/modelcontextprotocol/java-sdk) 
- [TypeScript SDK](https://github.com/modelcontextprotocol/typescript-sdk)
- [Python SDK](https://github.com/modelcontextprotocol/python-sdk)
- [Kotlin SDK](https://github.com/modelcontextprotocol/kotlin-sdk)

## Работа с MCP SDK-та

Този раздел предоставя практически примери за имплементация на MCP на няколко програмни езика. Можете да намерите примерен код в директорията `samples`, организиран по езици.

### Налични примери

Репозиторият включва примерни имплементации на следните езици:

- C#
- Java
- TypeScript
- JavaScript
- Python

Всеки пример демонстрира ключови концепции и модели на имплементация на MCP за съответния език и екосистема.

## Основни функции на сървъра

MCP сървърите могат да имплементират всяка комбинация от следните функции:

### Ресурси
Ресурсите предоставят контекст и данни за потребителя или AI модела:
- Хранилища на документи
- Бази знания
- Структурирани източници на данни
- Файлови системи

### Подсказки
Подсказките са шаблонирани съобщения и работни потоци за потребителите:
- Предефинирани шаблони за разговори
- Водени модели на взаимодействие
- Специализирани диалогови структури

### Инструменти
Инструментите са функции, които AI моделът може да изпълнява:
- Помощни средства за обработка на данни
- Външни API интеграции
- Изчислителни възможности
- Функционалност за търсене

## Примерни имплементации: C#

Официалният C# SDK репозиторий съдържа няколко примерни имплементации, показващи различни аспекти на MCP:

- **Основен MCP клиент**: Прост пример как да се създаде MCP клиент и да се извикват инструменти
- **Основен MCP сървър**: Минимална имплементация на сървър с основна регистрация на инструменти
- **Разширен MCP сървър**: Пълнофункционален сървър с регистрация на инструменти, автентикация и обработка на грешки
- **Интеграция с ASP.NET**: Примери за интеграция с ASP.NET Core
- **Модели за имплементация на инструменти**: Различни модели за имплементиране на инструменти с различна степен на сложност

MCP C# SDK е в предварителна версия и API-тата могат да се променят. Ще продължим да обновяваме този блог с развитието на SDK-то.

### Ключови функции
- [C# MCP Nuget ModelContextProtocol](https://www.nuget.org/packages/ModelContextProtocol)

- Създаване на [първия MCP сървър](https://devblogs.microsoft.com/dotnet/build-a-model-context-protocol-mcp-server-in-csharp/).

За пълен набор от C# примерни имплементации, посетете [официалния репозиторий с C# SDK примери](https://github.com/modelcontextprotocol/csharp-sdk)

## Примерна имплементация: Java

Java SDK предлага стабилни възможности за имплементация на MCP с корпоративни функции.

### Ключови функции

- Интеграция със Spring Framework
- Силна типова сигурност
- Поддръжка на реактивно програмиране
- Комплексна обработка на грешки

За пълен пример за Java имплементация вижте [MCPSample.java](../../../04-PracticalImplementation/samples/java/MCPSample.java) в директорията с примери.

## Примерна имплементация: JavaScript

JavaScript SDK предоставя лек и гъвкав подход към имплементацията на MCP.

### Ключови функции

- Поддръжка за Node.js и браузър
- API базирано на обещания (Promise)
- Лесна интеграция с Express и други рамки
- Поддръжка на WebSocket за стрийминг

За пълен пример за JavaScript имплементация вижте [mcp_sample.js](../../../04-PracticalImplementation/samples/javascript/mcp_sample.js) в директорията с примери.

## Примерна имплементация: Python

Python SDK предлага Python-ориентиран подход към имплементацията на MCP с отлична интеграция с ML рамки.

### Ключови функции

- Поддръжка на async/await с asyncio
- Интеграция с Flask и FastAPI
- Лесна регистрация на инструменти
- Родна интеграция с популярни ML библиотеки

За пълен пример за Python имплементация вижте [mcp_sample.py](../../../04-PracticalImplementation/samples/python/mcp_sample.py) в директорията с примери.

## Управление на API

Azure API Management е отлично решение за осигуряване на MCP сървъри. Идеята е да поставите Azure API Management пред вашия MCP сървър и да му позволите да управлява функции, които вероятно ще искате, като:

- ограничаване на честотата на заявките
- управление на токени
- мониторинг
- балансиране на натоварването
- сигурност

### Azure пример

Ето един Azure пример, който прави точно това, т.е. [създаване на MCP сървър и осигуряването му с Azure API Management](https://github.com/Azure-Samples/remote-mcp-apim-functions-python).

Вижте как протича потока на авторизация на следващата снимка:

![APIM-MCP](https://github.com/Azure-Samples/remote-mcp-apim-functions-python/blob/main/mcp-client-authorization.gif?raw=true) 

На предишната снимка се случва следното:

- Аутентикация/Авторизация се извършва чрез Microsoft Entra.
- Azure API Management действа като шлюз и използва политики за насочване и управление на трафика.
- Azure Monitor записва всички заявки за по-нататъшен анализ.

#### Поток на авторизация

Нека разгледаме потока на авторизация по-подробно:

![Sequence Diagram](https://github.com/Azure-Samples/remote-mcp-apim-functions-python/blob/main/infra/app/apim-oauth/diagrams/images/mcp-client-auth.png?raw=true)

#### Спецификация за MCP авторизация

Научете повече за [MCP спецификацията за авторизация](https://modelcontextprotocol.io/specification/2025-03-26/basic/authorization#2-10-third-party-authorization-flow)

## Внедряване на отдалечен MCP сървър в Azure

Нека видим дали можем да внедрим примера, който споменахме по-рано:

1. Клонирайте репозиторито

    ```bash
    git clone https://github.com/Azure-Samples/remote-mcp-apim-functions-python.git
    cd remote-mcp-apim-functions-python
    ```

1. Регистрирайте `Microsoft.App` resource provider.
    * If you are using Azure CLI, run `az provider register --namespace Microsoft.App --wait`.
    * If you are using Azure PowerShell, run `Register-AzResourceProvider -ProviderNamespace Microsoft.App`. Then run `(Get-AzResourceProvider -ProviderNamespace Microsoft.App).RegistrationState` и изчакайте няколко минути, за да проверите дали регистрацията е завършена.

2. Стартирайте тази команда [azd](https://aka.ms/azd), за да създадете API Management услугата, функцията (с код) и всички други необходими ресурси в Azure

    ```shell
    azd up
    ```

    Тази команда трябва да внедри всички облачни ресурси в Azure

### Тестване на сървъра с MCP Inspector

1. В **нов прозорец на терминала**, инсталирайте и стартирайте MCP Inspector

    ```shell
    npx @modelcontextprotocol/inspector
    ```

    Трябва да видите интерфейс, подобен на:

    ![Connect to Node inspector](../../../translated_images/connect.141db0b2bd05f096fb1dd91273771fd8b2469d6507656c3b0c9df4b3c5473929.bg.png) 

1. Натиснете CTRL и кликнете, за да заредите уеб приложението MCP Inspector от URL адреса, показан от приложението (напр. http://127.0.0.1:6274/#resources)
1. Задайте типа на транспорта на `SSE`
1. Set the URL to your running API Management SSE endpoint displayed after `azd up` и натиснете **Connect**:

    ```shell
    https://<apim-servicename-from-azd-output>.azure-api.net/mcp/sse
    ```

5. **Списък с инструменти**. Кликнете върху инструмент и изберете **Run Tool**.  

Ако всички стъпки са успешни, вече сте свързани със MCP сървъра и сте успели да извикате инструмент.

## MCP сървъри за Azure

[Remote-mcp-functions](https://github.com/Azure-Samples/remote-mcp-functions-dotnet): Този набор от репозитории е шаблон за бързо стартиране за изграждане и внедряване на персонализирани отдалечени MCP (Model Context Protocol) сървъри с помощта на Azure Functions с Python, C# .NET или Node/TypeScript.

Примерите предоставят цялостно решение, което позволява на разработчиците да:

- Изграждат и стартират локално: Разработват и отстраняват грешки в MCP сървър на локална машина
- Внедряват в Azure: Лесно внедряване в облака с проста команда azd up
- Свързват се от клиенти: Свързване към MCP сървъра от различни клиенти, включително VS Code в режим Copilot agent и инструмента MCP Inspector

### Ключови функции:

- Сигурност по дизайн: MCP сървърът е защитен с ключове и HTTPS
- Опции за автентикация: Поддържа OAuth с вградена автентикация и/или API Management
- Мрежова изолация: Позволява мрежова изолация чрез Azure Virtual Networks (VNET)
- Безсървърна архитектура: Използва Azure Functions за мащабируемо, събитийно базирано изпълнение
- Локална разработка: Пълна поддръжка за локално разработване и отстраняване на грешки
- Лесно внедряване: Оптимизиран процес за внедряване в Azure

Репозиторият включва всички необходими конфигурационни файлове, изходен код и инфраструктурни дефиниции, за да започнете бързо с продукционно готова MCP имплементация.

- [Azure Remote MCP Functions Python](https://github.com/Azure-Samples/remote-mcp-functions-python) - Примерна имплементация на MCP с Azure Functions и Python

- [Azure Remote MCP Functions .NET](https://github.com/Azure-Samples/remote-mcp-functions-dotnet) - Примерна имплементация на MCP с Azure Functions и C# .NET

- [Azure Remote MCP Functions Node/Typescript](https://github.com/Azure-Samples/remote-mcp-functions-typescript) - Примерна имплементация на MCP с Azure Functions и Node/TypeScript

## Основни изводи

- MCP SDK-тата предоставят езиково-специфични инструменти за изграждане на стабилни MCP решения
- Процесът на отстраняване на грешки и тестване е критичен за надеждни MCP приложения
- Многократно използваемите шаблони за подсказки осигуряват последователно взаимодействие с AI
- Добре проектираните работни потоци могат да координират сложни задачи с множество инструменти
- Имплементирането на MCP решения изисква внимание към сигурността, производителността и обработката на грешки

## Упражнение

Проектирайте практичен MCP работен поток, който решава реален проблем във вашата област:

1. Идентифицирайте 3-4 инструмента, които биха били полезни за решаването на този проблем
2. Създайте диаграма на работния поток, показваща как тези инструменти взаимодействат
3. Имплементирайте базова версия на един от инструментите с предпочитания от вас език
4. Създайте шаблон за подсказка, който да помогне на модела ефективно да използва вашия инструмент

## Допълнителни ресурси


---

Следва: [Разширени теми](../05-AdvancedTopics/README.md)

**Отказ от отговорност**:  
Този документ е преведен с помощта на AI преводаческа услуга [Co-op Translator](https://github.com/Azure/co-op-translator). Въпреки че се стремим към точност, моля, имайте предвид, че автоматизираните преводи могат да съдържат грешки или неточности. Оригиналният документ на неговия роден език трябва да се счита за авторитетен източник. За критична информация се препоръчва професионален човешки превод. Ние не носим отговорност за каквито и да е недоразумения или неправилни тълкувания, произтичащи от използването на този превод.