<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "d88dbf928fa0f159b82312e9a6757ba0",
  "translation_date": "2025-06-18T09:32:38+00:00",
  "source_file": "04-PracticalImplementation/README.md",
  "language_code": "bg"
}
-->
# Практическа реализация

Практическата реализация е мястото, където силата на Model Context Protocol (MCP) става осезаема. Докато разбирането на теорията и архитектурата зад MCP е важно, истинската стойност се проявява, когато прилагате тези концепции за създаване, тестване и внедряване на решения, които решават реални проблеми. Тази глава преодолява разликата между концептуалните знания и практическата разработка, като ви води през процеса на създаване на приложения, базирани на MCP.

Независимо дали разработвате интелигентни асистенти, интегрирате AI в бизнес процеси или създавате персонализирани инструменти за обработка на данни, MCP предоставя гъвкава основа. Неговият езиково независим дизайн и официални SDK-та за популярни програмни езици го правят достъпен за широк кръг разработчици. Използвайки тези SDK-та, можете бързо да прототипирате, итеративно да подобрявате и мащабирате вашите решения в различни платформи и среди.

В следващите секции ще намерите практически примери, примерен код и стратегии за внедряване, които демонстрират как да реализирате MCP на C#, Java, TypeScript, JavaScript и Python. Ще научите също как да отстранявате грешки и тествате вашите MCP сървъри, да управлявате API-та и да внедрявате решения в облака с помощта на Azure. Тези практически ресурси са създадени, за да ускорят вашето обучение и да ви помогнат уверено да изградите стабилни, готови за продукция MCP приложения.

## Преглед

Този урок се фокусира върху практическите аспекти на реализацията на MCP на няколко програмни езика. Ще разгледаме как да използваме MCP SDK-та в C#, Java, TypeScript, JavaScript и Python за създаване на стабилни приложения, отстраняване на грешки и тестване на MCP сървъри, както и създаване на повторно използваеми ресурси, подсказки и инструменти.

## Цели на обучението

Към края на този урок ще можете да:
- Реализирате MCP решения, използвайки официални SDK-та на различни програмни езици
- Систематично да отстранявате грешки и тествате MCP сървъри
- Създавате и използвате функции на сървъра (Resources, Prompts и Tools)
- Проектирате ефективни MCP работни потоци за сложни задачи
- Оптимизирате MCP реализации за производителност и надеждност

## Официални SDK ресурси

Model Context Protocol предлага официални SDK-та за няколко езика:

- [C# SDK](https://github.com/modelcontextprotocol/csharp-sdk)
- [Java SDK](https://github.com/modelcontextprotocol/java-sdk)
- [TypeScript SDK](https://github.com/modelcontextprotocol/typescript-sdk)
- [Python SDK](https://github.com/modelcontextprotocol/python-sdk)
- [Kotlin SDK](https://github.com/modelcontextprotocol/kotlin-sdk)

## Работа с MCP SDK-та

Тази секция предоставя практически примери за реализиране на MCP на няколко програмни езика. Можете да намерите примерен код в директорията `samples`, организиран по езици.

### Налични примери

Репозиторията включва [примерни реализации](../../../04-PracticalImplementation/samples) на следните езици:

- [C#](./samples/csharp/README.md)
- [Java](./samples/java/containerapp/README.md)
- [TypeScript](./samples/typescript/README.md)
- [JavaScript](./samples/javascript/README.md)
- [Python](./samples/python/README.md)

Всеки пример демонстрира ключови концепции на MCP и модели за реализация, специфични за съответния език и екосистема.

## Основни функции на сървъра

MCP сървърите могат да реализират всяка комбинация от следните функции:

### Resources
Resources предоставят контекст и данни за потребителя или AI модела:
- Репозитории с документи
- Бази с познания
- Структурирани източници на данни
- Файлови системи

### Prompts
Prompts са шаблонни съобщения и работни потоци за потребителите:
- Предефинирани шаблони за разговори
- Водени модели на взаимодействие
- Специализирани структури на диалога

### Tools
Tools са функции, които AI моделът може да изпълнява:
- Инструменти за обработка на данни
- Връзки с външни API-та
- Изчислителни възможности
- Функции за търсене

## Примерни реализации: C#

Официалният репозиториум на C# SDK съдържа няколко примерни реализации, които демонстрират различни аспекти на MCP:

- **Basic MCP Client**: Прост пример, показващ как да създадете MCP клиент и да извиквате инструменти
- **Basic MCP Server**: Минимална реализация на сървър с основна регистрация на инструменти
- **Advanced MCP Server**: Пълнофункционален сървър с регистрация на инструменти, автентикация и обработка на грешки
- **ASP.NET интеграция**: Примери за интеграция с ASP.NET Core
- **Модели за реализиране на инструменти**: Различни модели за реализиране на инструменти с различна степен на сложност

MCP C# SDK е в предварителна версия и API-тата могат да се променят. Ще обновяваме този блог непрекъснато с развитието на SDK-то.

### Ключови функции
- [C# MCP Nuget ModelContextProtocol](https://www.nuget.org/packages/ModelContextProtocol)

- Създаване на [първия ви MCP сървър](https://devblogs.microsoft.com/dotnet/build-a-model-context-protocol-mcp-server-in-csharp/).

За пълни примерни реализации на C#, посетете [официалния репозиториум с примери за C# SDK](https://github.com/modelcontextprotocol/csharp-sdk)

## Примерна реализация: Java

Java SDK предлага стабилни възможности за реализация на MCP с корпоративни функции.

### Ключови функции

- Интеграция със Spring Framework
- Силна типова сигурност
- Поддръжка на реактивно програмиране
- Обширна обработка на грешки

За пълен пример на Java реализация вижте [MCPSample.java](../../../04-PracticalImplementation/samples/java/MCPSample.java) в директорията с примери.

## Примерна реализация: JavaScript

JavaScript SDK предоставя лек и гъвкав подход за реализация на MCP.

### Ключови функции

- Поддръжка за Node.js и браузъри
- API базирано на Promise
- Лесна интеграция с Express и други рамки
- Поддръжка на WebSocket за стрийминг

За пълен пример на JavaScript реализация вижте [mcp_sample.js](../../../04-PracticalImplementation/samples/javascript/mcp_sample.js) в директорията с примери.

## Примерна реализация: Python

Python SDK предлага Python-ориентиран подход за реализация на MCP с отлична интеграция с ML рамки.

### Ключови функции

- Поддръжка на async/await с asyncio
- Интеграция с Flask и FastAPI
- Лесна регистрация на инструменти
- Натурална интеграция с популярни ML библиотеки

За пълен пример на Python реализация вижте [mcp_sample.py](../../../04-PracticalImplementation/samples/python/mcp_sample.py) в директорията с примери.

## Управление на API

Azure API Management е отлично решение за осигуряване на MCP сървъри. Идеята е да поставите Azure API Management пред вашия MCP сървър и да му позволите да управлява функции, които вероятно ще искате, като:

- ограничаване на честотата на заявките
- управление на токени
- мониторинг
- балансиране на натоварването
- сигурност

### Azure пример

Ето един Azure пример, който прави точно това, т.е. [създава MCP сървър и го защитава с Azure API Management](https://github.com/Azure-Samples/remote-mcp-apim-functions-python).

Вижте как протича процесът на авторизация на следващото изображение:

![APIM-MCP](https://github.com/Azure-Samples/remote-mcp-apim-functions-python/blob/main/mcp-client-authorization.gif?raw=true)

На горната снимка се случва следното:

- Аутентикация/авторизация се извършва чрез Microsoft Entra.
- Azure API Management действа като шлюз и използва политики за насочване и управление на трафика.
- Azure Monitor записва всички заявки за по-нататъшен анализ.

#### Поток на авторизация

Нека разгледаме по-подробно потока на авторизация:

![Sequence Diagram](https://github.com/Azure-Samples/remote-mcp-apim-functions-python/blob/main/infra/app/apim-oauth/diagrams/images/mcp-client-auth.png?raw=true)

#### Спецификация на MCP авторизацията

Научете повече за [MCP Authorization specification](https://modelcontextprotocol.io/specification/2025-03-26/basic/authorization#2-10-third-party-authorization-flow)

## Внедряване на отдалечен MCP сървър в Azure

Нека видим дали можем да внедрим примера, който споменахме по-рано:

1. Клонирайте репозитория

    ```bash
    git clone https://github.com/Azure-Samples/remote-mcp-apim-functions-python.git
    cd remote-mcp-apim-functions-python
    ```

2. Регистрирайте `Microsoft.App` resource provider.
    * If you are using Azure CLI, run `az provider register --namespace Microsoft.App --wait`.
    * If you are using Azure PowerShell, run `Register-AzResourceProvider -ProviderNamespace Microsoft.App`. Then run `(Get-AzResourceProvider -ProviderNamespace Microsoft.App).RegistrationState` и след известно време проверете дали регистрацията е завършена.

3. Стартирайте тази команда [azd](https://aka.ms/azd), за да осигурите API Management услугата, function app (с код) и всички други необходими Azure ресурси

    ```shell
    azd up
    ```

    Тази команда трябва да внедри всички облачни ресурси в Azure

### Тестване на вашия сървър с MCP Inspector

1. В **нов прозорец на терминала**, инсталирайте и стартирайте MCP Inspector

    ```shell
    npx @modelcontextprotocol/inspector
    ```

    Трябва да видите интерфейс, подобен на:

    ![Connect to Node inspector](../../../translated_images/connect.141db0b2bd05f096fb1dd91273771fd8b2469d6507656c3b0c9df4b3c5473929.bg.png)

2. CTRL кликнете, за да заредите MCP Inspector уеб приложението от URL адреса, показан от приложението (например http://127.0.0.1:6274/#resources)
3. Задайте типа транспорт на `SSE`
1. Set the URL to your running API Management SSE endpoint displayed after `azd up` и **Connect**:

    ```shell
    https://<apim-servicename-from-azd-output>.azure-api.net/mcp/sse
    ```

5. **List Tools**. Кликнете върху инструмент и **Run Tool**.

Ако всички стъпки са успешни, вече трябва да сте свързани със MCP сървъра и да сте успели да извикате инструмент.

## MCP сървъри за Azure

[Remote-mcp-functions](https://github.com/Azure-Samples/remote-mcp-functions-dotnet): Този набор от репозитории е шаблон за бърз старт за изграждане и внедряване на персонализирани отдалечени MCP (Model Context Protocol) сървъри с Azure Functions, използвайки Python, C# .NET или Node/TypeScript.

Примерите предоставят цялостно решение, което позволява на разработчиците да:

- Разработват и стартират локално: Разработване и отстраняване на грешки на MCP сървър на локална машина
- Внедряват в Azure: Лесно внедряване в облака с проста команда azd up
- Свързват се от клиенти: Свързване към MCP сървъра от различни клиенти, включително Copilot agent mode на VS Code и инструмента MCP Inspector

### Ключови функции:

- Сигурност по дизайн: MCP сървърът е защитен чрез ключове и HTTPS
- Опции за автентикация: Поддържа OAuth с вградена автентикация и/или API Management
- Изолация на мрежата: Позволява изолация на мрежата чрез Azure Virtual Networks (VNET)
- Архитектура без сървъри: Използва Azure Functions за мащабируемо, събитийно ориентирано изпълнение
- Локална разработка: Пълна поддръжка за локална разработка и отстраняване на грешки
- Лесно внедряване: Оптимизиран процес на внедряване в Azure

Репозиторията включва всички необходими конфигурационни файлове, изходен код и инфраструктурни дефиниции, за да започнете бързо с готова за продукция MCP сървърна реализация.

- [Azure Remote MCP Functions Python](https://github.com/Azure-Samples/remote-mcp-functions-python) - Примерна реализация на MCP с Azure Functions и Python

- [Azure Remote MCP Functions .NET](https://github.com/Azure-Samples/remote-mcp-functions-dotnet) - Примерна реализация на MCP с Azure Functions и C# .NET

- [Azure Remote MCP Functions Node/Typescript](https://github.com/Azure-Samples/remote-mcp-functions-typescript) - Примерна реализация на MCP с Azure Functions и Node/TypeScript.

## Основни изводи

- MCP SDK-тата предоставят езиково-специфични инструменти за реализиране на стабилни MCP решения
- Процесът на отстраняване на грешки и тестване е критичен за надеждни MCP приложения
- Повторно използваемите шаблони за подсказки осигуряват последователни AI взаимодействия
- Добре проектираните работни потоци могат да координират сложни задачи с множество инструменти
- Реализацията на MCP решения изисква внимание към сигурността, производителността и обработката на грешки

## Упражнение

Проектирайте практичен MCP работен поток, който решава реален проблем във вашата област:

1. Идентифицирайте 3-4 инструмента, които биха били полезни за решаването на този проблем
2. Създайте диаграма на работния поток, показваща как тези инструменти взаимодействат
3. Реализирайте базова версия на един от инструментите с предпочитания от вас език
4. Създайте шаблон за подсказка, който да помогне на модела ефективно да използва вашия инструмент

## Допълнителни ресурси


---

Следва: [Разширени теми](../05-AdvancedTopics/README.md)

**Отказ от отговорност**:  
Този документ е преведен с помощта на AI преводаческа услуга [Co-op Translator](https://github.com/Azure/co-op-translator). Въпреки че се стремим към точност, моля, имайте предвид, че автоматизираните преводи могат да съдържат грешки или неточности. Оригиналният документ на неговия език трябва да се счита за авторитетен източник. За критична информация се препоръчва професионален човешки превод. Ние не носим отговорност за каквито и да е недоразумения или неправилни тълкувания, произтичащи от използването на този превод.