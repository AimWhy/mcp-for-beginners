<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "0e1385a3fadf16bacd2f863757bcf5e0",
  "translation_date": "2025-05-17T14:02:26+00:00",
  "source_file": "04-PracticalImplementation/README.md",
  "language_code": "bg"
}
-->
# Практическо приложение

Практическото приложение е мястото, където силата на Протокола за контекст на модела (MCP) става осезаема. Докато разбирането на теорията и архитектурата зад MCP е важно, истинската стойност се проявява, когато приложите тези концепции за изграждане, тестване и внедряване на решения, които решават реални проблеми. Тази глава преодолява пропастта между концептуалното знание и практическото развитие, като ви насочва през процеса на създаване на приложения, базирани на MCP.

Независимо дали разработвате интелигентни асистенти, интегрирате AI в бизнес процеси или изграждате персонализирани инструменти за обработка на данни, MCP предоставя гъвкава основа. Неговият дизайн, независим от езика, и официалните SDK за популярни програмни езици го правят достъпен за широк кръг разработчици. Използвайки тези SDK, можете бързо да прототипирате, итерате и мащабирате вашите решения на различни платформи и среди.

В следващите раздели ще намерите практически примери, примерен код и стратегии за внедряване, които демонстрират как да приложите MCP в C#, Java, TypeScript, JavaScript и Python. Ще научите също как да дебъгвате и тествате вашите MCP сървъри, да управлявате API-та и да внедрявате решения в облака, използвайки Azure. Тези практически ресурси са създадени да ускорят вашето обучение и да ви помогнат уверено да изграждате здрави, готови за производство MCP приложения.

## Преглед

Този урок се фокусира върху практическите аспекти на MCP приложението в множество програмни езици. Ще разгледаме как да използваме MCP SDK в C#, Java, TypeScript, JavaScript и Python за изграждане на здрави приложения, дебъгване и тестване на MCP сървъри и създаване на повторно използваеми ресурси, подкани и инструменти.

## Цели на обучението

До края на този урок ще можете:
- Да приложите MCP решения, използвайки официални SDK в различни програмни езици
- Систематично да дебъгвате и тествате MCP сървъри
- Да създавате и използвате функции на сървъра (Ресурси, Подкани и Инструменти)
- Да проектирате ефективни MCP работни потоци за сложни задачи
- Да оптимизирате MCP приложения за производителност и надеждност

## Официални SDK ресурси

Протоколът за контекст на модела предлага официални SDK за множество езици:

- [C# SDK](https://github.com/modelcontextprotocol/csharp-sdk)
- [Java SDK](https://github.com/modelcontextprotocol/java-sdk) 
- [TypeScript SDK](https://github.com/modelcontextprotocol/typescript-sdk)
- [Python SDK](https://github.com/modelcontextprotocol/python-sdk)
- [Kotlin SDK](https://github.com/modelcontextprotocol/kotlin-sdk)

## Работа с MCP SDK

Този раздел предоставя практически примери за приложение на MCP в множество програмни езици. Можете да намерите примерен код в директорията `samples`, организирана по език.

### Налични примери

Репозиторият включва примерни реализации на следните езици:

- C#
- Java
- TypeScript
- JavaScript
- Python

Всеки пример демонстрира ключови MCP концепции и модели за приложение за конкретния език и екосистема.

## Основни функции на сървъра

MCP сървърите могат да реализират всяка комбинация от тези функции:

### Ресурси
Ресурсите предоставят контекст и данни за потребителя или AI модела:
- Репозитории на документи
- Бази знания
- Структурирани източници на данни
- Файлови системи

### Подкани
Подканите са шаблонни съобщения и работни потоци за потребители:
- Предварително дефинирани шаблони за разговори
- Насочени модели за взаимодействие
- Специализирани структури за диалог

### Инструменти
Инструментите са функции, които AI моделът изпълнява:
- Утилити за обработка на данни
- Външни API интеграции
- Изчислителни възможности
- Функционалност за търсене

## Примерни реализации: C#

Официалният C# SDK репозитори съдържа няколко примерни реализации, демонстриращи различни аспекти на MCP:

- **Основен MCP клиент**: Прост пример, показващ как да създадете MCP клиент и да извикате инструменти
- **Основен MCP сървър**: Минимална сървърна реализация с основна регистрация на инструменти
- **Разширен MCP сървър**: Пълнофункционален сървър с регистрация на инструменти, автентикация и обработка на грешки
- **ASP.NET интеграция**: Примери, демонстриращи интеграция с ASP.NET Core
- **Модели за реализация на инструменти**: Различни модели за реализация на инструменти с различни нива на сложност

C# SDK за MCP е в предварителен преглед и API-те може да се променят. Ние ще актуализираме този блог непрекъснато, докато SDK се развива.

### Ключови функции 
- [C# MCP Nuget ModelContextProtocol](https://www.nuget.org/packages/ModelContextProtocol)

- Изграждане на вашия [първи MCP сървър](https://devblogs.microsoft.com/dotnet/build-a-model-context-protocol-mcp-server-in-csharp/).

За пълни примери за реализация в C#, посетете [официалния C# SDK samples repository](https://github.com/modelcontextprotocol/csharp-sdk)

## Примерна реализация: Java реализация

Java SDK предлага надеждни MCP опции за реализация с функции от корпоративен клас.

### Ключови функции

- Интеграция със Spring Framework
- Силна типова безопасност
- Поддръжка на реактивно програмиране
- Обширна обработка на грешки

За пълна Java реализация, вижте [MCPSample.java](../../../04-PracticalImplementation/samples/java/MCPSample.java) в директорията с примери.

## Примерна реализация: JavaScript реализация

JavaScript SDK предоставя лек и гъвкав подход към MCP реализацията.

### Ключови функции

- Поддръжка за Node.js и браузър
- API, базирано на обещания
- Лесна интеграция с Express и други рамки
- Поддръжка на WebSocket за стрийминг

За пълна JavaScript реализация, вижте [mcp_sample.js](../../../04-PracticalImplementation/samples/javascript/mcp_sample.js) в директорията с примери.

## Примерна реализация: Python реализация

Python SDK предлага подходящ за Python подход към MCP реализацията с отлични интеграции на ML рамки.

### Ключови функции

- Поддръжка на async/await с asyncio
- Интеграция с Flask и FastAPI
- Лесна регистрация на инструменти
- Нативна интеграция с популярни ML библиотеки

За пълна Python реализация, вижте [mcp_sample.py](../../../04-PracticalImplementation/samples/python/mcp_sample.py) в директорията с примери.

## Управление на API

Azure API Management е отличен отговор на въпроса как можем да защитим MCP сървърите. Идеята е да поставите инстанция на Azure API Management пред вашия MCP сървър и да я оставите да обработва функции, които вероятно ще искате като:

- ограничаване на скоростта
- управление на токени
- мониторинг
- балансиране на натоварването
- сигурност

### Azure пример

Ето Azure пример, който прави точно това, т.е. [създаване на MCP сървър и защитата му с Azure API Management](https://github.com/Azure-Samples/remote-mcp-apim-functions-python).

Вижте как се случва потокът на авторизация на изображението по-долу:

![APIM-MCP](https://github.com/Azure-Samples/remote-mcp-apim-functions-python/blob/main/mcp-client-authorization.gif?raw=true) 

На предходното изображение се случва следното:

- Автентикация/авторизация се извършва с помощта на Microsoft Entra.
- Azure API Management действа като шлюз и използва политики за насочване и управление на трафика.
- Azure Monitor записва всички заявки за по-нататъшен анализ.

#### Поток на авторизация

Нека разгледаме потока на авторизация по-подробно:

![Диаграма на последователност](https://github.com/Azure-Samples/remote-mcp-apim-functions-python/blob/main/infra/app/apim-oauth/diagrams/images/mcp-client-auth.png?raw=true)

#### MCP спецификация за авторизация

Научете повече за [MCP спецификацията за авторизация](https://modelcontextprotocol.io/specification/2025-03-26/basic/authorization#2-10-third-party-authorization-flow)

## Внедряване на отдалечен MCP сървър в Azure

Нека видим дали можем да внедрим примера, който споменахме по-рано:

1. Клонирайте репото

    ```bash
    git clone https://github.com/Azure-Samples/remote-mcp-apim-functions-python.git
    cd remote-mcp-apim-functions-python
    ```

1. Регистрирайте `Microsoft.App` resource provider.
    * If you are using Azure CLI, run `az provider register --namespace Microsoft.App --wait`.
    * If you are using Azure PowerShell, run `Register-AzResourceProvider -ProviderNamespace Microsoft.App`. Then run `(Get-AzResourceProvider -ProviderNamespace Microsoft.App).RegistrationState` след известно време, за да проверите дали регистрацията е завършена.

2. Изпълнете тази [azd](https://aka.ms/azd) команда, за да осигурите api management услугата, функцията app (с код) и всички други необходими Azure ресурси

    ```shell
    azd up
    ```

    Тази команда трябва да внедри всички облачни ресурси на Azure

### Тестване на вашия сървър с MCP Inspector

1. В **нов прозорец на терминала** инсталирайте и изпълнете MCP Inspector

    ```shell
    npx @modelcontextprotocol/inspector
    ```

    Трябва да видите интерфейс, подобен на:

    ![Свържете се с Node inspector](../../../translated_images/connect.126df3a6deef0d2e0850b1a5cf0547c8fc4e2e9e0b354238d0a9dbe7893726fa.bg.png)

1. CTRL клик, за да заредите MCP Inspector уеб приложението от URL адреса, показан от приложението (например http://127.0.0.1:6274/#resources)
1. Задайте типа транспорт на `SSE`
1. Set the URL to your running API Management SSE endpoint displayed after `azd up` и **Свържете се**:

    ```shell
    https://<apim-servicename-from-azd-output>.azure-api.net/mcp/sse
    ```

5. **Списък с инструменти**. Кликнете върху инструмент и **Изпълнете инструмент**.

Ако всички стъпки са работили, сега трябва да сте свързани с MCP сървъра и да сте успели да извикате инструмент.

## MCP сървъри за Azure 

[Remote-mcp-functions](https://github.com/Azure-Samples/remote-mcp-functions-dotnet): Този набор от репозитории е шаблон за бърз старт за изграждане и внедряване на персонализирани отдалечени MCP (Model Context Protocol) сървъри, използвайки Azure Functions с Python, C# .NET или Node/TypeScript.

Примерите предоставят цялостно решение, което позволява на разработчиците да:

- Изградят и изпълнят локално: Разработят и дебъгнат MCP сървър на локална машина
- Внедрят в Azure: Лесно внедрят в облака с проста команда azd up
- Свържат се от клиенти: Свържат се с MCP сървъра от различни клиенти, включително режим агент на VS Code Copilot и инструмента MCP Inspector

### Ключови функции:

- Сигурност по дизайн: MCP сървърът е защитен с ключове и HTTPS
- Опции за автентикация: Поддържа OAuth, използвайки вградена автентикация и/или API Management
- Мрежова изолация: Позволява мрежова изолация, използвайки Azure Virtual Networks (VNET)
- Архитектура без сървър: Използва Azure Functions за мащабируемо, събитийно изпълнение
- Локално развитие: Обширна поддръжка за локално развитие и дебъгване
- Лесно внедряване: Оптимизиран процес на внедряване в Azure

Репозиторият включва всички необходими конфигурационни файлове, изходен код и дефиниции на инфраструктурата за бърз старт с готова за производство реализация на MCP сървър.

- [Azure Remote MCP Functions Python](https://github.com/Azure-Samples/remote-mcp-functions-python) - Примерна реализация на MCP, използвайки Azure Functions с Python

- [Azure Remote MCP Functions .NET](https://github.com/Azure-Samples/remote-mcp-functions-dotnet) - Примерна реализация на MCP, използвайки Azure Functions с C# .NET

- [Azure Remote MCP Functions Node/Typescript](https://github.com/Azure-Samples/remote-mcp-functions-typescript) - Примерна реализация на MCP, използвайки Azure Functions с Node/TypeScript.

## Основни изводи

- MCP SDK предоставят езикоспецифични инструменти за реализация на надеждни MCP решения
- Процесът на дебъгване и тестване е критичен за надеждни MCP приложения
- Повторно използваемите шаблони за подкани позволяват последователни AI взаимодействия
- Добре проектираните работни потоци могат да оркестрират сложни задачи, използвайки множество инструменти
- Реализацията на MCP решения изисква внимание към сигурността, производителността и обработката на грешки

## Упражнение

Проектирайте практическа MCP работен поток, който адресира реален проблем във вашия домейн:

1. Идентифицирайте 3-4 инструмента, които биха били полезни за решаване на този проблем
2. Създайте диаграма на работния поток, показваща как тези инструменти взаимодействат
3. Реализирайте основна версия на един от инструментите, използвайки предпочитания от вас език
4. Създайте шаблон за подкана, който би помогнал на модела ефективно да използва вашия инструмент

## Допълнителни ресурси

---

Следва: [Разширени теми](../05-AdvancedTopics/README.md)

**Отказ от отговорност**:  
Този документ е преведен с помощта на AI услуга за превод [Co-op Translator](https://github.com/Azure/co-op-translator). Въпреки че се стремим към точност, моля, имайте предвид, че автоматизираните преводи може да съдържат грешки или неточности. Оригиналният документ на неговия роден език трябва да се счита за авторитетен източник. За критична информация се препоръчва професионален човешки превод. Не носим отговорност за недоразумения или погрешни интерпретации, възникнали от използването на този превод.