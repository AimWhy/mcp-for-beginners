<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "64645691bf0985f1760b948123edf269",
  "translation_date": "2025-06-13T10:58:26+00:00",
  "source_file": "03-GettingStarted/05-sse-server/README.md",
  "language_code": "bg"
}
-->
Сега, когато знаем малко повече за SSE, нека изградим SSE сървър.

## Упражнение: Създаване на SSE сървър

За да създадем нашия сървър, трябва да имаме предвид две неща:

- Трябва да използваме уеб сървър, който да предоставя крайни точки за връзка и съобщения.
- Да изградим сървъра както обикновено с инструменти, ресурси и подсказки, както правехме със stdio.

### -1- Създаване на инстанция на сървър

За да създадем сървъра, използваме същите типове като при stdio. Въпреки това, за транспорта трябва да изберем SSE.

---

Нека добавим нужните маршрути.

### -2- Добавяне на маршрути

Нека добавим маршрути, които обработват връзката и входящите съобщения:

---

Нека добавим възможности към сървъра.

### -3- Добавяне на възможности към сървъра

След като сме дефинирали всичко специфично за SSE, нека добавим възможности като инструменти, подсказки и ресурси.

---

Целият ви код трябва да изглежда така:

---

Страхотно, имаме сървър, използващ SSE, нека го изпробваме.

## Упражнение: Отстраняване на грешки в SSE сървър с Inspector

Inspector е страхотен инструмент, който видяхме в предишен урок [Създаване на първия ви сървър](/03-GettingStarted/01-first-server/README.md). Нека видим дали можем да използваме Inspector и тук:

### -1- Стартиране на инспектора

За да стартирате инспектора, първо трябва да имате работещ SSE сървър, така че нека го направим:

1. Стартирайте сървъра

---

1. Стартирайте инспектора

    > ![NOTE]
    > Стартирайте това в отделен терминален прозорец, различен от този, в който работи сървърът. Също така, имайте предвид, че трябва да промените командата по-долу, за да отговаря на URL адреса, на който работи вашият сървър.

    ```sh
    npx @modelcontextprotocol/inspector --cli http://localhost:8000/sse --method tools/list
    ```

    Стартирането на инспектора изглежда еднакво във всички среди за изпълнение. Забележете, че вместо да подаваме път към сървъра и команда за стартирането му, подаваме URL адреса, на който сървърът работи, и също така посочваме маршрута `/sse`.

### -2- Изпробване на инструмента

Свържете сървъра, като изберете SSE от падащия списък и въведете URL адреса, на който работи вашият сървър, например http:localhost:4321/sse. След това натиснете бутона "Connect". Както преди, изберете да изброите инструментите, изберете инструмент и въведете стойности за вход. Трябва да видите резултат като този по-долу:

![SSE Server running in inspector](../../../../translated_images/sse-inspector.d86628cc597b8fae807a31d3d6837842f5f9ee1bcc6101013fa0c709c96029ad.bg.png)

Страхотно, можете да работите с инспектора, нека видим как да работим с Visual Studio Code.

## Задача

Опитайте да разширите вашия сървър с повече възможности. Вижте [тази страница](https://api.chucknorris.io/) например, за да добавите инструмент, който извиква API – вие решавате как да изглежда сървърът. Забавлявайте се :)

## Решение

[Решение](./solution/README.md) Ето едно възможно решение с работещ код.

## Основни изводи

Основните изводи от тази глава са:

- SSE е вторият поддържан транспорт след stdio.
- За да поддържате SSE, трябва да управлявате входящи връзки и съобщения с помощта на уеб фреймуърк.
- Можете да използвате както Inspector, така и Visual Studio Code за консумиране на SSE сървър, точно както при stdio сървърите. Забележете, че има малки разлики между stdio и SSE. При SSE трябва първо да стартирате сървъра отделно и след това да стартирате инструмента Inspector. За Inspector има и разлики – трябва да посочите URL адреса.

## Примери

- [Java Calculator](../samples/java/calculator/README.md)
- [.Net Calculator](../../../../03-GettingStarted/samples/csharp)
- [JavaScript Calculator](../samples/javascript/README.md)
- [TypeScript Calculator](../samples/typescript/README.md)
- [Python Calculator](../../../../03-GettingStarted/samples/python)

## Допълнителни ресурси

- [SSE](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events)

## Какво следва

- Следва: [HTTP стрийминг с MCP (Streamable HTTP)](/03-GettingStarted/06-http-streaming/README.md)

**Отказ от отговорност**:  
Този документ е преведен с помощта на AI преводаческа услуга [Co-op Translator](https://github.com/Azure/co-op-translator). Въпреки че се стремим към точност, моля, имайте предвид, че автоматизираните преводи могат да съдържат грешки или неточности. Оригиналният документ на неговия роден език трябва да се счита за авторитетен източник. За критична информация се препоръчва професионален човешки превод. Ние не носим отговорност за каквито и да е недоразумения или неправилни тълкувания, произтичащи от използването на този превод.