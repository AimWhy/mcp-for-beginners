<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "c3f4ea5732d64bf965e8aa2907759709",
  "translation_date": "2025-07-17T01:55:42+00:00",
  "source_file": "02-Security/mcp-security-best-practices-2025.md",
  "language_code": "mo"
}
-->
# MCP 安全最佳實踐 - 2025 年 7 月更新

## MCP 實作的全面安全最佳實踐

在使用 MCP 伺服器時，請遵循以下安全最佳實踐，以保護您的資料、基礎架構和使用者：

1. **輸入驗證**：務必驗證並清理輸入，以防止注入攻擊和混淆代理問題。
   - 對所有工具參數實施嚴格驗證
   - 使用結構驗證確保請求符合預期格式
   - 在處理前過濾可能的惡意內容

2. **存取控制**：為您的 MCP 伺服器實施適當的身份驗證和授權，並採用細緻的權限管理。
   - 使用 OAuth 2.0 並搭配 Microsoft Entra ID 等既有身份提供者
   - 為 MCP 工具實施基於角色的存取控制 (RBAC)
   - 已有成熟解決方案時，切勿自行實作身份驗證

3. **安全通訊**：所有與 MCP 伺服器的通訊均使用 HTTPS/TLS，並考慮對敏感資料加強加密。
   - 盡可能配置 TLS 1.3
   - 對關鍵連線實施憑證釘選
   - 定期更換憑證並驗證其有效性

4. **速率限制**：實施速率限制以防止濫用、拒絕服務攻擊，並管理資源消耗。
   - 根據預期使用模式設定適當的請求限制
   - 對過度請求採取分級回應措施
   - 根據身份驗證狀態考慮使用者專屬速率限制

5. **日誌與監控**：監控 MCP 伺服器的可疑活動，並建立完整的稽核軌跡。
   - 記錄所有身份驗證嘗試與工具調用
   - 實施即時警示以偵測異常模式
   - 確保日誌安全存放且無法被竄改

6. **安全儲存**：使用適當的靜態加密保護敏感資料與憑證。
   - 對所有機密資訊使用金鑰保管庫或安全憑證存放
   - 對敏感資料實施欄位級加密
   - 定期更換加密金鑰與憑證

7. **Token 管理**：透過驗證與清理所有模型輸入與輸出，防止 token 傳遞漏洞。
   - 根據受眾聲明實施 token 驗證
   - 嚴禁接受非明確發行給您的 MCP 伺服器的 token
   - 實施適當的 token 壽命管理與輪替

8. **會話管理**：實施安全的會話處理，防止會話劫持與固定攻擊。
   - 使用安全且不可預測的會話 ID
   - 將會話綁定至特定使用者資訊
   - 實施適當的會話過期與輪替機制

9. **工具執行沙箱**：在隔離環境中執行工具，避免遭入侵時的橫向移動。
   - 為工具執行實施容器隔離
   - 設定資源限制以防止資源耗盡攻擊
   - 為不同安全領域使用獨立執行環境

10. **定期安全稽核**：定期檢視 MCP 實作與相依性安全性。
    - 安排定期滲透測試
    - 使用自動掃描工具偵測漏洞
    - 持續更新相依性以修補已知安全問題

11. **內容安全過濾**：對輸入與輸出實施內容安全過濾。
    - 使用 Azure Content Safety 或類似服務偵測有害內容
    - 實施提示屏蔽技術防止提示注入
    - 掃描產生內容以防敏感資料外洩

12. **供應鏈安全**：驗證 AI 供應鏈中所有元件的完整性與真實性。
    - 使用簽名套件並驗證簽章
    - 實施軟體物料清單 (SBOM) 分析
    - 監控相依性惡意更新

13. **工具定義保護**：透過保護工具定義與元資料防止工具中毒。
    - 使用前驗證工具定義
    - 監控工具元資料的異常變更
    - 實施工具定義的完整性檢查

14. **動態執行監控**：監控 MCP 伺服器與工具的執行行為。
    - 實施行為分析以偵測異常
    - 設定異常執行模式警示
    - 採用執行時應用自我防護 (RASP) 技術

15. **最小權限原則**：確保 MCP 伺服器與工具僅以最低必要權限運作。
    - 僅授予每項操作所需的特定權限
    - 定期檢視與稽核權限使用情況
    - 為管理功能實施即時存取控制

**免責聲明**：  
本文件係使用 AI 翻譯服務 [Co-op Translator](https://github.com/Azure/co-op-translator) 進行翻譯。雖然我們致力於確保準確性，但請注意，自動翻譯可能包含錯誤或不準確之處。原始文件的母語版本應視為權威來源。對於重要資訊，建議採用專業人工翻譯。我們不對因使用本翻譯而產生的任何誤解或誤釋承擔責任。