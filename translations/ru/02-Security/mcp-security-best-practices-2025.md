<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "c3f4ea5732d64bf965e8aa2907759709",
  "translation_date": "2025-07-17T01:54:46+00:00",
  "source_file": "02-Security/mcp-security-best-practices-2025.md",
  "language_code": "ru"
}
-->
# Лучшие практики безопасности MCP — обновление за июль 2025 года

## Комплексные рекомендации по безопасности для реализации MCP

При работе с серверами MCP следуйте этим рекомендациям по безопасности, чтобы защитить данные, инфраструктуру и пользователей:

1. **Проверка входных данных**: Всегда проверяйте и очищайте входные данные, чтобы предотвратить инъекции и проблемы с «запутанным посредником».
   - Внедряйте строгую проверку всех параметров инструментов
   - Используйте проверку схем, чтобы убедиться, что запросы соответствуют ожидаемым форматам
   - Фильтруйте потенциально вредоносный контент до обработки

2. **Контроль доступа**: Реализуйте надлежащую аутентификацию и авторизацию для вашего MCP-сервера с детализированными правами доступа.
   - Используйте OAuth 2.0 с проверенными провайдерами идентификации, такими как Microsoft Entra ID
   - Внедряйте ролевой контроль доступа (RBAC) для инструментов MCP
   - Никогда не создавайте собственную систему аутентификации, если существуют проверенные решения

3. **Безопасная связь**: Используйте HTTPS/TLS для всех коммуникаций с MCP-сервером и рассмотрите возможность дополнительного шифрования для чувствительных данных.
   - Настраивайте TLS 1.3, где это возможно
   - Внедряйте закрепление сертификатов для критически важных соединений
   - Регулярно обновляйте сертификаты и проверяйте их действительность

4. **Ограничение частоты запросов**: Внедряйте ограничение скорости, чтобы предотвратить злоупотребления, DoS-атаки и контролировать потребление ресурсов.
   - Устанавливайте адекватные лимиты запросов на основе ожидаемых сценариев использования
   - Реализуйте поэтапные реакции на чрезмерное количество запросов
   - Рассматривайте возможность ограничения скорости для пользователей в зависимости от статуса аутентификации

5. **Логирование и мониторинг**: Отслеживайте подозрительную активность на MCP-сервере и обеспечьте полный аудит.
   - Логируйте все попытки аутентификации и вызовы инструментов
   - Внедряйте оповещения в реальном времени при обнаружении подозрительных паттернов
   - Обеспечьте надежное хранение логов, чтобы исключить возможность их подделки

6. **Безопасное хранение**: Защищайте конфиденциальные данные и учетные данные с помощью шифрования при хранении.
   - Используйте хранилища ключей или безопасные хранилища учетных данных для всех секретов
   - Внедряйте шифрование на уровне полей для чувствительной информации
   - Регулярно обновляйте ключи шифрования и учетные данные

7. **Управление токенами**: Предотвращайте уязвимости, связанные с передачей токенов, проверяя и очищая все входные и выходные данные моделей.
   - Реализуйте проверку токенов на основе аудитории (audience claims)
   - Никогда не принимайте токены, не выданные явно для вашего MCP-сервера
   - Внедряйте правильное управление временем жизни токенов и их обновление

8. **Управление сессиями**: Обеспечьте безопасное управление сессиями, чтобы предотвратить захват и фиксацию сессий.
   - Используйте безопасные, недетерминированные идентификаторы сессий
   - Привязывайте сессии к информации, специфичной для пользователя
   - Реализуйте корректное истечение срока действия и обновление сессий

9. **Изоляция выполнения инструментов**: Запускайте инструменты в изолированных средах, чтобы предотвратить распространение атаки при компрометации.
   - Внедряйте контейнерную изоляцию для выполнения инструментов
   - Устанавливайте ограничения ресурсов, чтобы избежать атак на исчерпание ресурсов
   - Используйте отдельные контексты выполнения для разных зон безопасности

10. **Регулярные аудиты безопасности**: Проводите периодические проверки безопасности ваших реализаций MCP и зависимостей.
    - Планируйте регулярное проведение тестов на проникновение
    - Используйте автоматизированные сканеры для обнаружения уязвимостей
    - Поддерживайте зависимости в актуальном состоянии для устранения известных проблем безопасности

11. **Фильтрация безопасности контента**: Внедряйте фильтры безопасности контента как для входных, так и для выходных данных.
    - Используйте Azure Content Safety или аналогичные сервисы для обнаружения вредоносного контента
    - Реализуйте техники защиты от инъекций в подсказки (prompt injection)
    - Проверяйте сгенерированный контент на возможные утечки конфиденциальных данных

12. **Безопасность цепочки поставок**: Проверяйте целостность и подлинность всех компонентов в вашей AI-цепочке поставок.
    - Используйте подписанные пакеты и проверяйте подписи
    - Внедряйте анализ состава программного обеспечения (SBOM)
    - Отслеживайте наличие вредоносных обновлений зависимостей

13. **Защита определений инструментов**: Предотвращайте «отравление» инструментов, защищая их определения и метаданные.
    - Проверяйте определения инструментов перед использованием
    - Отслеживайте неожиданные изменения в метаданных инструментов
    - Внедряйте проверки целостности определений инструментов

14. **Динамический мониторинг выполнения**: Отслеживайте поведение MCP-серверов и инструментов во время работы.
    - Внедряйте поведенческий анализ для обнаружения аномалий
    - Настраивайте оповещения при обнаружении неожиданных паттернов выполнения
    - Используйте технологии runtime application self-protection (RASP)

15. **Принцип наименьших привилегий**: Обеспечьте работу MCP-серверов и инструментов с минимально необходимыми правами.
    - Предоставляйте только те права, которые необходимы для каждой операции
    - Регулярно проверяйте и аудируйте использование прав
    - Внедряйте доступ по принципу «точно в срок» для административных функций

**Отказ от ответственности**:  
Этот документ был переведен с помощью сервиса автоматического перевода [Co-op Translator](https://github.com/Azure/co-op-translator). Несмотря на наши усилия по обеспечению точности, просим учитывать, что автоматический перевод может содержать ошибки или неточности. Оригинальный документ на его исходном языке следует считать авторитетным источником. Для получения критически важной информации рекомендуется обращаться к профессиональному переводу, выполненному человеком. Мы не несем ответственности за любые недоразумения или неправильные толкования, возникшие в результате использования данного перевода.