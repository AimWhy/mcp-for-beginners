<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "7816cc28f7ab9a54e31f9246429ffcd9",
  "translation_date": "2025-05-17T12:49:18+00:00",
  "source_file": "03-GettingStarted/08-deployment/README.md",
  "language_code": "ru"
}
-->
# Развертывание MCP серверов

Развертывание вашего MCP сервера позволяет другим пользователям получить доступ к его инструментам и ресурсам за пределами вашей локальной среды. Существует несколько стратегий развертывания, которые можно рассмотреть в зависимости от ваших требований к масштабируемости, надежности и простоте управления. Ниже вы найдете рекомендации по развертыванию MCP серверов локально, в контейнерах и в облаке.

## Обзор

Этот урок охватывает процесс развертывания вашего приложения MCP Server.

## Цели обучения

К концу этого урока вы сможете:

- Оценивать различные подходы к развертыванию.
- Развернуть ваше приложение.

## Локальная разработка и развертывание

Если ваш сервер предназначен для работы на машине пользователя, вы можете следовать следующим шагам:

1. **Загрузите сервер**. Если вы не писали сервер, сначала загрузите его на свою машину.
1. **Запустите процесс сервера**: Запустите приложение MCP server.

Для SSE (не требуется для сервера типа stdio)

1. **Настройте сеть**: Убедитесь, что сервер доступен на ожидаемом порту.
1. **Подключите клиентов**: Используйте локальные URL-адреса подключения, такие как `http://localhost:3000`.

## Облачное развертывание

MCP серверы могут быть развернуты на различных облачных платформах:

- **Функции без сервера**: Разверните легкие MCP серверы как функции без сервера.
- **Сервисы контейнеров**: Используйте такие сервисы, как Azure Container Apps, AWS ECS или Google Cloud Run.
- **Kubernetes**: Развертывание и управление MCP серверами в кластерах Kubernetes для высокой доступности.

### Пример: Azure Container Apps

Azure Container Apps поддерживает развертывание MCP серверов. Это все еще находится в стадии разработки и в настоящее время поддерживает серверы SSE.

Вот как вы можете это сделать:

1. Клонируйте репозиторий:

  ```sh
  git clone https://github.com/anthonychu/azure-container-apps-mcp-sample.git
  ```

1. Запустите его локально для тестирования:

  ```sh
  uv venv
  uv sync

  # linux/macOS
  export API_KEYS=<AN_API_KEY>
  # windows
  set API_KEYS=<AN_API_KEY>

  uv run fastapi dev main.py
  ```

1. Чтобы попробовать локально, создайте файл *mcp.json* в каталоге *.vscode* и добавьте следующий контент:

  ```json
  {
      "inputs": [
          {
              "type": "promptString",
              "id": "weather-api-key",
              "description": "Weather API Key",
              "password": true
          }
      ],
      "servers": {
          "weather-sse": {
              "type": "sse",
              "url": "http://localhost:8000/sse",
              "headers": {
                  "x-api-key": "${input:weather-api-key}"
              }
          }
      }
  }
  ```

  Как только сервер SSE будет запущен, вы можете нажать на значок воспроизведения в JSON файле, теперь вы должны увидеть инструменты на сервере, которые будут распознаны GitHub Copilot, увидите значок инструмента.

1. Для развертывания выполните следующую команду:

  ```sh
  az containerapp up -g <RESOURCE_GROUP_NAME> -n weather-mcp --environment mcp -l westus --env-vars API_KEYS=<AN_API_KEY> --source .
  ```

Вот и все, разверните его локально, разверните его в Azure с помощью этих шагов.

## Дополнительные ресурсы

- [Azure Functions + MCP](https://learn.microsoft.com/en-us/samples/azure-samples/remote-mcp-functions-dotnet/remote-mcp-functions-dotnet/)
- [Статья о Azure Container Apps](https://techcommunity.microsoft.com/blog/appsonazureblog/host-remote-mcp-servers-in-azure-container-apps/4403550)
- [Репозиторий MCP для Azure Container Apps](https://github.com/anthonychu/azure-container-apps-mcp-sample)

## Что дальше

- Далее: [Практическая реализация](/04-PracticalImplementation/README.md)

**Отказ от ответственности**:  
Этот документ был переведен с использованием сервиса автоматического перевода [Co-op Translator](https://github.com/Azure/co-op-translator). Хотя мы стремимся к точности, пожалуйста, имейте в виду, что автоматические переводы могут содержать ошибки или неточности. Оригинальный документ на его родном языке следует считать авторитетным источником. Для получения критически важной информации рекомендуется профессиональный перевод человеком. Мы не несем ответственности за любые недоразумения или неправильные интерпретации, возникающие в результате использования этого перевода.