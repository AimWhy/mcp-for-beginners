<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "3dd2f1e39277c31b0e57e29d165354d6",
  "translation_date": "2025-06-12T22:58:52+00:00",
  "source_file": "03-GettingStarted/05-sse-server/README.md",
  "language_code": "ru"
}
-->
Теперь, когда мы немного лучше разобрались с SSE, давайте создадим SSE сервер.

## Упражнение: Создание SSE сервера

Чтобы создать наш сервер, нужно помнить о двух вещах:

- Нам нужен веб-сервер, который будет предоставлять конечные точки для подключения и сообщений.
- Создавать сервер нужно так же, как мы делали с использованием stdio — с инструментами, ресурсами и подсказками.

### -1- Создайте экземпляр сервера

Для создания сервера мы используем те же типы, что и для stdio. Однако в качестве транспорта нужно выбрать SSE.

---

Давайте добавим необходимые маршруты.

### -2- Добавление маршрутов

Добавим маршруты, которые будут обрабатывать подключения и входящие сообщения:

---

Теперь добавим функциональность серверу.

### -3- Добавление возможностей сервера

После того, как мы определили все, что касается SSE, добавим возможности сервера, такие как инструменты, подсказки и ресурсы.

---

Ваш полный код должен выглядеть примерно так:

---

Отлично, у нас есть сервер на базе SSE, давайте теперь его запустим.

## Упражнение: Отладка SSE сервера с помощью Inspector

Inspector — отличный инструмент, который мы уже видели в предыдущем уроке [Создание вашего первого сервера](/03-GettingStarted/01-first-server/README.md). Давайте посмотрим, сможем ли мы использовать Inspector и здесь:

### -1- Запуск Inspector

Для запуска Inspector у вас должен быть запущен SSE сервер, сделаем это следующим образом:

1. Запустите сервер

---

1. Запустите Inspector

    > ![NOTE]
    > Запускайте эту команду в отдельном терминальном окне, отличном от того, где запущен сервер. Также обратите внимание, что нужно будет подстроить команду под URL, по которому работает ваш сервер.

    ```sh
    npx @modelcontextprotocol/inspector --cli http://localhost:8000/sse --method tools/list
    ```

Запуск Inspector одинаков для всех сред выполнения. Обратите внимание, что вместо передачи пути к серверу и команды запуска, мы передаем URL, по которому сервер работает, и указываем маршрут `/sse`.

### -2- Проверка инструмента

Подключитесь к серверу, выбрав SSE в выпадающем списке, и укажите URL, по которому работает ваш сервер, например http://localhost:4321/sse. Затем нажмите кнопку "Connect". Как и раньше, выберите список инструментов, выберите инструмент и введите значения. Вы должны увидеть результат, похожий на этот:

![SSE Server running in inspector](../../../../translated_images/sse-inspector.d86628cc597b8fae807a31d3d6837842f5f9ee1bcc6101013fa0c709c96029ad.ru.png)

Отлично, вы успешно работаете с Inspector, теперь посмотрим, как работать с Visual Studio Code.

## Задание

Попробуйте расширить ваш сервер дополнительными возможностями. Например, загляните на [эту страницу](https://api.chucknorris.io/), чтобы добавить инструмент, который вызывает API. Решайте сами, каким должен быть ваш сервер. Удачи :)

## Решение

[Решение](./solution/README.md) Вот возможный вариант с рабочим кодом.

## Основные выводы

Основные моменты из этой главы:

- SSE — второй поддерживаемый тип транспорта после stdio.
- Для поддержки SSE нужно управлять входящими подключениями и сообщениями с помощью веб-фреймворка.
- Вы можете использовать как Inspector, так и Visual Studio Code для работы с SSE сервером, так же как и с серверами на stdio. Обратите внимание, что есть некоторые отличия между stdio и SSE. Для SSE сервер нужно запускать отдельно, а затем запускать инструмент Inspector. Для Inspector также важно указывать URL сервера.

## Примеры

- [Java Calculator](../samples/java/calculator/README.md)
- [.Net Calculator](../../../../03-GettingStarted/samples/csharp)
- [JavaScript Calculator](../samples/javascript/README.md)
- [TypeScript Calculator](../samples/typescript/README.md)
- [Python Calculator](../../../../03-GettingStarted/samples/python)

## Дополнительные ресурсы

- [SSE](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events)

## Что дальше

- Далее: [HTTP Streaming с MCP (Streamable HTTP)](/03-GettingStarted/06-http-streaming/README.md)

**Отказ от ответственности**:  
Этот документ был переведен с помощью сервиса автоматического перевода [Co-op Translator](https://github.com/Azure/co-op-translator). Несмотря на наши усилия по обеспечению точности, просим учитывать, что автоматический перевод может содержать ошибки или неточности. Оригинальный документ на его исходном языке следует считать авторитетным источником. Для получения критически важной информации рекомендуется использовать профессиональный перевод, выполненный человеком. Мы не несем ответственности за любые недоразумения или неправильные толкования, возникшие в результате использования данного перевода.