<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "1681ca3633aeb49ee03766abdbb94a93",
  "translation_date": "2025-06-17T21:53:48+00:00",
  "source_file": "03-GettingStarted/05-sse-server/README.md",
  "language_code": "ru"
}
-->
Теперь, когда мы знаем немного больше о SSE, давайте создадим SSE сервер.

## Упражнение: Создание SSE сервера

Чтобы создать наш сервер, нужно помнить о двух вещах:

- Нужно использовать веб-сервер для предоставления эндпоинтов для подключения и сообщений.
- Строить сервер так же, как обычно, используя инструменты, ресурсы и подсказки, как мы делали с stdio.

### -1- Создание экземпляра сервера

Для создания сервера мы используем те же типы, что и с stdio. Однако для транспорта нужно выбрать SSE.

---

Давайте добавим необходимые маршруты.

### -2- Добавление маршрутов

Добавим маршруты, которые будут обрабатывать подключение и входящие сообщения:

---

Теперь добавим возможности серверу.

### -3- Добавление возможностей серверу

Теперь, когда мы определили всё, что связано с SSE, добавим возможности сервера, такие как инструменты, подсказки и ресурсы.

---

Ваш полный код должен выглядеть так:

---

Отлично, у нас есть сервер с использованием SSE, давайте теперь его протестируем.

## Упражнение: Отладка SSE сервера с помощью Inspector

Inspector — отличный инструмент, который мы видели в предыдущем уроке [Создание вашего первого сервера](/03-GettingStarted/01-first-server/README.md). Посмотрим, сможем ли мы использовать Inspector и здесь:

### -1- Запуск Inspector

Чтобы запустить Inspector, сначала нужно запустить SSE сервер, сделаем это:

1. Запустите сервер

---

1. Запустите Inspector

    > ![NOTE]
    > Запускайте это в отдельном терминальном окне, отличном от того, где работает сервер. Также обратите внимание, что нужно подстроить команду ниже под URL, по которому запущен ваш сервер.

    ```sh
    npx @modelcontextprotocol/inspector --cli http://localhost:8000/sse --method tools/list
    ```

Запуск Inspector одинаков во всех средах выполнения. Обратите внимание, что вместо передачи пути к серверу и команды для его запуска мы передаем URL, по которому сервер запущен, и указываем маршрут `/sse`.

### -2- Проверка инструмента

Подключитесь к серверу, выбрав SSE в выпадающем списке, и заполните поле URL, где работает ваш сервер, например http://localhost:4321/sse. Затем нажмите кнопку «Connect». Как и раньше, выберите список инструментов, выберите инструмент и введите значения. Вы должны увидеть результат, как на изображении ниже:

![SSE Server running in inspector](../../../../translated_images/sse-inspector.d86628cc597b8fae807a31d3d6837842f5f9ee1bcc6101013fa0c709c96029ad.ru.png)

Отлично, вы можете работать с Inspector, теперь посмотрим, как работать с Visual Studio Code.

## Задание

Попробуйте расширить ваш сервер новыми возможностями. Посмотрите [эту страницу](https://api.chucknorris.io/), чтобы, например, добавить инструмент, который вызывает API. Решайте сами, каким должен быть ваш сервер. Удачи :)

## Решение

[Решение](./solution/README.md) Вот возможное решение с рабочим кодом.

## Основные выводы

Основные выводы из этой главы:

- SSE — второй поддерживаемый тип транспорта после stdio.
- Для поддержки SSE нужно управлять входящими подключениями и сообщениями с помощью веб-фреймворка.
- Вы можете использовать как Inspector, так и Visual Studio Code для работы с SSE сервером, так же как и с серверами stdio. Обратите внимание, что есть небольшие отличия между stdio и SSE. Для SSE сервер нужно запускать отдельно, а затем запускать инструмент Inspector. Для Inspector также есть отличия — нужно указывать URL.

## Примеры

- [Java Calculator](../samples/java/calculator/README.md)
- [.Net Calculator](../../../../03-GettingStarted/samples/csharp)
- [JavaScript Calculator](../samples/javascript/README.md)
- [TypeScript Calculator](../samples/typescript/README.md)
- [Python Calculator](../../../../03-GettingStarted/samples/python)

## Дополнительные ресурсы

- [SSE](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events)

## Что дальше

- Далее: [HTTP Streaming с MCP (Streamable HTTP)](/03-GettingStarted/06-http-streaming/README.md)

**Отказ от ответственности**:  
Этот документ был переведен с помощью сервиса автоматического перевода [Co-op Translator](https://github.com/Azure/co-op-translator). Несмотря на наши усилия обеспечить точность, имейте в виду, что автоматические переводы могут содержать ошибки или неточности. Оригинальный документ на исходном языке следует считать авторитетным источником. Для критически важной информации рекомендуется профессиональный перевод человеком. Мы не несем ответственности за любые недоразумения или неправильные толкования, возникшие в результате использования данного перевода.