<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "98be664d3b19a81ee24fa3f920233864",
  "translation_date": "2025-05-17T07:39:50+00:00",
  "source_file": "02-Security/readme.md",
  "language_code": "he"
}
-->
# שיטות אבטחה מומלצות

אימוץ פרוטוקול ההקשר של המודל (MCP) מביא יכולות חדשות וחזקות ליישומים מונעי AI, אך גם מציב אתגרים אבטחתיים ייחודיים החורגים מעבר לסיכוני תוכנה מסורתיים. בנוסף לדאגות מבוססות כמו קידוד מאובטח, הרשאות מינימליות ואבטחת שרשרת אספקה, MCP ועומסי עבודה של AI מתמודדים עם איומים חדשים כגון הזרקת פקודות, הרעלת כלים ושינוי כלים דינמי. סיכונים אלו יכולים להוביל לדליפת נתונים, הפרות פרטיות והתנהגות מערכת בלתי מכוונת אם לא ינוהלו כראוי.

שיעור זה בוחן את הסיכונים האבטחתיים הרלוונטיים ביותר הקשורים ל-MCP—כולל אימות, הרשאה, הרשאות יתר, הזרקת פקודות עקיפה ופגיעויות שרשרת אספקה—ומספק בקרות מעשיות ושיטות מומלצות להפחתתן. תלמדו גם כיצד לנצל פתרונות של מיקרוסופט כמו Prompt Shields, Azure Content Safety ו-GitHub Advanced Security לחיזוק יישום MCP שלכם. על ידי הבנה ויישום בקרות אלו, תוכלו להפחית באופן משמעותי את הסבירות להפרת אבטחה ולהבטיח שמערכות ה-AI שלכם יישארו חזקות ואמינות.

# מטרות למידה

בסוף השיעור הזה, תוכלו:

- לזהות ולהסביר את הסיכונים האבטחתיים הייחודיים שמביא פרוטוקול ההקשר של המודל (MCP), כולל הזרקת פקודות, הרעלת כלים, הרשאות יתר ופגיעויות שרשרת אספקה.
- לתאר וליישם בקרות הפחתה אפקטיביות לסיכוני אבטחה של MCP, כגון אימות חזק, הרשאות מינימליות, ניהול אסימונים מאובטח ואימות שרשרת אספקה.
- להבין ולנצל פתרונות של מיקרוסופט כמו Prompt Shields, Azure Content Safety ו-GitHub Advanced Security להגנה על עומסי עבודה של MCP ו-AI.
- להכיר בחשיבות אימות מטא-נתונים של כלים, ניטור שינויים דינמיים והגנה מפני התקפות הזרקת פקודות עקיפה.
- לשלב שיטות אבטחה מומלצות מבוססות—כגון קידוד מאובטח, חיזוק שרת וארכיטקטורת אפס אמון—ביישום MCP שלכם כדי להפחית את הסבירות וההשפעה של הפרות אבטחה.

# בקרות אבטחה של MCP

כל מערכת שיש לה גישה למשאבים חשובים מציבה אתגרי אבטחה מובנים. אתגרי אבטחה יכולים להיות מטופלים בדרך כלל באמצעות יישום נכון של בקרות אבטחה בסיסיות ומושגים. מכיוון ש-MCP מוגדר רק לאחרונה, המפרט משתנה במהירות רבה וככל שהפרוטוקול מתפתח. בסופו של דבר בקרות האבטחה בתוכו יבשילו, מה שיאפשר אינטגרציה טובה יותר עם ארכיטקטורות אבטחה מבוססות ושיטות מומלצות.

מחקר שפורסם ב-[Microsoft Digital Defense Report](https://aka.ms/mddr) מציין ש-98% מההפרות המדווחות היו נמנעות על ידי היגיינת אבטחה חזקה וההגנה הטובה ביותר מפני כל סוג של הפרה היא לקבל את היגיינת האבטחה הבסיסית שלך, שיטות קידוד מאובטח ושיטות אבטחת שרשרת אספקה נכונות -- אותן שיטות שנבדקו והוכחו שאנחנו כבר יודעים עליהן עדיין עושות את ההשפעה הגדולה ביותר בהפחתת סיכון אבטחה.

בואו נסתכל על כמה מהדרכים שבהן תוכלו להתחיל להתמודד עם סיכוני אבטחה בעת אימוץ MCP.

# אימות שרת MCP (אם יישום MCP שלכם היה לפני ה-26 באפריל 2025)

> **הערה:** המידע הבא נכון ל-26 באפריל 2025. פרוטוקול MCP מתפתח באופן מתמיד, ויישומים עתידיים עשויים להציג דפוסי אימות ובקרות חדשים. עבור העדכונים וההנחיות העדכניים ביותר, תמיד התייחסו ל-[MCP Specification](https://spec.modelcontextprotocol.io/) ולמאגר [MCP GitHub repository](https://github.com/modelcontextprotocol) הרשמי.

### הצהרת בעיה
המפרט המקורי של MCP הניח שמפתחים יכתבו את שרת האימות שלהם בעצמם. זה דרש ידע ב-OAuth ובמגבלות אבטחה קשורות. שרתי MCP פעלו כשרתים לאימות OAuth 2.0, וניהלו את האימות הנדרש של המשתמש ישירות במקום להאציל אותו לשירות חיצוני כמו Microsoft Entra ID. נכון ל-26 באפריל 2025, עדכון למפרט MCP מאפשר לשרתי MCP להאציל את אימות המשתמש לשירות חיצוני.

### סיכונים
- לוגיקת הרשאה שהוגדרה באופן שגוי בשרת MCP יכולה להוביל לחשיפה של נתונים רגישים ולבקרות גישה מיושמות בצורה שגויה.
- גניבת אסימוני OAuth בשרת MCP המקומי. אם נגנב, ניתן להשתמש באסימון כדי להתחזות לשרת MCP ולגשת למשאבים ונתונים מהשירות שהאסימון OAuth נועד עבורו.

### בקרות הפחתה
- **סקור וחזק את לוגיקת ההרשאה:** ערוך ביקורת קפדנית על יישום ההרשאה של שרת MCP שלך כדי להבטיח שרק משתמשים ולקוחות מיועדים יכולים לגשת למשאבים רגישים. לקבלת הדרכה מעשית, ראה [Azure API Management Your Auth Gateway For MCP Servers | Microsoft Community Hub](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690) ו-[Using Microsoft Entra ID To Authenticate With MCP Servers Via Sessions - Den Delimarsky](https://den.dev/blog/mcp-server-auth-entra-id-session/).
- **אכוף שיטות אסימונים מאובטחות:** עקוב אחר [שיטות המומלצות של מיקרוסופט לאימות אסימונים וחיי אסימון](https://learn.microsoft.com/en-us/entra/identity-platform/access-tokens) כדי למנוע שימוש לרעה באסימוני גישה ולהפחית את הסיכון לשימוש חוזר או גניבה של אסימונים.
- **הגן על אחסון אסימונים:** תמיד אחסן אסימונים בצורה מאובטחת והשתמש בהצפנה כדי להגן עליהם במנוחה ובמעבר. לקבלת טיפים ליישום, ראה [Use secure token storage and encrypt tokens](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2).

# הרשאות יתר לשרתי MCP

### הצהרת בעיה
ייתכן ששרתי MCP קיבלו הרשאות יתר לשירות/משאב שהם ניגשים אליו. לדוגמה, שרת MCP שהוא חלק מיישום מכירות AI המתחבר לחנות נתונים ארגונית צריך לקבל גישה מוגדרת לנתוני המכירות ולא להיות מורשה לגשת לכל הקבצים בחנות. בהתייחסות חזרה לעקרון ההרשאות המינימליות (אחד מעקרונות האבטחה הוותיקים ביותר), אף משאב לא צריך לקבל הרשאות מעבר למה שנדרש לו כדי לבצע את המשימות שהוא נועד להן. AI מציב אתגר מוגבר בתחום זה מכיוון שכדי לאפשר לו להיות גמיש, יכול להיות קשה להגדיר את ההרשאות המדויקות הנדרשות.

### סיכונים
- הענקת הרשאות יתר יכולה לאפשר לדלוף או לשנות נתונים שהשרת MCP לא היה מיועד לגשת אליהם. זה יכול להיות גם בעיית פרטיות אם הנתונים הם מידע אישי מזהה (PII).

### בקרות הפחתה
- **יישום עקרון ההרשאות המינימליות:** הענק לשרת MCP רק את ההרשאות המינימליות הנחוצות לביצוע המשימות הנדרשות שלו. סקור ועדכן באופן קבוע את ההרשאות הללו כדי להבטיח שהן לא חורגות ממה שנדרש. לקבלת הדרכה מפורטת, ראה [Secure least-privileged access](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access).
- **השתמש בבקרת גישה מבוססת תפקידים (RBAC):** הקצה תפקידים לשרת MCP שמוגדרים בקפידה למשאבים ופעולות ספציפיות, תוך הימנעות מהענקת הרשאות רחבות או מיותרות.
- **ניטור וביקורת הרשאות:** עקוב באופן מתמיד אחר השימוש בהרשאות ובצע ביקורת על יומני גישה כדי לזהות ולתקן הרשאות יתר או לא בשימוש במהירות.

# התקפות הזרקת פקודות עקיפה

### הצהרת בעיה

שרתי MCP זדוניים או נפגעים יכולים להציג סיכונים משמעותיים על ידי חשיפת נתוני לקוחות או אפשרות פעולות בלתי מכוונות. סיכונים אלו רלוונטיים במיוחד בעומסי עבודה מבוססי AI ו-MCP, שבהם:

- **התקפות הזרקת פקודות**: תוקפים מטמיעים הוראות זדוניות בפקודות או תוכן חיצוני, מה שגורם למערכת ה-AI לבצע פעולות בלתי מכוונות או לדלוף נתונים רגישים. למידע נוסף: [Prompt Injection](https://simonwillison.net/2025/Apr/9/mcp-prompt-injection/)
- **הרעלת כלים**: תוקפים משנים מטא-נתונים של כלים (כגון תיאורים או פרמטרים) כדי להשפיע על התנהגות ה-AI, פוטנציאלית עוקפים בקרות אבטחה או מדליפים נתונים. פרטים: [Tool Poisoning](https://invariantlabs.ai/blog/mcp-security-notification-tool-poisoning-attacks)
- **הזרקת פקודות בין-תחומית**: הוראות זדוניות מוטמעות במסמכים, דפי אינטרנט או אימיילים, שמעובדים לאחר מכן על ידי ה-AI, מה שמוביל לדליפת נתונים או מניפולציה.
- **שינוי כלים דינמי (Rug Pulls)**: הגדרות כלים יכולות להשתנות לאחר אישור המשתמש, מציגות התנהגויות זדוניות חדשות ללא ידיעת המשתמש.

פגיעויות אלו מדגישות את הצורך באימות, ניטור ובקרות אבטחה חזקות בעת שילוב שרתי וכלי MCP בסביבה שלכם. לפרטים נוספים, ראו את הקישורים לעיל.

**הזרקת פקודות עקיפה** (המכונה גם הזרקת פקודות בין-תחומית או XPIA) היא פגיעות קריטית במערכות AI גנרטיביות, כולל אלו המשתמשות בפרוטוקול ההקשר של המודל (MCP). בהתקפה זו, הוראות זדוניות מוסתרות בתוך תוכן חיצוני—כגון מסמכים, דפי אינטרנט או אימיילים. כאשר מערכת ה-AI מעבדת תוכן זה, היא עשויה לפרש את ההוראות המוטמעות כפקודות משתמש לגיטימיות, מה שמוביל לפעולות בלתי מכוונות כמו דליפת נתונים, יצירת תוכן מזיק או מניפולציה של אינטראקציות משתמשים. להסבר מפורט ודוגמאות מעשיות, ראו [Prompt Injection](https://simonwillison.net/2025/Apr/9/mcp-prompt-injection/).

צורה מסוכנת במיוחד של התקפה זו היא **הרעלת כלים**. כאן, תוקפים מזריקים הוראות זדוניות למטא-נתונים של כלי MCP (כגון תיאורים או פרמטרים של כלים). מכיוון שמודלים של שפה גדולה (LLMs) מסתמכים על מטא-נתונים אלו כדי להחליט אילו כלים להפעיל, תיאורים נפגעים יכולים להטעות את המודל בביצוע קריאות כלים לא מורשות או עקיפת בקרות אבטחה. מניפולציות אלו הן לעיתים קרובות בלתי נראות למשתמשי הקצה אך יכולות להיות מפורשות ומבוצעות על ידי מערכת ה-AI. סיכון זה מוגבר בסביבות שרתי MCP מאוחסנים, שבהן ניתן לעדכן הגדרות כלים לאחר אישור המשתמש—תסריט המכונה לעיתים "[rug pull](https://www.wiz.io/blog/mcp-security-research-briefing#remote-servers-22)". במקרים כאלה, כלי שהיה בטוח בעבר עשוי להיות שונה מאוחר יותר כדי לבצע פעולות זדוניות, כמו דליפת נתונים או שינוי התנהגות מערכת, ללא ידיעת המשתמש. למידע נוסף על וקטור התקפה זה, ראו [Tool Poisoning](https://invariantlabs.ai/blog/mcp-security-notification-tool-poisoning-attacks).

## סיכונים
פעולות AI בלתי מכוונות מציבות מגוון סיכוני אבטחה הכוללים דליפת נתונים והפרות פרטיות.

### בקרות הפחתה
### שימוש ב-Prompt Shields להגנה מפני התקפות הזרקת פקודות עקיפה
-----------------------------------------------------------------------------

**AI Prompt Shields** הם פתרון שפותח על ידי מיקרוסופט להגנה מפני התקפות הזרקת פקודות ישירות ועקיפות. הם עוזרים באמצעות:

1.  **זיהוי וסינון**: Prompt Shields משתמשים באלגוריתמים מתקדמים של למידת מכונה ועיבוד שפה טבעית כדי לזהות ולסנן הוראות זדוניות המוטמעות בתוכן חיצוני, כגון מסמכים, דפי אינטרנט או אימיילים.
    
2.  **Spotlighting**: טכניקה זו עוזרת למערכת ה-AI להבחין בין הוראות מערכת תקפות לבין קלטים חיצוניים שאינם מהימנים. על ידי שינוי טקסט הקלט באופן שהופך אותו לרלוונטי יותר למודל, Spotlighting מבטיח שה-AI יכול לזהות טוב יותר ולהתעלם מהוראות זדוניות.
    
3.  **מפרידים וסימון נתונים**: שילוב מפרידים בהודעת המערכת מציין במפורש את מיקום טקסט הקלט, ועוזר למערכת ה-AI לזהות ולהפריד קלטי משתמשים מתוכן חיצוני שעלול להיות מזיק. סימון נתונים מרחיב את המושג הזה על ידי שימוש בסמנים מיוחדים להדגשת הגבולות של נתונים מהימנים ולא מהימנים.
    
4.  **ניטור ועדכונים מתמשכים**: מיקרוסופט מנטרת ומעדכנת באופן מתמיד את Prompt Shields כדי להתמודד עם איומים חדשים ומתפתחים. גישה פרואקטיבית זו מבטיחה שההגנות יישארו אפקטיביות נגד טכניקות התקפה חדשות.
    
5. **שילוב עם Azure Content Safety:** Prompt Shields הם חלק מחבילת Azure AI Content Safety הרחבה יותר, המספקת כלים נוספים לזיהוי ניסיונות פריצה, תוכן מזיק וסיכוני אבטחה אחרים ביישומי AI.

תוכלו לקרוא עוד על AI prompt shields בתיעוד [Prompt Shields documentation](https://learn.microsoft.com/azure/ai-services/content-safety/concepts/jailbreak-detection).

### אבטחת שרשרת אספקה

אבטחת שרשרת אספקה נותרה יסודית בעידן ה-AI, אך היקף מה שנחשב כשרשרת אספקה שלכם התרחב. בנוסף לחבילות קוד מסורתיות, עליכם לאמת ולנטר באופן קפדני את כל הרכיבים הקשורים ל-AI, כולל מודלים בסיסיים, שירותי הטבעה, ספקי הקשר ו-API צד שלישי. כל אחד מאלה יכול להציג פגיעויות או סיכונים אם לא ינוהלו כראוי.

**שיטות אבטחת שרשרת אספקה מרכזיות ל-AI ו-MCP:**
- **אמתו את כל הרכיבים לפני האינטגרציה:** זה כולל לא רק ספריות קוד פתוח, אלא גם מודלים של AI, מקורות נתונים ו-API חיצוניים. תמיד בדקו את המקור, הרישוי והפגיעויות הידועות.
- **תחזקו צינורות פריסה מאובטחים:** השתמשו בצינורות CI/CD אוטומטיים עם סריקות אבטחה משולבות כדי לזהות בעיות מוקדם. ודאו שרק פריטי אמון נפרסים לייצור.
- **ניטור וביקורת מתמשכים:** יישמו ניטור מתמשך עבור כל התלויות, כולל מודלים ושירותי נתונים, כדי לזהות פגיעויות חדשות או התקפות שרשרת אספקה.
- **החילו הרשאות מינימליות ובקרות גישה:** הגבל גישה למודלים, נתונים ושירותים רק למה שנחוץ לשרת MCP שלכם לתפקד.
- **הגיבו במהירות לאיומים:** יש להחזיק תהליך במקום לתיקון או החלפת רכיבים שנפגעו, ולסיבוב סודות או אישורים אם מתגלה הפרה.

[GitHub Advanced Security](https://github.com/security/advanced-security) מספק תכונות כגון סריקת סודות, סריקת תלות וניתוח CodeQL. כלים אלו משתלבים עם [Azure DevOps](https://azure.microsoft.com/en-us/products/devops) ו-[Azure Repos](https://azure.microsoft.com/en-us/products/devops/repos/) כדי לעזור לצוותים לזהות ולהפחית פגיעויות הן בקוד והן ברכיבי שרשרת אספקה של AI.

מיקרוסופט גם מיישמת שיטות אבטחת שרשרת אספקה מקיפות
- [OWASP Top 10 עבור LLMs](https://genai.owasp.org/download/43299/?tmstv=1731900559)
- [GitHub אבטחה מתקדמת](https://github.com/security/advanced-security)
- [Azure DevOps](https://azure.microsoft.com/products/devops)
- [Azure Repos](https://azure.microsoft.com/products/devops/repos/)
- [המסע לאבטחת שרשרת אספקת התוכנה במיקרוסופט](https://devblogs.microsoft.com/engineering-at-microsoft/the-journey-to-secure-the-software-supply-chain-at-microsoft/)
- [גישה מאובטחת עם הרשאות מינימליות (מיקרוסופט)](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access)
- [המלצות לאימות אסימונים ומשך חיים](https://learn.microsoft.com/entra/identity-platform/access-tokens)
- [שימוש באחסון אסימונים מאובטח והצפנת אסימונים (YouTube)](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2)
- [Azure API Management כשער אימות עבור MCP](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690)
- [שימוש ב-Microsoft Entra ID לאימות עם שרתי MCP](https://den.dev/blog/mcp-server-auth-entra-id-session/)

### הבא

הבא: [פרק 3: התחלת העבודה](/03-GettingStarted/README.md)

**כתב ויתור**:  
מסמך זה תורגם באמצעות שירות תרגום AI [Co-op Translator](https://github.com/Azure/co-op-translator). בעוד אנו שואפים לדיוק, אנא היו מודעים לכך שתרגומים אוטומטיים עשויים להכיל שגיאות או אי-דיוקים. המסמך המקורי בשפתו המקורית צריך להיחשב כמקור סמכותי. למידע קריטי, מומלץ להשתמש בתרגום מקצועי על ידי בני אדם. אנו לא אחראים לאי הבנות או לפרשנויות שגויות הנובעות מהשימוש בתרגום זה.