<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "f00aedb7b1d11b7eaacb0618d8791c65",
  "translation_date": "2025-05-29T23:26:59+00:00",
  "source_file": "02-Security/README.md",
  "language_code": "he"
}
-->
# שיטות עבודה מומלצות לאבטחה

אימוץ פרוטוקול Model Context (MCP) מביא יכולות חדשות ועוצמתיות ליישומים מבוססי בינה מלאכותית, אך גם מציב אתגרים ייחודיים לאבטחה שמעבר לסיכוני תוכנה מסורתיים. בנוסף לדאגות מוכרות כמו קידוד מאובטח, מינימום הרשאות ואבטחת שרשרת האספקה, MCP ועומסי העבודה של בינה מלאכותית מתמודדים עם איומים חדשים כגון הזרקת פרומפט, הרעלת כלים ושינוי דינמי של כלים. סיכונים אלו עלולים להוביל לדליפת מידע, הפרות פרטיות והתנהגות מערכת בלתי צפויה אם לא ינוהלו כראוי.

השיעור הזה בוחן את סיכוני האבטחה הרלוונטיים ביותר הקשורים ל-MCP — כולל אימות, הרשאה, הרשאות מופרזות, הזרקת פרומפט עקיפה ופגיעויות בשרשרת האספקה — ומספק אמצעי בקרה ופרקטיקות מומלצות לפעולה להפחתתם. תלמד גם כיצד לנצל פתרונות של מיקרוסופט כמו Prompt Shields, Azure Content Safety ו-GitHub Advanced Security לחיזוק יישום ה-MCP שלך. באמצעות הבנה ויישום של אמצעי בקרה אלו, תוכל להפחית משמעותית את הסיכוי להפרת אבטחה ולהבטיח שמערכות הבינה המלאכותית שלך יישארו יציבות ואמינות.

# מטרות הלמידה

בסיום השיעור תוכל:

- לזהות ולהסביר את סיכוני האבטחה הייחודיים שמציג פרוטוקול Model Context (MCP), כולל הזרקת פרומפט, הרעלת כלים, הרשאות מופרזות ופגיעויות בשרשרת האספקה.
- לתאר וליישם אמצעי הפחתה יעילים לסיכוני אבטחה של MCP, כגון אימות חזק, מינימום הרשאות, ניהול מאובטח של אסימונים ואימות שרשרת האספקה.
- להבין ולנצל פתרונות מיקרוסופט כמו Prompt Shields, Azure Content Safety ו-GitHub Advanced Security להגנה על MCP ועומסי העבודה של הבינה המלאכותית.
- להכיר את החשיבות של אימות מטא-נתוני כלים, ניטור שינויים דינמיים והגנה מפני התקפות הזרקת פרומפט עקיפה.
- לשלב שיטות אבטחה מבוססות — כמו קידוד מאובטח, חיזוק שרתים וארכיטקטורת אמון אפס — ביישום ה-MCP שלך להפחתת הסיכוי וההשפעה של פרצות אבטחה.

# אמצעי בקרה לאבטחת MCP

כל מערכת שיש לה גישה למשאבים חשובים מתמודדת עם אתגרי אבטחה מובנים. אתגרים אלו בדרך כלל ניתנים לטיפול באמצעות יישום נכון של אמצעי בקרה ומושגי אבטחה בסיסיים. מאחר ש-MCP הוא תקן חדש יחסית, המפרט משתנה במהירות והפרוטוקול מתפתח. בסופו של דבר אמצעי הבקרה בו יתבגרו, מה שיאפשר אינטגרציה טובה יותר עם ארכיטקטורות אבטחה ארגוניות ומקובלות ושיטות עבודה מומלצות.

מחקר שפורסם בדו"ח [Microsoft Digital Defense Report](https://aka.ms/mddr) מציין כי 98% מהפרצות המדווחות ניתן היה למנוע באמצעות היגיינת אבטחה חזקה, וההגנה הטובה ביותר מפני כל סוג של פרצה היא שמירה על היגיינת אבטחה בסיסית, שיטות קידוד מאובטחות ואבטחת שרשרת אספקה נכונה — שיטות מוכחות וידועות אלה עדיין משפיעות בצורה המשמעותית ביותר בהפחתת סיכוני אבטחה.

נבחן כמה דרכים להתחיל להתמודד עם סיכוני אבטחה בעת אימוץ MCP.

> **Note:** המידע הבא נכון ל-**29 במאי 2025**. פרוטוקול MCP ממשיך להתפתח, ויישומים עתידיים עשויים להציג דפוסי אימות ואמצעי בקרה חדשים. לעדכונים והנחיות עדכניות, יש לעיין תמיד ב-[MCP Specification](https://spec.modelcontextprotocol.io/) ובמאגר הרשמי של [MCP GitHub](https://github.com/modelcontextprotocol) ודף [best practice לאבטחה](https://modelcontextprotocol.io/specification/draft/basic/security_best_practices).

### הצגת הבעיה  
מפרט MCP המקורי הניח שמפתחים יכתבו שרת אימות משלהם. זה דרש ידע ב-OAuth ומגבלות אבטחה נלוות. שרתי MCP פעלו כשרתים לאימות OAuth 2.0, וניהלו את אימות המשתמשים ישירות במקום להאציל זאת לשירות חיצוני כמו Microsoft Entra ID. נכון ל-**26 באפריל 2025**, עדכון למפרט MCP מאפשר לשרתי MCP להאציל אימות משתמש לשירות חיצוני.

### סיכונים  
- לוגיקה שגויה בהרשאות בשרת MCP עלולה לחשוף מידע רגיש ולגרום ליישום שגוי של בקרות גישה.
- גניבת אסימון OAuth בשרת MCP המקומי. אם האסימון נגנב, ניתן להשתמש בו כדי להתחזות לשרת MCP ולגשת למשאבים ומידע של השירות שאליו שייך האסימון.

#### Token Passthrough  
העברת אסימונים אסורה במפורש במפרט ההרשאות, מכיוון שהיא יוצרת מספר סיכוני אבטחה הכוללים:

#### עקיפת אמצעי אבטחה  
שרת MCP או ממשקי API במורד הזרם עשויים ליישם אמצעי אבטחה חשובים כמו הגבלת קצב, אימות בקשות או ניטור תנועה, התלויים בקהל האסימון או מגבלות קרדנציאליות אחרות. אם לקוחות יכולים לקבל ולהשתמש באסימונים ישירות מול ממשקי API במורד הזרם מבלי שהשרת יאמת אותם כראוי או יוודא שהאסימונים הונפקו לשירות הנכון, הם עוקפים אמצעי בקרה אלו.

#### בעיות אחריות ומעקב  
שרת MCP לא יוכל לזהות או להבדיל בין לקוחות MCP כאשר הלקוחות קוראים עם אסימון גישה שהונפק במעלה הזרם, שעשוי להיות לא שקוף לשרת.  
יומני שרת המשאבים במורד הזרם עשויים להראות בקשות שנראות כאילו מגיעות ממקור שונה עם זהות שונה, במקום מהשרת MCP שמעביר את האסימונים.  
שני גורמים אלו מקשים על חקירת תקריות, בקרות וביקורת.  
אם שרת MCP מעביר אסימונים מבלי לאמת את הטענות שלהם (כגון תפקידים, הרשאות או קהל) או מטא-נתונים אחרים, שחקן זדוני המחזיק באסימון גנוב יכול להשתמש בשרת כפרוקסי לדליפת מידע.

#### בעיות גבול אמון  
שרת המשאבים במורד הזרם מעניק אמון ליישויות ספציפיות. אמון זה עשוי לכלול הנחות לגבי מקור או דפוסי התנהגות של הלקוח. שבירת גבול אמון זה עלולה לגרום לבעיות בלתי צפויות.  
אם האסימון מתקבל על ידי שירותים מרובים ללא אימות תקין, תוקף שמצליח לפגוע בשירות אחד יכול להשתמש באסימון לגישה לשירותים אחרים המחוברים.

#### סיכון תאימות עתידי  
אפילו אם שרת MCP מתחיל היום כ"פרוקסי טהור", ייתכן שיהיה צורך להוסיף אמצעי אבטחה בהמשך. התחלה עם הפרדה נכונה של קהל האסימון מקלה על התפתחות מודל האבטחה.

### אמצעי הפחתה

**שרתי MCP חייבים שלא לקבל אסימונים שלא הונפקו במפורש עבור שרת MCP**

- **סקירה וחיזוק לוגיקת ההרשאה:** בצע ביקורת קפדנית על יישום ההרשאות בשרת MCP שלך כדי לוודא שרק משתמשים ולקוחות מיועדים יכולים לגשת למשאבים רגישים. להנחיות מעשיות, ראה [Azure API Management Your Auth Gateway For MCP Servers | Microsoft Community Hub](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690) ו-[Using Microsoft Entra ID To Authenticate With MCP Servers Via Sessions - Den Delimarsky](https://den.dev/blog/mcp-server-auth-entra-id-session/).
- **אכיפת שיטות עבודה מאובטחות לאסימונים:** פעל לפי [שיטות העבודה המומלצות של מיקרוסופט לאימות אסימונים ותקופת חיים](https://learn.microsoft.com/en-us/entra/identity-platform/access-tokens) כדי למנוע שימוש לרעה באסימוני גישה ולהפחית את הסיכון לשימוש חוזר או גניבה.
- **הגנה על אחסון אסימונים:** תמיד אחסן אסימונים בצורה מאובטחת והשתמש בהצפנה לשמירתם במנוחה ובמעבר. לטיפים ליישום, ראה [Use secure token storage and encrypt tokens](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2).

# הרשאות מופרזות לשרתי MCP

### הצגת הבעיה  
ייתכן ששרתי MCP קיבלו הרשאות מופרזות לשירות או למשאב שאליו הם ניגשים. לדוגמה, שרת MCP שהוא חלק מיישום מכירות מבוסס בינה מלאכותית שמתחבר למאגר נתונים ארגוני צריך לקבל גישה שמוגבלת לנתוני המכירות בלבד, ולא לקבל גישה לכל הקבצים במאגר. בהתייחס לעקרון המינימום הרשאות (אחד מעקרונות האבטחה הוותיקים ביותר), אין משאב שצריך לקבל הרשאות מעבר למה שנדרש לביצוע המשימות המיועדות לו. הבינה המלאכותית מציבה אתגר מוגבר בתחום זה, כי כדי לאפשר לה גמישות, קשה להגדיר במדויק את ההרשאות הנדרשות.

### סיכונים  
- הענקת הרשאות מופרזות עלולה לאפשר דליפת מידע או שינוי נתונים ששרת MCP לא אמור לגשת אליהם. הדבר יכול גם להוות בעיית פרטיות אם המידע כולל מידע אישי מזהה (PII).

### אמצעי הפחתה  
- **יישום עקרון המינימום הרשאות:** הענק לשרת MCP רק את ההרשאות המינימליות הדרושות לביצוע המשימות שלו. בדוק ועדכן הרשאות אלו באופן שוטף כדי לוודא שאינן עולות על הנדרש. להנחיות מפורטות, ראה [Secure least-privileged access](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access).
- **שימוש בבקרת גישה מבוססת תפקידים (RBAC):** הקצה לשרת MCP תפקידים שמוגבלים למשאבים ופעולות ספציפיות, תוך הימנעות מהרשאות רחבות או מיותרות.
- **ניטור וביקורת הרשאות:** נטר באופן רציף את השימוש בהרשאות ובדוק יומני גישה כדי לזהות ולתקן במהירות הרשאות מופרזות או בלתי מנוצלות.

# התקפות הזרקת פרומפט עקיפה

### הצגת הבעיה

שרתי MCP זדוניים או פגועים עלולים להוות סיכון משמעותי על ידי חשיפת מידע של לקוחות או הפעלת פעולות בלתי רצויות. סיכונים אלו רלוונטיים במיוחד בעומסי עבודה מבוססי בינה מלאכותית ו-MCP, שבהם:

- **התקפות הזרקת פרומפט:** תוקפים משבצים הוראות זדוניות בפרומפטים או בתוכן חיצוני, וגורמים למערכת הבינה המלאכותית לבצע פעולות בלתי רצויות או לדלוף מידע רגיש. למידע נוסף: [Prompt Injection](https://simonwillison.net/2025/Apr/9/mcp-prompt-injection/)
- **הרעלת כלים:** תוקפים משפיעים על מטא-נתוני הכלים (כגון תיאורים או פרמטרים) כדי להשפיע על התנהגות הבינה המלאכותית, לעקוף אמצעי אבטחה או לדלוף מידע. פרטים: [Tool Poisoning](https://invariantlabs.ai/blog/mcp-security-notification-tool-poisoning-attacks)
- **הזרקת פרומפט חוצת תחומים:** הוראות זדוניות משובצות במסמכים, דפי אינטרנט או אימיילים, שמעובדים על ידי הבינה המלאכותית וגורמים לדליפה או מניפולציה של מידע.
- **שינוי דינמי של כלים (Rug Pulls):** ניתן לשנות הגדרות כלים לאחר אישור המשתמש, ולהכניס התנהגויות זדוניות חדשות מבלי שהמשתמש מודע לכך.

פגיעויות אלו מדגישות את הצורך באימות חזק, ניטור ואמצעי אבטחה כאשר משלבים שרתי MCP וכלים בסביבת העבודה שלך. לעיון מעמיק יותר, עיין בקישורים המצוינים למעלה.

![prompt-injection-lg-2048x1034](../../../translated_images/prompt-injection.ed9fbfde297ca877c15bc6daa808681cd3c3dc7bf27bbbda342ef1ba5fc4f52d.he.png)

**הזרקת פרומפט עקיפה** (המכונה גם הזרקת פרומפט חוצת תחומים או XPIA) היא פגיעות קריטית במערכות בינה מלאכותית גנרטיביות, כולל אלו המשתמשות בפרוטוקול Model Context (MCP). בהתקפה זו, הוראות זדוניות מוסתרות בתוך תוכן חיצוני — כגון מסמכים, דפי אינטרנט או אימיילים. כאשר מערכת הבינה המלאכותית מעבדת תוכן זה, היא עשויה לפרש את ההוראות המוטמעות כהוראות משתמש חוקיות, מה שמוביל לפעולות בלתי רצויות כמו דליפת מידע, יצירת תוכן מזיק או מניפולציה של אינטראקציות עם המשתמש. להסבר מפורט ודוגמאות מהעולם האמיתי, ראה [Prompt Injection](https://simonwillison.net/2025/Apr/9/mcp-prompt-injection/).

צורה מסוכנת במיוחד של התקפה זו היא **הרעלת כלים**. כאן, התוקפים משבצים הוראות זדוניות במטא-נתוני כלי MCP (כגון תיאורי כלים או פרמטרים). מכיוון שמודלים שפתיים גדולים (LLMs) מסתמכים על מטא-נתונים אלו כדי להחליט אילו כלים להפעיל, תיאורים פגועים יכולים להטעות את המודל לבצע קריאות כלים לא מורשות או לעקוף אמצעי אבטחה. מניפולציות אלו לרוב בלתי נראות למשתמשי הקצה, אך המערכת מפרשת ומבצעת אותן. סיכון זה מוגבר בסביבות שרת MCP מתארחות, שבהן הגדרות הכלים יכולות להתעדכן לאחר אישור המשתמש — תרחיש שמכונה לפעמים "[rug pull](https://www.wiz.io/blog/mcp-security-research-briefing#remote-servers-22)". במקרים כאלה, כלי שהיו בטוחים בעבר עשויים להיות משוננים לביצוע פעולות זדוניות, כגון דליפת מידע או שינוי התנהגות המערכת, ללא ידיעת המשתמש. למידע נוסף על וקטור התקפה זה, ראה [Tool Poisoning](https://invariantlabs.ai/blog/mcp-security-notification-tool-poisoning-attacks).

![tool-injection-lg-2048x1239 (1)](../../../translated_images/tool-injection.3b0b4a6b24de6befe7d3afdeae44138ef005881aebcfc84c6f61369ce31e3640.he.png)

## סיכונים  
פעולות בינה מלאכותית בלתי רצויות מציגות מגוון סיכוני אבטחה הכוללים דליפת מידע והפרות פרטיות.

### אמצעי הפחתה  
### שימוש ב-Prompt Shields להגנה מפני התקפות הזרקת פרומפט עקיפה  
-----------------------------------------------------------------------------

**AI Prompt Shields** הם פתרון שפותח על ידי מיקרוסופט כדי להגן מפני התקפות הזרקת פרומפט ישירות ועקיפות. הם מסייעים באמצעות:

1.  **זיהוי וסינון:** Prompt Shields משתמשים באלגוריתמים מתקדמים של למידת מכונה ועיבוד שפה טבעית כדי לזהות ולסנן הוראות זדוניות המוטמעות בתוכן חיצוני, כגון מסמכים, דפי אינטרנט או אימיילים.
    
2.  **הדגשה (Spotlighting):** טכניקה זו מסייעת למערכת הבינה המלאכותית להבחין בין הוראות מערכת תקפות לבין קלט חיצוני שעשוי להיות בלתי מהימן. באמצעות שינוי הטקסט כך שיהיה רלוונטי יותר למודל, Spotlighting מבטיחה שהמערכת תוכל לזהות ולהתעלם מהוראות זדוניות טוב יותר.
    
3.  **מפרידים וסימון נתונים (Delimiters and Datamarking):** הכנסת מפרידים בהודעת המערכת מגדירה במפורש את מיקום טקסט הקלט, ועוזרת למערכת להבדיל בין קלטי משתמש לתוכן חיצוני שעלול להזיק. Datamarking מרחיב את הרעיון באמצעות סימנים מיוחדים להדגשת גבולות הנתונים האמינים והלא אמינים.
    
4.  **ניטור ועדכונים מתמשכים:** מיקרוסופט עוקבת ומעדכנת את Prompt Shields באופן שוטף כדי להתמודד עם איומים חדשים ומתפתחים. גישה פרואקטיבית זו מבטיחה שההגנות יישארו יעילות נגד טכניקות התקפה עדכניות.
    
5.  **אינטגרציה עם Azure Content Safety:** Prompt Shields הם חלק מחבילת Azure AI Content Safety הרחבה, שמספקת כל
- [OWASP עשרת הגדולים](https://owasp.org/www-project-top-ten/)
- [OWASP עשרת הגדולים ל-LLMs](https://genai.owasp.org/download/43299/?tmstv=1731900559)
- [GitHub אבטחה מתקדמת](https://github.com/security/advanced-security)
- [Azure DevOps](https://azure.microsoft.com/products/devops)
- [Azure Repos](https://azure.microsoft.com/products/devops/repos/)
- [המסע לאבטחת שרשרת האספקה של התוכנה במיקרוסופט](https://devblogs.microsoft.com/engineering-at-microsoft/the-journey-to-secure-the-software-supply-chain-at-microsoft/)
- [גישה מאובטחת עם הרשאות מינימום (Microsoft)](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access)
- [הנחיות טובות לאימות טוקנים ומשך החיים שלהם](https://learn.microsoft.com/entra/identity-platform/access-tokens)
- [שימוש באחסון טוקנים מאובטח והצפנת טוקנים (YouTube)](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2)
- [ניהול API של Azure כשער אימות ל-MCP](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690)
- [הנחיות אבטחה טובות ל-MCP](https://modelcontextprotocol.io/specification/draft/basic/security_best_practices)
- [שימוש ב-Microsoft Entra ID לאימות מול שרתי MCP](https://den.dev/blog/mcp-server-auth-entra-id-session/)

### הבא

הבא: [פרק 3: התחלה](/03-GettingStarted/README.md)

**כתב ויתור**:  
מסמך זה תורגם באמצעות שירות תרגום מבוסס בינה מלאכותית [Co-op Translator](https://github.com/Azure/co-op-translator). למרות שאנו שואפים לדיוק, יש לקחת בחשבון כי תרגומים אוטומטיים עלולים להכיל שגיאות או אי דיוקים. המסמך המקורי בשפת המקור שלו הוא המקור הסמכותי. למידע קריטי מומלץ להשתמש בתרגום מקצועי של אדם. אנו לא אחראים לכל אי הבנה או פרשנות שגויה הנובעת משימוש בתרגום זה.