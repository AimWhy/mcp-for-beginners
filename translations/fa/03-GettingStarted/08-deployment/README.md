<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "7816cc28f7ab9a54e31f9246429ffcd9",
  "translation_date": "2025-05-17T12:49:39+00:00",
  "source_file": "03-GettingStarted/08-deployment/README.md",
  "language_code": "fa"
}
-->
# استقرار سرورهای MCP

استقرار سرور MCP شما به دیگران اجازه می‌دهد به ابزارها و منابع آن فراتر از محیط محلی شما دسترسی پیدا کنند. بسته به نیازهای شما برای مقیاس‌پذیری، قابلیت اطمینان و سهولت مدیریت، چندین استراتژی استقرار وجود دارد که باید در نظر گرفته شود. در زیر راهنمایی‌هایی برای استقرار سرورهای MCP به صورت محلی، در کانتینرها و در ابر آورده شده است.

## مرور کلی

این درس نحوه استقرار برنامه سرور MCP شما را پوشش می‌دهد.

## اهداف یادگیری

در پایان این درس، شما قادر خواهید بود:

- ارزیابی رویکردهای مختلف استقرار.
- استقرار برنامه خود را انجام دهید.

## توسعه و استقرار محلی

اگر سرور شما قرار است توسط اجرای روی ماشین کاربران مصرف شود، می‌توانید مراحل زیر را دنبال کنید:

1. **دانلود سرور**. اگر سرور را ننوشته‌اید، ابتدا آن را به ماشین خود دانلود کنید.
1. **شروع فرآیند سرور**: برنامه سرور MCP خود را اجرا کنید.

برای SSE (نیازی برای سرور نوع stdio نیست)

1. **پیکربندی شبکه**: اطمینان حاصل کنید که سرور روی پورت مورد انتظار قابل دسترسی است.
1. **اتصال مشتریان**: از URL‌های اتصال محلی مانند `http://localhost:3000` استفاده کنید.

## استقرار در ابر

سرورهای MCP می‌توانند به پلتفرم‌های ابری مختلفی مستقر شوند:

- **توابع بدون سرور**: سرورهای سبک MCP را به عنوان توابع بدون سرور مستقر کنید.
- **خدمات کانتینر**: از خدماتی مانند Azure Container Apps، AWS ECS یا Google Cloud Run استفاده کنید.
- **کوبرنیتس**: سرورهای MCP را در خوشه‌های کوبرنیتس برای قابلیت دسترسی بالا مستقر و مدیریت کنید.

### مثال: برنامه‌های کانتینر Azure

برنامه‌های کانتینر Azure از استقرار سرورهای MCP پشتیبانی می‌کنند. این هنوز در حال توسعه است و در حال حاضر از سرورهای SSE پشتیبانی می‌کند.

در اینجا نحوه انجام آن آمده است:

1. یک مخزن را کلون کنید:

  ```sh
  git clone https://github.com/anthonychu/azure-container-apps-mcp-sample.git
  ```

1. آن را محلی اجرا کنید تا همه چیز را آزمایش کنید:

  ```sh
  uv venv
  uv sync

  # linux/macOS
  export API_KEYS=<AN_API_KEY>
  # windows
  set API_KEYS=<AN_API_KEY>

  uv run fastapi dev main.py
  ```

1. برای امتحان کردن آن به صورت محلی، یک فایل *mcp.json* در یک دایرکتوری *.vscode* ایجاد کنید و محتوای زیر را اضافه کنید:

  ```json
  {
      "inputs": [
          {
              "type": "promptString",
              "id": "weather-api-key",
              "description": "Weather API Key",
              "password": true
          }
      ],
      "servers": {
          "weather-sse": {
              "type": "sse",
              "url": "http://localhost:8000/sse",
              "headers": {
                  "x-api-key": "${input:weather-api-key}"
              }
          }
      }
  }
  ```

  هنگامی که سرور SSE شروع شد، می‌توانید روی آیکون پخش در فایل JSON کلیک کنید، باید اکنون ابزارها روی سرور توسط GitHub Copilot شناسایی شوند، آیکون ابزار را ببینید.

1. برای استقرار، فرمان زیر را اجرا کنید:

  ```sh
  az containerapp up -g <RESOURCE_GROUP_NAME> -n weather-mcp --environment mcp -l westus --env-vars API_KEYS=<AN_API_KEY> --source .
  ```

این کار را انجام دهید، آن را محلی مستقر کنید، از طریق این مراحل به Azure مستقر کنید.

## منابع اضافی

- [توابع Azure + MCP](https://learn.microsoft.com/en-us/samples/azure-samples/remote-mcp-functions-dotnet/remote-mcp-functions-dotnet/)
- [مقاله برنامه‌های کانتینر Azure](https://techcommunity.microsoft.com/blog/appsonazureblog/host-remote-mcp-servers-in-azure-container-apps/4403550)
- [مخزن MCP برنامه‌های کانتینر Azure](https://github.com/anthonychu/azure-container-apps-mcp-sample)

## چه چیزی بعدی است

- بعدی: [پیاده‌سازی عملی](/04-PracticalImplementation/README.md)

**سلب مسئولیت**:  
این سند با استفاده از سرویس ترجمه هوش مصنوعی [Co-op Translator](https://github.com/Azure/co-op-translator) ترجمه شده است. در حالی که ما برای دقت تلاش می‌کنیم، لطفاً توجه داشته باشید که ترجمه‌های خودکار ممکن است شامل خطاها یا نادرستی‌ها باشند. سند اصلی به زبان مادری آن باید به عنوان منبع معتبر در نظر گرفته شود. برای اطلاعات حساس، ترجمه حرفه‌ای انسانی توصیه می‌شود. ما مسئولیتی در قبال سوء تفاهم یا تفسیر نادرست ناشی از استفاده از این ترجمه نداریم.