<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "64645691bf0985f1760b948123edf269",
  "translation_date": "2025-06-13T10:42:08+00:00",
  "source_file": "03-GettingStarted/05-sse-server/README.md",
  "language_code": "fa"
}
-->
حالا که کمی بیشتر با SSE آشنا شدیم، بیایید سرور SSE بسازیم.

## تمرین: ساخت سرور SSE

برای ساخت سرور، باید دو نکته را در نظر داشته باشیم:

- باید از یک وب سرور برای ارائه نقاط اتصال برای ارتباط و پیام‌ها استفاده کنیم.
- سرور را مثل همیشه با ابزارها، منابع و پرامپت‌ها بسازیم، همان‌طور که در stdio انجام می‌دادیم.

### -1- ایجاد یک نمونه سرور

برای ساخت سرور، از همان نوع‌ها مثل stdio استفاده می‌کنیم. اما برای نوع انتقال، باید SSE را انتخاب کنیم.

---

بیایید مسیرهای لازم را اضافه کنیم.

### -2- افزودن مسیرها

حالا مسیرهایی اضافه می‌کنیم که ارتباط و پیام‌های ورودی را مدیریت می‌کنند:

---

حالا قابلیت‌هایی به سرور اضافه کنیم.

### -3- افزودن قابلیت‌های سرور

حالا که همه چیز مربوط به SSE را تعریف کردیم، بیایید قابلیت‌هایی مثل ابزارها، پرامپت‌ها و منابع را به سرور اضافه کنیم.

---

کد کامل شما باید به این شکل باشد:

---

عالی است، حالا سروری با استفاده از SSE داریم، بیایید آن را امتحان کنیم.

## تمرین: دیباگ کردن سرور SSE با Inspector

Inspector ابزاری عالی است که در درس قبلی [ساخت اولین سرور خود](/03-GettingStarted/01-first-server/README.md) دیدیم. بیایید ببینیم آیا می‌توانیم اینجا هم از Inspector استفاده کنیم:

### -1- اجرای Inspector

برای اجرای Inspector، ابتدا باید یک سرور SSE در حال اجرا داشته باشید، پس بیایید این کار را انجام دهیم:

1. اجرای سرور

---

1. اجرای Inspector

    > ![NOTE]
    > این دستور را در یک پنجره ترمینال جداگانه از جایی که سرور در حال اجرا است، اجرا کنید. همچنین توجه داشته باشید که باید دستور زیر را متناسب با URL جایی که سرورتان اجرا می‌شود، تنظیم کنید.

    ```sh
    npx @modelcontextprotocol/inspector --cli http://localhost:8000/sse --method tools/list
    ```

    اجرای Inspector در همه محیط‌ها یکسان است. توجه کنید که به جای ارسال مسیر سرور و دستور شروع سرور، URL جایی که سرور در حال اجرا است را می‌دهیم و همچنین مسیر `/sse` را مشخص می‌کنیم.

### -2- امتحان ابزار

برای اتصال به سرور، در لیست کشویی SSE را انتخاب کنید و در فیلد URL آدرس جایی که سرور شما اجرا می‌شود را وارد کنید، مثلاً http:localhost:4321/sse. سپس روی دکمه "Connect" کلیک کنید. مثل قبل، گزینه نمایش ابزارها را انتخاب کنید، یک ابزار انتخاب کنید و مقادیر ورودی را وارد کنید. باید نتیجه‌ای شبیه تصویر زیر ببینید:

![SSE Server running in inspector](../../../../translated_images/sse-inspector.d86628cc597b8fae807a31d3d6837842f5f9ee1bcc6101013fa0c709c96029ad.fa.png)

عالی است، شما می‌توانید با Inspector کار کنید، حالا ببینیم چگونه می‌توانیم با Visual Studio Code کار کنیم.

## تمرین

سعی کنید سرور خود را با قابلیت‌های بیشتری توسعه دهید. برای مثال به [این صفحه](https://api.chucknorris.io/) مراجعه کنید تا ابزاری اضافه کنید که یک API را فراخوانی می‌کند، خودتان تصمیم بگیرید سرور چگونه باشد. موفق باشید :)

## راه حل

[راه حل](./solution/README.md) اینجا یک راه حل ممکن با کد عملی است.

## نکات کلیدی

نکات کلیدی این فصل عبارتند از:

- SSE دومین نوع انتقال پشتیبانی شده بعد از stdio است.
- برای پشتیبانی از SSE باید ارتباطات و پیام‌های ورودی را با استفاده از یک فریمورک وب مدیریت کنید.
- می‌توانید هم از Inspector و هم از Visual Studio Code برای استفاده از سرور SSE استفاده کنید، همانند سرورهای stdio. توجه کنید که تفاوت‌هایی بین stdio و SSE وجود دارد. برای SSE باید سرور را جداگانه راه‌اندازی کنید و سپس ابزار Inspector را اجرا کنید. همچنین برای Inspector باید URL را مشخص کنید.

## نمونه‌ها

- [ماشین حساب جاوا](../samples/java/calculator/README.md)
- [ماشین حساب دات نت](../../../../03-GettingStarted/samples/csharp)
- [ماشین حساب جاوااسکریپت](../samples/javascript/README.md)
- [ماشین حساب تایپ‌اسکریپت](../samples/typescript/README.md)
- [ماشین حساب پایتون](../../../../03-GettingStarted/samples/python)

## منابع اضافی

- [SSE](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events)

## ادامه مسیر

- بعدی: [پخش HTTP با MCP (HTTP قابل پخش)](/03-GettingStarted/06-http-streaming/README.md)

**سلب مسئولیت**:  
این سند با استفاده از سرویس ترجمه هوش مصنوعی [Co-op Translator](https://github.com/Azure/co-op-translator) ترجمه شده است. در حالی که ما در تلاش برای دقت هستیم، لطفاً توجه داشته باشید که ترجمه‌های خودکار ممکن است حاوی خطا یا نادرستی باشند. سند اصلی به زبان بومی آن باید به عنوان منبع معتبر در نظر گرفته شود. برای اطلاعات حیاتی، ترجمه حرفه‌ای انسانی توصیه می‌شود. ما مسئول هیچگونه سوءتفاهم یا تفسیر نادرستی که از استفاده این ترجمه ناشی شود، نیستیم.