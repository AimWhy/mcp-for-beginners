<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "3dd2f1e39277c31b0e57e29d165354d6",
  "translation_date": "2025-06-12T21:57:57+00:00",
  "source_file": "03-GettingStarted/05-sse-server/README.md",
  "language_code": "fa"
}
-->
حالا که کمی بیشتر درباره SSE می‌دانیم، بیایید یک سرور SSE بسازیم.

## تمرین: ایجاد یک سرور SSE

برای ساخت سرور، باید دو نکته را در نظر داشته باشیم:

- باید از یک وب سرور برای ارائه نقاط اتصال (endpoints) برای اتصال و پیام‌ها استفاده کنیم.
- سرور خود را مانند قبل با ابزارها، منابع و درخواست‌ها (prompts) بسازیم، همانطور که هنگام استفاده از stdio انجام می‌دادیم.

### -1- ایجاد یک نمونه سرور

برای ساخت سرور، از همان انواعی استفاده می‌کنیم که با stdio به کار می‌بردیم. اما برای انتقال داده، باید SSE را انتخاب کنیم.

---

حالا بیایید مسیرهای مورد نیاز را اضافه کنیم.

### -2- افزودن مسیرها

بیایید مسیرهایی اضافه کنیم که اتصال و پیام‌های ورودی را مدیریت کنند:

---

حالا قابلیت‌های سرور را اضافه کنیم.

### -3- افزودن قابلیت‌های سرور

حالا که همه چیز مخصوص SSE تعریف شده است، بیایید قابلیت‌هایی مانند ابزارها، درخواست‌ها و منابع را به سرور اضافه کنیم.

---

کد کامل شما باید به این شکل باشد:

---

عالی است، ما یک سرور با استفاده از SSE داریم، بیایید آن را امتحان کنیم.

## تمرین: اشکال‌زدایی سرور SSE با Inspector

Inspector یک ابزار عالی است که در درس قبلی [ساخت اولین سرور شما](/03-GettingStarted/01-first-server/README.md) دیدیم. بیایید ببینیم آیا می‌توانیم Inspector را اینجا هم استفاده کنیم:

### -1- اجرای Inspector

برای اجرای Inspector، ابتدا باید یک سرور SSE در حال اجرا داشته باشید، پس بیایید این کار را انجام دهیم:

1. سرور را اجرا کنید

---

1. Inspector را اجرا کنید

    > [!NOTE]
    > این دستور را در یک پنجره ترمینال جداگانه نسبت به جایی که سرور در حال اجرا است، اجرا کنید. همچنین توجه داشته باشید که باید دستور زیر را متناسب با آدرس URL که سرور شما در آن اجرا می‌شود، تنظیم کنید.

    ```sh
    npx @modelcontextprotocol/inspector --cli http://localhost:8000/sse --method tools/list
    ```

    اجرای Inspector در تمام محیط‌های اجرایی یکسان است. توجه کنید که به جای دادن مسیر سرور و دستور شروع سرور، آدرس URL که سرور در آن اجرا می‌شود را می‌دهیم و همچنین مسیر `/sse` را مشخص می‌کنیم.

### -2- امتحان کردن ابزار

با انتخاب SSE از لیست کشویی، به سرور متصل شوید و در فیلد URL، آدرسی که سرور شما در آن اجرا می‌شود را وارد کنید، مثلاً http:localhost:4321/sse. حالا روی دکمه "Connect" کلیک کنید. مانند قبل، گزینه لیست ابزارها را انتخاب کنید، یک ابزار را انتخاب کنید و مقادیر ورودی را وارد کنید. باید نتیجه‌ای مشابه تصویر زیر ببینید:

![SSE Server running in inspector](../../../../translated_images/sse-inspector.d86628cc597b8fae807a31d3d6837842f5f9ee1bcc6101013fa0c709c96029ad.fa.png)

عالی است، شما می‌توانید با Inspector کار کنید، بیایید ببینیم چگونه می‌توانیم با Visual Studio Code کار کنیم.

## وظیفه

سعی کنید سرور خود را با قابلیت‌های بیشتری توسعه دهید. برای مثال، به [این صفحه](https://api.chucknorris.io/) مراجعه کنید تا ابزاری اضافه کنید که یک API را فراخوانی کند. تصمیم با شماست که سرور چگونه باشد. خوش بگذرد :)

## راه‌حل

[راه‌حل](./solution/README.md) اینجا یک راه‌حل ممکن با کد عملی است.

## نکات کلیدی

نکات مهم این فصل عبارتند از:

- SSE دومین نوع انتقال پشتیبانی شده پس از stdio است.
- برای پشتیبانی از SSE، باید اتصال‌ها و پیام‌های ورودی را با استفاده از یک فریم‌ورک وب مدیریت کنید.
- می‌توانید از هر دو ابزار Inspector و Visual Studio Code برای مصرف سرور SSE استفاده کنید، درست مانند سرورهای stdio. توجه کنید که تفاوت‌هایی بین stdio و SSE وجود دارد. برای SSE باید سرور را جداگانه راه‌اندازی کنید و سپس ابزار Inspector را اجرا کنید. برای ابزار Inspector، تفاوت‌هایی هم وجود دارد که باید URL را مشخص کنید.

## نمونه‌ها

- [ماشین حساب جاوا](../samples/java/calculator/README.md)
- [ماشین حساب دات‌نت](../../../../03-GettingStarted/samples/csharp)
- [ماشین حساب جاوااسکریپت](../samples/javascript/README.md)
- [ماشین حساب تایپ‌اسکریپت](../samples/typescript/README.md)
- [ماشین حساب پایتون](../../../../03-GettingStarted/samples/python)

## منابع اضافی

- [SSE](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events)

## مرحله بعد

- مرحله بعد: [پخش HTTP با MCP (HTTP قابل پخش)](/03-GettingStarted/06-http-streaming/README.md)

**سلب مسئولیت**:  
این سند با استفاده از سرویس ترجمه ماشینی هوش مصنوعی [Co-op Translator](https://github.com/Azure/co-op-translator) ترجمه شده است. در حالی که ما در تلاش برای دقت هستیم، لطفاً توجه داشته باشید که ترجمه‌های خودکار ممکن است شامل خطاها یا نادرستی‌هایی باشند. سند اصلی به زبان بومی خود باید به عنوان منبع معتبر در نظر گرفته شود. برای اطلاعات حیاتی، توصیه می‌شود از ترجمه حرفه‌ای انسانی استفاده شود. ما مسئول هیچ گونه سوتفاهم یا برداشت نادرست ناشی از استفاده از این ترجمه نیستیم.