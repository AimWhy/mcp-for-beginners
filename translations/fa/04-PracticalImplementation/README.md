<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "0e1385a3fadf16bacd2f863757bcf5e0",
  "translation_date": "2025-05-17T13:42:24+00:00",
  "source_file": "04-PracticalImplementation/README.md",
  "language_code": "fa"
}
-->
# پیاده‌سازی عملی

پیاده‌سازی عملی جایی است که قدرت پروتکل مدل کانتکست (MCP) به صورت ملموس نمایان می‌شود. در حالی که درک نظریه و معماری پشت MCP مهم است، ارزش واقعی زمانی آشکار می‌شود که این مفاهیم را برای ساخت، آزمایش و پیاده‌سازی راه‌حل‌هایی که مشکلات دنیای واقعی را حل می‌کنند، به کار بگیرید. این فصل پل ارتباطی بین دانش مفهومی و توسعه عملی است و شما را در فرایند به واقعیت درآوردن برنامه‌های مبتنی بر MCP راهنمایی می‌کند.

چه در حال توسعه دستیارهای هوشمند باشید، چه در حال ادغام هوش مصنوعی در جریان‌های کاری تجاری یا ساخت ابزارهای سفارشی برای پردازش داده‌ها، MCP یک پایه انعطاف‌پذیر ارائه می‌دهد. طراحی زبان‌محور و SDKهای رسمی برای زبان‌های برنامه‌نویسی محبوب، آن را برای طیف گسترده‌ای از توسعه‌دهندگان در دسترس قرار می‌دهد. با بهره‌گیری از این SDKها، می‌توانید به سرعت نمونه‌سازی کنید، تکرار کنید و راه‌حل‌های خود را در پلتفرم‌ها و محیط‌های مختلف مقیاس‌بندی کنید.

در بخش‌های بعدی، نمونه‌های عملی، کد نمونه و استراتژی‌های استقرار را خواهید یافت که نشان می‌دهد چگونه MCP را در C#، جاوا، تایپ‌اسکریپت، جاوااسکریپت و پایتون پیاده‌سازی کنید. همچنین یاد خواهید گرفت که چگونه سرورهای MCP خود را اشکال‌زدایی و آزمایش کنید، APIها را مدیریت کنید و راه‌حل‌ها را با استفاده از Azure به فضای ابری استقرار دهید. این منابع عملی برای تسریع یادگیری شما طراحی شده‌اند و به شما کمک می‌کنند با اطمینان برنامه‌های MCP قدرتمند و آماده تولید بسازید.

## مرور کلی

این درس بر جنبه‌های عملی پیاده‌سازی MCP در چندین زبان برنامه‌نویسی تمرکز دارد. ما بررسی خواهیم کرد که چگونه از SDKهای MCP در C#، جاوا، تایپ‌اسکریپت، جاوااسکریپت و پایتون برای ساخت برنامه‌های قوی، اشکال‌زدایی و آزمایش سرورهای MCP و ایجاد منابع، پیام‌های آماده و ابزارهای قابل استفاده مجدد استفاده کنیم.

## اهداف یادگیری

تا پایان این درس، شما قادر خواهید بود:
- راه‌حل‌های MCP را با استفاده از SDKهای رسمی در زبان‌های برنامه‌نویسی مختلف پیاده‌سازی کنید
- سرورهای MCP را به صورت سیستماتیک اشکال‌زدایی و آزمایش کنید
- ویژگی‌های سرور (منابع، پیام‌های آماده و ابزارها) را ایجاد و استفاده کنید
- جریان‌های کاری موثر MCP را برای وظایف پیچیده طراحی کنید
- پیاده‌سازی‌های MCP را برای عملکرد و قابلیت اطمینان بهینه‌سازی کنید

## منابع رسمی SDK

پروتکل مدل کانتکست SDKهای رسمی برای زبان‌های مختلف ارائه می‌دهد:

- [C# SDK](https://github.com/modelcontextprotocol/csharp-sdk)
- [Java SDK](https://github.com/modelcontextprotocol/java-sdk)
- [TypeScript SDK](https://github.com/modelcontextprotocol/typescript-sdk)
- [Python SDK](https://github.com/modelcontextprotocol/python-sdk)
- [Kotlin SDK](https://github.com/modelcontextprotocol/kotlin-sdk)

## کار با SDKهای MCP

این بخش نمونه‌های عملی از پیاده‌سازی MCP در چندین زبان برنامه‌نویسی را ارائه می‌دهد. می‌توانید کد نمونه را در دایرکتوری `samples` پیدا کنید که بر اساس زبان سازماندهی شده است.

### نمونه‌های موجود

مخزن شامل پیاده‌سازی‌های نمونه در زبان‌های زیر است:

- C#
- Java
- TypeScript
- JavaScript
- Python

هر نمونه مفاهیم کلیدی MCP و الگوهای پیاده‌سازی برای آن زبان و اکوسیستم خاص را نشان می‌دهد.

## ویژگی‌های اصلی سرور

سرورهای MCP می‌توانند هر ترکیبی از این ویژگی‌ها را پیاده‌سازی کنند:

### منابع
منابع، زمینه و داده‌هایی را برای کاربر یا مدل هوش مصنوعی فراهم می‌کنند:
- مخازن اسناد
- پایگاه‌های دانش
- منابع داده ساختار یافته
- سیستم‌های فایل

### پیام‌های آماده
پیام‌های آماده، پیام‌ها و جریان‌های کاری قالب‌بندی شده برای کاربران هستند:
- الگوهای مکالمه پیش‌تعریف‌شده
- الگوهای تعامل هدایت‌شده
- ساختارهای مکالمه تخصصی

### ابزارها
ابزارها، عملکردهایی برای اجرای مدل هوش مصنوعی هستند:
- ابزارهای پردازش داده
- ادغام‌های API خارجی
- قابلیت‌های محاسباتی
- قابلیت جستجو

## پیاده‌سازی‌های نمونه: C#

مخزن رسمی SDK C# شامل چندین پیاده‌سازی نمونه است که جنبه‌های مختلف MCP را نشان می‌دهد:

- **کلاینت MCP ساده**: مثال ساده‌ای که نشان می‌دهد چگونه یک کلاینت MCP ایجاد کرده و ابزارها را فراخوانی کنید
- **سرور MCP ساده**: پیاده‌سازی سرور حداقلی با ثبت ابزارهای پایه
- **سرور MCP پیشرفته**: سرور کامل با ثبت ابزار، احراز هویت و مدیریت خطا
- **ادغام ASP.NET**: مثال‌هایی که ادغام با ASP.NET Core را نشان می‌دهد
- **الگوهای پیاده‌سازی ابزار**: الگوهای مختلف برای پیاده‌سازی ابزارها با سطوح پیچیدگی متفاوت

SDK C# MCP در حالت پیش‌نمایش است و APIها ممکن است تغییر کنند. ما به‌طور مداوم این بلاگ را با تکامل SDK به‌روزرسانی خواهیم کرد.

### ویژگی‌های کلیدی
- [C# MCP Nuget ModelContextProtocol](https://www.nuget.org/packages/ModelContextProtocol)

- ساخت [اولین سرور MCP خود](https://devblogs.microsoft.com/dotnet/build-a-model-context-protocol-mcp-server-in-csharp/).

برای نمونه‌های کامل پیاده‌سازی C#، به [مخزن نمونه‌های رسمی SDK C#](https://github.com/modelcontextprotocol/csharp-sdk) مراجعه کنید.

## پیاده‌سازی نمونه: پیاده‌سازی جاوا

SDK جاوا گزینه‌های پیاده‌سازی قوی MCP با ویژگی‌های درجه سازمانی ارائه می‌دهد.

### ویژگی‌های کلیدی

- ادغام با فریم‌ورک Spring
- ایمنی نوع قوی
- پشتیبانی از برنامه‌نویسی واکنشی
- مدیریت خطای جامع

برای نمونه پیاده‌سازی کامل جاوا، به [MCPSample.java](../../../04-PracticalImplementation/samples/java/MCPSample.java) در دایرکتوری نمونه‌ها مراجعه کنید.

## پیاده‌سازی نمونه: پیاده‌سازی جاوااسکریپت

SDK جاوااسکریپت رویکردی سبک و انعطاف‌پذیر برای پیاده‌سازی MCP ارائه می‌دهد.

### ویژگی‌های کلیدی

- پشتیبانی از Node.js و مرورگر
- API مبتنی بر Promise
- ادغام آسان با Express و فریم‌ورک‌های دیگر
- پشتیبانی از WebSocket برای استریم

برای نمونه پیاده‌سازی کامل جاوااسکریپت، به [mcp_sample.js](../../../04-PracticalImplementation/samples/javascript/mcp_sample.js) در دایرکتوری نمونه‌ها مراجعه کنید.

## پیاده‌سازی نمونه: پیاده‌سازی پایتون

SDK پایتون رویکردی پایتونی برای پیاده‌سازی MCP با ادغام‌های عالی فریم‌ورک‌های یادگیری ماشین ارائه می‌دهد.

### ویژگی‌های کلیدی

- پشتیبانی از Async/await با asyncio
- ادغام با Flask و FastAPI
- ثبت ابزار ساده
- ادغام بومی با کتابخانه‌های محبوب یادگیری ماشین

برای نمونه پیاده‌سازی کامل پایتون، به [mcp_sample.py](../../../04-PracticalImplementation/samples/python/mcp_sample.py) در دایرکتوری نمونه‌ها مراجعه کنید.

## مدیریت API

مدیریت API Azure پاسخی عالی برای چگونگی امن‌سازی سرورهای MCP است. ایده این است که یک نمونه مدیریت API Azure را در جلوی سرور MCP خود قرار دهید و اجازه دهید ویژگی‌هایی را که احتمالاً می‌خواهید مانند:

- محدودیت نرخ
- مدیریت توکن
- نظارت
- توازن بار
- امنیت

### نمونه Azure

در اینجا یک نمونه Azure که دقیقاً همین کار را انجام می‌دهد، یعنی [ایجاد یک سرور MCP و امن‌سازی آن با مدیریت API Azure](https://github.com/Azure-Samples/remote-mcp-apim-functions-python).

ببینید چگونه جریان احراز هویت در تصویر زیر انجام می‌شود:

![APIM-MCP](https://github.com/Azure-Samples/remote-mcp-apim-functions-python/blob/main/mcp-client-authorization.gif?raw=true)

در تصویر فوق، موارد زیر انجام می‌شود:

- احراز هویت/مجوز با استفاده از Microsoft Entra انجام می‌شود.
- مدیریت API Azure به عنوان یک دروازه عمل می‌کند و از سیاست‌ها برای هدایت و مدیریت ترافیک استفاده می‌کند.
- Azure Monitor تمام درخواست‌ها را برای تجزیه و تحلیل بیشتر ثبت می‌کند.

#### جریان مجوز

بیایید نگاهی دقیق‌تر به جریان مجوز بیندازیم:

![نمودار توالی](https://github.com/Azure-Samples/remote-mcp-apim-functions-python/blob/main/infra/app/apim-oauth/diagrams/images/mcp-client-auth.png?raw=true)

#### مشخصات مجوز MCP

بیشتر در مورد [مشخصات مجوز MCP](https://modelcontextprotocol.io/specification/2025-03-26/basic/authorization#2-10-third-party-authorization-flow) بیاموزید.

## استقرار سرور MCP از راه دور به Azure

بیایید ببینیم آیا می‌توانیم نمونه‌ای که قبلاً ذکر کردیم را مستقر کنیم:

1. مخزن را کلون کنید

    ```bash
    git clone https://github.com/Azure-Samples/remote-mcp-apim-functions-python.git
    cd remote-mcp-apim-functions-python
    ```

1. `Microsoft.App` resource provider.
    * If you are using Azure CLI, run `az provider register --namespace Microsoft.App --wait`.
    * If you are using Azure PowerShell, run `Register-AzResourceProvider -ProviderNamespace Microsoft.App`. Then run `(Get-AzResourceProvider -ProviderNamespace Microsoft.App).RegistrationState` را پس از مدتی اجرا کنید تا بررسی کنید که آیا ثبت کامل شده است.

2. این فرمان [azd](https://aka.ms/azd) را اجرا کنید تا سرویس مدیریت API، برنامه تابع (با کد) و سایر منابع مورد نیاز Azure را فراهم کنید

    ```shell
    azd up
    ```

    این دستورات باید همه منابع ابری را در Azure مستقر کنند.

### آزمایش سرور شما با MCP Inspector

1. در یک **پنجره ترمینال جدید**، MCP Inspector را نصب و اجرا کنید

    ```shell
    npx @modelcontextprotocol/inspector
    ```

    باید یک رابط مشابه زیر را ببینید:

    ![اتصال به بازرس Node](../../../translated_images/connect.126df3a6deef0d2e0850b1a5cf0547c8fc4e2e9e0b354238d0a9dbe7893726fa.fa.png)

1. با کلیک بر روی URL نمایش داده شده توسط برنامه (مثلاً http://127.0.0.1:6274/#resources) برنامه وب MCP Inspector را بارگیری کنید.
1. نوع انتقال را به `SSE`
1. Set the URL to your running API Management SSE endpoint displayed after `azd up` تنظیم کنید و **اتصال** برقرار کنید:

    ```shell
    https://<apim-servicename-from-azd-output>.azure-api.net/mcp/sse
    ```

5. **فهرست ابزارها**. روی یک ابزار کلیک کنید و **ابزار را اجرا کنید**.

اگر همه مراحل کار کرده باشد، اکنون باید به سرور MCP متصل شده باشید و بتوانید یک ابزار را فراخوانی کنید.

## سرورهای MCP برای Azure

[توابع از راه دور MCP](https://github.com/Azure-Samples/remote-mcp-functions-dotnet): این مجموعه مخازن یک الگوی شروع سریع برای ساخت و استقرار سرورهای سفارشی MCP (پروتکل مدل کانتکست) از راه دور با استفاده از توابع Azure با پایتون، C# .NET یا Node/TypeScript است.

نمونه‌ها یک راه‌حل کامل ارائه می‌دهند که به توسعه‌دهندگان اجازه می‌دهد:

- ساخت و اجرا محلی: توسعه و اشکال‌زدایی یک سرور MCP بر روی یک ماشین محلی
- استقرار در Azure: به راحتی با یک فرمان ساده azd up به فضای ابری استقرار دهید
- اتصال از کلاینت‌ها: اتصال به سرور MCP از کلاینت‌های مختلف از جمله حالت عامل Copilot در VS Code و ابزار MCP Inspector

### ویژگی‌های کلیدی:

- امنیت به صورت طراحی شده: سرور MCP با استفاده از کلیدها و HTTPS امن شده است
- گزینه‌های احراز هویت: پشتیبانی از OAuth با استفاده از احراز هویت داخلی و/یا مدیریت API
- جداسازی شبکه: امکان جداسازی شبکه با استفاده از شبکه‌های مجازی Azure (VNET)
- معماری بدون سرور: استفاده از توابع Azure برای اجرای مقیاس‌پذیر و رویدادمحور
- توسعه محلی: پشتیبانی جامع از توسعه و اشکال‌زدایی محلی
- استقرار ساده: فرایند استقرار ساده به Azure

مخزن شامل تمام فایل‌های پیکربندی لازم، کد منبع و تعاریف زیرساخت برای شروع سریع با پیاده‌سازی سرور MCP آماده تولید است.

- [توابع از راه دور MCP Azure پایتون](https://github.com/Azure-Samples/remote-mcp-functions-python) - پیاده‌سازی نمونه MCP با استفاده از توابع Azure با پایتون

- [توابع از راه دور MCP Azure .NET](https://github.com/Azure-Samples/remote-mcp-functions-dotnet) - پیاده‌سازی نمونه MCP با استفاده از توابع Azure با C# .NET

- [توابع از راه دور MCP Azure Node/Typescript](https://github.com/Azure-Samples/remote-mcp-functions-typescript) - پیاده‌سازی نمونه MCP با استفاده از توابع Azure با Node/TypeScript.

## نکات کلیدی

- SDKهای MCP ابزارهای خاص زبان برای پیاده‌سازی راه‌حل‌های قوی MCP ارائه می‌دهند
- فرایند اشکال‌زدایی و آزمایش برای برنامه‌های MCP قابل اعتماد حیاتی است
- الگوهای پیام آماده قابل استفاده مجدد تعاملات AI مداوم را ممکن می‌سازند
- جریان‌های کاری طراحی شده به خوبی می‌توانند وظایف پیچیده را با استفاده از ابزارهای متعدد هماهنگ کنند
- پیاده‌سازی راه‌حل‌های MCP نیاز به توجه به امنیت، عملکرد و مدیریت خطا دارد

## تمرین

یک جریان کاری عملی MCP طراحی کنید که یک مشکل دنیای واقعی در حوزه شما را حل کند:

1. 3-4 ابزاری که برای حل این مشکل مفید خواهند بود را شناسایی کنید
2. یک نمودار جریان کاری ایجاد کنید که نشان دهد چگونه این ابزارها با هم تعامل دارند
3. یک نسخه پایه از یکی از ابزارها را با استفاده از زبان مورد علاقه خود پیاده‌سازی کنید
4. یک الگوی پیام آماده ایجاد کنید که به مدل کمک کند به طور موثری از ابزار شما استفاده کند

## منابع اضافی

---

بعدی: [موضوعات پیشرفته](../05-AdvancedTopics/README.md)

**سلب مسئولیت**:  
این سند با استفاده از سرویس ترجمه هوش مصنوعی [Co-op Translator](https://github.com/Azure/co-op-translator) ترجمه شده است. در حالی که ما برای دقت تلاش می‌کنیم، لطفاً توجه داشته باشید که ترجمه‌های خودکار ممکن است حاوی خطاها یا نادرستی‌ها باشند. سند اصلی به زبان اصلی آن باید به عنوان منبع معتبر در نظر گرفته شود. برای اطلاعات حیاتی، ترجمه حرفه‌ای انسانی توصیه می‌شود. ما مسئولیتی در قبال سوء تفاهم یا تفسیرهای نادرست ناشی از استفاده از این ترجمه نداریم.