<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "382fddb4ee4d9c1bdc806e2ee99b70c8",
  "translation_date": "2025-07-17T05:51:29+00:00",
  "source_file": "02-Security/README.md",
  "language_code": "el"
}
-->
# Καλύτερες Πρακτικές Ασφαλείας

Η υιοθέτηση του Model Context Protocol (MCP) φέρνει ισχυρές νέες δυνατότητες στις εφαρμογές που βασίζονται σε AI, αλλά εισάγει και μοναδικές προκλήσεις ασφαλείας που ξεπερνούν τους παραδοσιακούς κινδύνους λογισμικού. Εκτός από τα καθιερωμένα ζητήματα όπως ο ασφαλής κώδικας, η αρχή της ελάχιστης προνομιακής πρόσβασης και η ασφάλεια της αλυσίδας εφοδιασμού, το MCP και τα φορτία εργασίας AI αντιμετωπίζουν νέες απειλές όπως η ένεση prompt, η δηλητηρίαση εργαλείων, η δυναμική τροποποίηση εργαλείων, η κατάληψη συνεδρίας, οι επιθέσεις confused deputy και οι ευπάθειες token passthrough. Αυτοί οι κίνδυνοι μπορεί να οδηγήσουν σε εξαγωγή δεδομένων, παραβιάσεις απορρήτου και ανεπιθύμητη συμπεριφορά συστήματος αν δεν διαχειριστούν σωστά.

Αυτό το μάθημα εξερευνά τους πιο σχετικούς κινδύνους ασφαλείας που σχετίζονται με το MCP — συμπεριλαμβανομένης της αυθεντικοποίησης, της εξουσιοδότησης, των υπερβολικών δικαιωμάτων, της έμμεσης ένεσης prompt, της ασφάλειας συνεδρίας, των προβλημάτων confused deputy, των ευπαθειών token passthrough και των ευπαθειών στην αλυσίδα εφοδιασμού — και παρέχει πρακτικούς ελέγχους και βέλτιστες πρακτικές για την αντιμετώπισή τους. Θα μάθετε επίσης πώς να αξιοποιείτε λύσεις της Microsoft όπως τα Prompt Shields, το Azure Content Safety και το GitHub Advanced Security για να ενισχύσετε την υλοποίηση MCP σας. Κατανοώντας και εφαρμόζοντας αυτούς τους ελέγχους, μπορείτε να μειώσετε σημαντικά την πιθανότητα παραβίασης ασφαλείας και να διασφαλίσετε ότι τα συστήματα AI σας παραμένουν ανθεκτικά και αξιόπιστα.

# Στόχοι Μάθησης

Στο τέλος αυτού του μαθήματος, θα μπορείτε να:

- Αναγνωρίζετε και να εξηγείτε τους μοναδικούς κινδύνους ασφαλείας που εισάγει το Model Context Protocol (MCP), όπως η ένεση prompt, η δηλητηρίαση εργαλείων, τα υπερβολικά δικαιώματα, η κατάληψη συνεδρίας, τα προβλήματα confused deputy, οι ευπάθειες token passthrough και οι ευπάθειες στην αλυσίδα εφοδιασμού.
- Περιγράφετε και εφαρμόζετε αποτελεσματικούς ελέγχους μετριασμού για τους κινδύνους ασφαλείας του MCP, όπως η ισχυρή αυθεντικοποίηση, η αρχή της ελάχιστης προνομιακής πρόσβασης, η ασφαλής διαχείριση token, οι έλεγχοι ασφάλειας συνεδρίας και η επαλήθευση της αλυσίδας εφοδιασμού.
- Κατανοείτε και αξιοποιείτε λύσεις της Microsoft όπως τα Prompt Shields, το Azure Content Safety και το GitHub Advanced Security για την προστασία των φορτίων εργασίας MCP και AI.
- Αναγνωρίζετε τη σημασία της επικύρωσης των μεταδεδομένων εργαλείων, της παρακολούθησης για δυναμικές αλλαγές, της άμυνας κατά των έμμεσων επιθέσεων ένεσης prompt και της πρόληψης της κατάληψης συνεδρίας.
- Ενσωματώνετε καθιερωμένες βέλτιστες πρακτικές ασφαλείας — όπως ο ασφαλής κώδικας, η ενίσχυση διακομιστών και η αρχιτεκτονική μηδενικής εμπιστοσύνης — στην υλοποίηση MCP σας για να μειώσετε την πιθανότητα και τον αντίκτυπο παραβιάσεων ασφαλείας.

# Έλεγχοι ασφαλείας MCP

Οποιοδήποτε σύστημα έχει πρόσβαση σε σημαντικούς πόρους αντιμετωπίζει εγγενείς προκλήσεις ασφαλείας. Οι προκλήσεις ασφαλείας μπορούν γενικά να αντιμετωπιστούν μέσω της σωστής εφαρμογής βασικών ελέγχων και εννοιών ασφαλείας. Καθώς το MCP είναι πρόσφατα ορισμένο, η προδιαγραφή αλλάζει πολύ γρήγορα και εξελίσσεται. Τελικά, οι έλεγχοι ασφαλείας μέσα σε αυτό θα ωριμάσουν, επιτρέποντας καλύτερη ενσωμάτωση με επιχειρησιακές και καθιερωμένες αρχιτεκτονικές ασφαλείας και βέλτιστες πρακτικές.

Έρευνα που δημοσιεύτηκε στην [Microsoft Digital Defense Report](https://aka.ms/mddr) αναφέρει ότι το 98% των αναφερόμενων παραβιάσεων θα μπορούσαν να είχαν αποτραπεί με αυστηρή υγιεινή ασφαλείας και η καλύτερη προστασία ενάντια σε οποιαδήποτε παραβίαση είναι να διασφαλίσετε τη βασική υγιεινή ασφαλείας, τις βέλτιστες πρακτικές ασφαλούς κώδικα και την ασφάλεια της αλυσίδας εφοδιασμού — αυτές οι δοκιμασμένες πρακτικές που ήδη γνωρίζουμε εξακολουθούν να έχουν τη μεγαλύτερη επίδραση στη μείωση του κινδύνου ασφαλείας.

Ας δούμε μερικούς από τους τρόπους με τους οποίους μπορείτε να αρχίσετε να αντιμετωπίζετε τους κινδύνους ασφαλείας κατά την υιοθέτηση του MCP.

> **Note:** Οι παρακάτω πληροφορίες είναι σωστές μέχρι τις **29 Μαΐου 2025**. Το πρωτόκολλο MCP εξελίσσεται συνεχώς και μελλοντικές υλοποιήσεις μπορεί να εισάγουν νέα πρότυπα αυθεντικοποίησης και ελέγχους. Για τις πιο πρόσφατες ενημερώσεις και οδηγίες, ανατρέξτε πάντα στην [MCP Specification](https://spec.modelcontextprotocol.io/) και στο επίσημο [MCP GitHub repository](https://github.com/modelcontextprotocol) και στη [σελίδα βέλτιστων πρακτικών ασφαλείας](https://modelcontextprotocol.io/specification/draft/basic/security_best_practices).

### Δήλωση προβλήματος  
Η αρχική προδιαγραφή MCP προέβλεπε ότι οι προγραμματιστές θα έγραφαν τον δικό τους διακομιστή αυθεντικοποίησης. Αυτό απαιτούσε γνώση του OAuth και σχετικών περιορισμών ασφαλείας. Οι MCP servers λειτουργούσαν ως OAuth 2.0 Authorization Servers, διαχειριζόμενοι απευθείας την απαιτούμενη αυθεντικοποίηση χρήστη αντί να την αναθέτουν σε εξωτερική υπηρεσία όπως το Microsoft Entra ID. Από τις **26 Απριλίου 2025**, μια ενημέρωση στην προδιαγραφή MCP επιτρέπει στους MCP servers να αναθέτουν την αυθεντικοποίηση χρηστών σε εξωτερική υπηρεσία.

### Κίνδυνοι
- Λανθασμένη διαμόρφωση της λογικής εξουσιοδότησης στον MCP server μπορεί να οδηγήσει σε έκθεση ευαίσθητων δεδομένων και σε εσφαλμένη εφαρμογή ελέγχων πρόσβασης.
- Κλοπή OAuth token στον τοπικό MCP server. Αν κλαπεί, το token μπορεί να χρησιμοποιηθεί για να μιμηθεί τον MCP server και να αποκτήσει πρόσβαση σε πόρους και δεδομένα της υπηρεσίας για την οποία προορίζεται το OAuth token.

#### Token Passthrough  
Το token passthrough απαγορεύεται ρητά στην προδιαγραφή εξουσιοδότησης καθώς εισάγει πολλούς κινδύνους ασφαλείας, που περιλαμβάνουν:

#### Παράκαμψη Ελέγχων Ασφαλείας  
Ο MCP Server ή τα downstream APIs μπορεί να εφαρμόζουν σημαντικούς ελέγχους ασφαλείας όπως περιορισμό ρυθμού, επικύρωση αιτήσεων ή παρακολούθηση κίνησης, που εξαρτώνται από το κοινό-στόχο του token ή άλλους περιορισμούς διαπιστευτηρίων. Αν οι πελάτες μπορούν να αποκτήσουν και να χρησιμοποιήσουν tokens απευθείας με τα downstream APIs χωρίς ο MCP server να τα επικυρώνει σωστά ή να διασφαλίζει ότι τα tokens εκδόθηκαν για τη σωστή υπηρεσία, παρακάμπτουν αυτούς τους ελέγχους.

#### Ζητήματα Υπευθυνότητας και Αρχείου Ελέγχου  
Ο MCP Server δεν θα μπορεί να αναγνωρίσει ή να διακρίνει μεταξύ των MCP Clients όταν οι πελάτες καλούν με access token που εκδόθηκε upstream και μπορεί να είναι αδιαφανές για τον MCP Server.  
Τα αρχεία καταγραφής του downstream Resource Server μπορεί να εμφανίζουν αιτήσεις που φαίνεται να προέρχονται από διαφορετική πηγή με διαφορετική ταυτότητα, αντί από τον MCP server που προωθεί τα tokens.  
Και οι δύο παράγοντες δυσκολεύουν την έρευνα περιστατικών, τους ελέγχους και την επιθεώρηση.  
Αν ο MCP Server προωθεί tokens χωρίς να επικυρώνει τις αξιώσεις τους (π.χ. ρόλους, προνόμια ή κοινό-στόχο) ή άλλα μεταδεδομένα, ένας κακόβουλος χρήστης που κατέχει κλεμμένο token μπορεί να χρησιμοποιήσει τον server ως proxy για εξαγωγή δεδομένων.

#### Ζητήματα Ορίου Εμπιστοσύνης  
Ο downstream Resource Server παρέχει εμπιστοσύνη σε συγκεκριμένες οντότητες. Αυτή η εμπιστοσύνη μπορεί να περιλαμβάνει υποθέσεις για την προέλευση ή τα πρότυπα συμπεριφοράς του πελάτη. Η παραβίαση αυτού του ορίου εμπιστοσύνης μπορεί να οδηγήσει σε απρόβλεπτα προβλήματα.  
Αν το token γίνει αποδεκτό από πολλές υπηρεσίες χωρίς σωστή επικύρωση, ένας επιτιθέμενος που παραβιάζει μία υπηρεσία μπορεί να χρησιμοποιήσει το token για να αποκτήσει πρόσβαση σε άλλες συνδεδεμένες υπηρεσίες.

#### Κίνδυνος Συμβατότητας στο Μέλλον  
Ακόμα κι αν ένας MCP Server ξεκινήσει σήμερα ως "καθαρός proxy", μπορεί να χρειαστεί να προσθέσει ελέγχους ασφαλείας αργότερα. Ξεκινώντας με σωστό διαχωρισμό του κοινού-στόχου του token, διευκολύνεται η εξέλιξη του μοντέλου ασφαλείας.

### Ελέγχοι μετριασμού

**Οι MCP servers ΔΕΝ ΠΡΕΠΕΙ να αποδέχονται tokens που δεν έχουν εκδοθεί ρητά για τον MCP server**

- **Επανεξέταση και Ενίσχυση της Λογικής Εξουσιοδότησης:** Ελέγξτε προσεκτικά την υλοποίηση εξουσιοδότησης του MCP server σας για να διασφαλίσετε ότι μόνο οι προοριζόμενοι χρήστες και πελάτες έχουν πρόσβαση σε ευαίσθητους πόρους. Για πρακτικές οδηγίες, δείτε [Azure API Management Your Auth Gateway For MCP Servers | Microsoft Community Hub](https://techcommunity.microsoft.com/blog/integrationsonazureblog/azure-api-management-your-auth-gateway-for-mcp-servers/4402690) και [Using Microsoft Entra ID To Authenticate With MCP Servers Via Sessions - Den Delimarsky](https://den.dev/blog/mcp-server-auth-entra-id-session/).
- **Επιβολή Ασφαλών Πρακτικών Token:** Ακολουθήστε τις [βέλτιστες πρακτικές της Microsoft για επικύρωση και διάρκεια ζωής token](https://learn.microsoft.com/en-us/entra/identity-platform/access-tokens) για να αποτρέψετε την κακή χρήση των access tokens και να μειώσετε τον κίνδυνο επανάληψης ή κλοπής token.
- **Προστασία Αποθήκευσης Token:** Αποθηκεύετε πάντα τα tokens με ασφάλεια και χρησιμοποιείτε κρυπτογράφηση για την προστασία τους σε κατάσταση ηρεμίας και κατά τη μεταφορά. Για συμβουλές υλοποίησης, δείτε [Use secure token storage and encrypt tokens](https://youtu.be/uRdX37EcCwg?si=6fSChs1G4glwXRy2).

# Υπερβολικά δικαιώματα για MCP servers

### Δήλωση προβλήματος  
Οι MCP servers μπορεί να έχουν λάβει υπερβολικά δικαιώματα στην υπηρεσία/πόρο που προσπελαύνουν. Για παράδειγμα, ένας MCP server που αποτελεί μέρος μιας εφαρμογής πωλήσεων AI που συνδέεται με μια επιχειρησιακή αποθήκη δεδομένων θα πρέπει να έχει πρόσβαση περιορισμένη στα δεδομένα πωλήσεων και όχι να επιτρέπεται η πρόσβαση σε όλα τα αρχεία της αποθήκης. Αναφερόμενοι στην αρχή της ελάχιστης προνομιακής πρόσβασης (μία από τις παλαιότερες αρχές ασφαλείας), κανένας πόρος δεν πρέπει να έχει δικαιώματα πέραν αυτών που απαιτούνται για την εκτέλεση των εργασιών για τις οποίες προορίζεται. Η AI παρουσιάζει αυξημένη πρόκληση σε αυτόν τον τομέα, καθώς για να είναι ευέλικτη, μπορεί να είναι δύσκολο να οριστούν ακριβώς τα απαιτούμενα δικαιώματα.

### Κίνδυνοι  
- Η παροχή υπερβολικών δικαιωμάτων μπορεί να επιτρέψει την εξαγωγή ή την τροποποίηση δεδομένων που ο MCP server δεν προοριζόταν να έχει πρόσβαση. Αυτό μπορεί επίσης να αποτελέσει ζήτημα απορρήτου αν τα δεδομένα είναι προσωπικά αναγνωρίσιμες πληροφορίες (PII).

### Ελέγχοι μετριασμού  
- **Εφαρμογή της Αρχής της Ελάχιστης Προνομιακής Πρόσβασης:** Χορηγήστε στον MCP server μόνο τα ελάχιστα δικαιώματα που απαιτούνται για την εκτέλεση των εργασιών του. Επανεξετάζετε και ενημερώνετε τα δικαιώματα τακτικά για να διασφαλίσετε ότι δεν υπερβαίνουν τα απαραίτητα. Για λεπτομερείς οδηγίες, δείτε [Secure least-privileged access](https://learn.microsoft.com/entra/identity-platform/secure-least-privileged-access).
- **Χρήση Ελέγχου Πρόσβασης με Βάση Ρόλων (RBAC):** Αναθέστε ρόλους στον MCP server που είναι αυστηρά περιορισμένοι σε συγκεκριμένους πόρους και ενέργειες, αποφεύγοντας ευρείες ή περιττές άδειες.
- **Παρακολούθηση και Έλεγχος Δικαιωμάτων:** Παρακολουθείτε συνεχώς τη χρήση δικαιωμάτων και ελέγχετε τα αρχεία πρόσβασης για να εντοπίζετε και να διορθώνετε υπερβολικά ή αχρησιμοποίητα προνόμια άμεσα.

# Επιθέσεις έμμεσης ένεσης prompt

### Δήλωση προβλήματος

Κακόβουλοι ή παραβιασμένοι MCP servers μπορούν να εισάγουν σημαντικούς κινδύνους εκθέτοντας δεδομένα πελατών ή επιτρέποντας ανεπιθύμητες ενέργειες. Αυτοί οι κίνδυνοι είναι ιδιαίτερα σημαντικοί σε φορτία εργασίας AI και MCP, όπου:

- **Επιθέσεις Ένεσης Prompt:** Οι επιτιθέμενοι ενσωματώνουν κακόβουλες οδηγίες σε prompts ή εξωτερικό περιεχόμενο, προκαλώντας το σύστημα AI να εκτελέσει ανεπιθύμητες ενέργειες ή να διαρρεύσει ευαίσθητα δεδομένα. Μάθετε περισσότερα: [Prompt Injection](https://simonwillison.net/2025/Apr/9/mcp-prompt-injection/)
- **Δηλητηρίαση Εργαλείων:** Οι επιτιθέμενοι χειραγωγούν τα μεταδεδομένα εργαλείων (όπως περιγραφές ή παραμέτρους) για να επηρεάσουν τη συμπεριφορά της AI, πιθανώς παρακάμπτοντας ελέγχους ασφαλείας ή εξάγοντας δεδομένα. Λεπτομέρειες: [Tool Poisoning](https://invariantlabs.ai/blog/mcp-security-notification-tool-poisoning-attacks)
- **Ένεση Prompt Διατομεακά:** Κακόβουλες οδηγίες ενσωματώνονται σε έγγραφα, ιστοσελίδες ή email, τα οποία επεξεργάζεται η AI, οδηγώντας σε διαρροή ή παραποίηση δεδομένων.
- **Δυναμική Τροποποίηση Εργαλείων (Rug Pulls):** Οι ορισμοί εργαλείων μπορούν να αλλάξουν μετά την έγκριση χρήστη, εισάγοντας νέες κακόβουλες συμπεριφορές χωρίς να το γνωρίζει ο χρήστης.

Αυτές οι ευπάθειες υπογραμμίζουν την ανάγκη για αυστηρή επικύρωση, παρακολούθηση και ελέγχους ασφαλείας κατά την ενσωμάτωση MCP servers και εργαλείων στο περιβάλλον σας. Για πιο αναλυτική παρουσίαση, δείτε τις παραπάνω συνδέσεις.

![prompt-injection-lg-2048x1034](../../../translated_images/prompt-injection.ed9fbfde297ca877c15bc6daa808681cd3c3dc7bf27bbbda342ef1ba5fc4f52d.el.png)

**Έμμεση Ένεση Prompt** (γνωστή και ως cross-domain prompt injection ή XPIA) είναι μια κρίσιμη ευπάθεια σε συστήματα γεννητικής AI, συμπεριλαμβανομένων αυτών που χρησιμοποιούν το Model Context Protocol (MCP). Σε αυτή την επίθεση, κακόβουλες οδηγίες κρύ
Το πρόβλημα του confused deputy είναι μια ευπάθεια ασφαλείας που προκύπτει όταν ένας MCP server λειτουργεί ως μεσολαβητής μεταξύ των MCP clients και τρίτων APIs. Αυτή η ευπάθεια μπορεί να εκμεταλλευτεί όταν ο MCP server χρησιμοποιεί ένα στατικό client ID για να αυθεντικοποιηθεί σε έναν τρίτο authorization server που δεν υποστηρίζει δυναμική εγγραφή clients.

### Κίνδυνοι

- **Παράκαμψη συγκατάθεσης με βάση τα cookies**: Εάν ένας χρήστης έχει ήδη αυθεντικοποιηθεί μέσω του MCP proxy server, ένας τρίτος authorization server μπορεί να ορίσει ένα cookie συγκατάθεσης στον browser του χρήστη. Ένας επιτιθέμενος μπορεί αργότερα να εκμεταλλευτεί αυτό στέλνοντας στον χρήστη έναν κακόβουλο σύνδεσμο με ένα κατασκευασμένο αίτημα εξουσιοδότησης που περιέχει κακόβουλο redirect URI.
- **Κλοπή κωδικού εξουσιοδότησης**: Όταν ο χρήστης κάνει κλικ στον κακόβουλο σύνδεσμο, ο τρίτος authorization server μπορεί να παραλείψει την οθόνη συγκατάθεσης λόγω του υπάρχοντος cookie, και ο κωδικός εξουσιοδότησης να ανακατευθυνθεί στον server του επιτιθέμενου.
- **Μη εξουσιοδοτημένη πρόσβαση στο API**: Ο επιτιθέμενος μπορεί να ανταλλάξει τον κλεμμένο κωδικό εξουσιοδότησης με access tokens και να προσποιηθεί τον χρήστη για να αποκτήσει πρόσβαση στο τρίτο API χωρίς ρητή έγκριση.

### Μέτρα μετριασμού

- **Απαιτήσεις ρητής συγκατάθεσης**: Οι MCP proxy servers που χρησιμοποιούν στατικά client IDs **ΠΡΕΠΕΙ** να λαμβάνουν τη συγκατάθεση του χρήστη για κάθε δυναμικά εγγεγραμμένο client πριν προωθήσουν σε τρίτους authorization servers.
- **Σωστή υλοποίηση OAuth**: Ακολουθήστε τις βέλτιστες πρακτικές ασφαλείας του OAuth 2.1, συμπεριλαμβανομένης της χρήσης code challenges (PKCE) για αιτήματα εξουσιοδότησης ώστε να αποτραπούν επιθέσεις υποκλοπής.
- **Επικύρωση client**: Εφαρμόστε αυστηρό έλεγχο των redirect URIs και των client identifiers για να αποτρέψετε εκμετάλλευση από κακόβουλους παράγοντες.

# Ευπάθειες Token Passthrough

### Δήλωση προβλήματος

Το "token passthrough" είναι ένα αντι-πρότυπο όπου ένας MCP server δέχεται tokens από έναν MCP client χωρίς να επικυρώνει ότι τα tokens εκδόθηκαν σωστά για τον ίδιο τον MCP server, και στη συνέχεια τα "περνάει" σε downstream APIs. Αυτή η πρακτική παραβιάζει ρητά τις προδιαγραφές εξουσιοδότησης MCP και εισάγει σοβαρούς κινδύνους ασφαλείας.

### Κίνδυνοι

- **Παράκαμψη ελέγχων ασφαλείας**: Οι clients θα μπορούσαν να παρακάμψουν σημαντικούς ελέγχους ασφαλείας όπως περιορισμό ρυθμού, επικύρωση αιτημάτων ή παρακολούθηση κίνησης αν μπορούν να χρησιμοποιήσουν tokens απευθείας με downstream APIs χωρίς σωστή επικύρωση.
- **Προβλήματα λογοδοσίας και ιχνηλασιμότητας**: Ο MCP server δεν θα μπορεί να αναγνωρίσει ή να διακρίνει μεταξύ των MCP clients όταν οι clients χρησιμοποιούν access tokens που εκδόθηκαν upstream, δυσκολεύοντας την έρευνα περιστατικών και τον έλεγχο.
- **Εξαγωγή δεδομένων**: Εάν τα tokens περνάνε χωρίς σωστή επικύρωση claims, ένας κακόβουλος με κλεμμένο token θα μπορούσε να χρησιμοποιήσει τον server ως proxy για εξαγωγή δεδομένων.
- **Παραβιάσεις ορίων εμπιστοσύνης**: Οι downstream resource servers μπορεί να εμπιστεύονται συγκεκριμένες οντότητες με υποθέσεις για την προέλευση ή τα πρότυπα συμπεριφοράς. Η παραβίαση αυτού του ορίου εμπιστοσύνης μπορεί να οδηγήσει σε απρόβλεπτα ζητήματα ασφαλείας.
- **Κακόβουλη χρήση tokens σε πολλαπλές υπηρεσίες**: Εάν tokens γίνονται αποδεκτά από πολλές υπηρεσίες χωρίς σωστή επικύρωση, ένας επιτιθέμενος που παραβιάζει μία υπηρεσία μπορεί να χρησιμοποιήσει το token για πρόσβαση σε άλλες συνδεδεμένες υπηρεσίες.

### Μέτρα μετριασμού

- **Επικύρωση token**: Οι MCP servers **ΔΕΝ ΠΡΕΠΕΙ** να αποδέχονται tokens που δεν εκδόθηκαν ρητά για τον ίδιο τον MCP server.
- **Επαλήθευση κοινού (audience)**: Πάντα επικυρώνετε ότι τα tokens έχουν το σωστό claim audience που ταιριάζει με την ταυτότητα του MCP server.
- **Σωστή διαχείριση κύκλου ζωής token**: Εφαρμόστε tokens με σύντομη διάρκεια ζωής και πρακτικές σωστής περιστροφής token για να μειώσετε τον κίνδυνο κλοπής και κακής χρήσης.

# Απαγωγή Συνεδρίας (Session Hijacking)

### Δήλωση προβλήματος

Η απαγωγή συνεδρίας είναι μια επίθεση όπου ένας client λαμβάνει ένα session ID από τον server, και ένα μη εξουσιοδοτημένο μέρος αποκτά και χρησιμοποιεί το ίδιο session ID για να προσποιηθεί τον αρχικό client και να εκτελέσει μη εξουσιοδοτημένες ενέργειες εκ μέρους του. Αυτό είναι ιδιαίτερα ανησυχητικό σε stateful HTTP servers που χειρίζονται αιτήματα MCP.

### Κίνδυνοι

- **Εισαγωγή κακόβουλων prompts μέσω απαγωγής συνεδρίας**: Ένας επιτιθέμενος που αποκτά session ID μπορεί να στείλει κακόβουλα γεγονότα σε έναν server που μοιράζεται κατάσταση συνεδρίας με τον server στον οποίο είναι συνδεδεμένος ο client, ενδεχομένως προκαλώντας επιβλαβείς ενέργειες ή πρόσβαση σε ευαίσθητα δεδομένα.
- **Προσποίηση μέσω απαγωγής συνεδρίας**: Ένας επιτιθέμενος με κλεμμένο session ID μπορεί να κάνει κλήσεις απευθείας στον MCP server, παρακάμπτοντας την αυθεντικοποίηση και να αντιμετωπίζεται ως νόμιμος χρήστης.
- **Παραβιασμένα ρεύματα με δυνατότητα επανεκκίνησης**: Όταν ένας server υποστηρίζει redelivery/resumable streams, ένας επιτιθέμενος μπορεί να τερματίσει πρόωρα ένα αίτημα, οδηγώντας στο να συνεχιστεί αργότερα από τον αρχικό client με πιθανώς κακόβουλο περιεχόμενο.

### Μέτρα μετριασμού

- **Επαλήθευση εξουσιοδότησης**: Οι MCP servers που υλοποιούν εξουσιοδότηση **ΠΡΕΠΕΙ** να επαληθεύουν όλα τα εισερχόμενα αιτήματα και **ΔΕΝ ΠΡΕΠΕΙ** να χρησιμοποιούν συνεδρίες για αυθεντικοποίηση.
- **Ασφαλή session IDs**: Οι MCP servers **ΠΡΕΠΕΙ** να χρησιμοποιούν ασφαλή, μη προβλέψιμα session IDs που παράγονται με ασφαλείς γεννήτριες τυχαίων αριθμών. Αποφύγετε προβλέψιμους ή διαδοχικούς αναγνωριστικούς.
- **Σύνδεση συνεδρίας με συγκεκριμένο χρήστη**: Οι MCP servers **ΠΡΕΠΕΙ** να συνδέουν τα session IDs με πληροφορίες μοναδικές για τον εξουσιοδοτημένο χρήστη, συνδυάζοντας το session ID με μοναδικά στοιχεία χρήστη (π.χ. το εσωτερικό user ID) σε μορφή όπως `<user_id>:<session_id>`.
- **Λήξη συνεδρίας**: Εφαρμόστε σωστή λήξη και περιστροφή συνεδριών για να περιορίσετε το παράθυρο ευπάθειας σε περίπτωση παραβίασης session ID.
- **Ασφάλεια μεταφοράς**: Χρησιμοποιείτε πάντα HTTPS για όλη την επικοινωνία ώστε να αποτρέψετε υποκλοπή session ID.

# Ασφάλεια Εφοδιαστικής Αλυσίδας

Η ασφάλεια της εφοδιαστικής αλυσίδας παραμένει θεμελιώδης στην εποχή της AI, αλλά το εύρος του τι θεωρείται εφοδιαστική αλυσίδα έχει επεκταθεί. Εκτός από τα παραδοσιακά πακέτα κώδικα, πρέπει πλέον να επαληθεύετε και να παρακολουθείτε αυστηρά όλα τα στοιχεία που σχετίζονται με την AI, συμπεριλαμβανομένων των foundation models, υπηρεσιών embeddings, παρόχων context και τρίτων APIs. Κάθε ένα από αυτά μπορεί να εισάγει ευπάθειες ή κινδύνους αν δεν διαχειριστεί σωστά.

**Βασικές πρακτικές ασφάλειας εφοδιαστικής αλυσίδας για AI και MCP:**
- **Επαλήθευση όλων των στοιχείων πριν την ενσωμάτωση:** Αυτό περιλαμβάνει όχι μόνο βιβλιοθήκες ανοιχτού κώδικα, αλλά και μοντέλα AI, πηγές δεδομένων και εξωτερικά APIs. Ελέγχετε πάντα την προέλευση, τις άδειες και γνωστές ευπάθειες.
- **Διατήρηση ασφαλών pipelines ανάπτυξης:** Χρησιμοποιήστε αυτοματοποιημένα CI/CD pipelines με ενσωματωμένο έλεγχο ασφαλείας για να εντοπίζετε προβλήματα νωρίς. Διασφαλίστε ότι μόνο αξιόπιστα artifacts αναπτύσσονται σε παραγωγή.
- **Συνεχής παρακολούθηση και έλεγχος:** Εφαρμόστε συνεχή παρακολούθηση για όλες τις εξαρτήσεις, συμπεριλαμβανομένων μοντέλων και υπηρεσιών δεδομένων, για να ανιχνεύετε νέες ευπάθειες ή επιθέσεις στην εφοδιαστική αλυσίδα.
- **Εφαρμογή αρχής ελάχιστης προνομίας και ελέγχων πρόσβασης:** Περιορίστε την πρόσβαση σε μοντέλα, δεδομένα και υπηρεσίες μόνο σε ό,τι είναι απαραίτητο για τη λειτουργία του MCP server.
- **Άμεση αντίδραση σε απειλές:** Έχετε διαδικασία για την επιδιόρθωση ή αντικατάσταση παραβιασμένων στοιχείων, καθώς και για την περιστροφή μυστικών ή διαπιστευτηρίων σε περίπτωση ανίχνευσης παραβίασης.

Το [GitHub Advanced Security](https://github.com/security/advanced-security) παρέχει λειτουργίες όπως σάρωση μυστικών, σάρωση εξαρτήσεων και ανάλυση CodeQL. Αυτά τα εργαλεία ενσωματώνονται με το [Azure DevOps](https://azure.microsoft.com/en-us/products/devops) και τα [Azure Repos](https://azure.microsoft.com/en-us/products/devops/repos/) για να βοηθούν τις ομάδες να εντοπίζουν και να μετριάζουν ευπάθειες τόσο στον κώδικα όσο και στα στοιχεία της AI εφοδιαστικής αλυσίδας.

Η Microsoft εφαρμόζει επίσης εκτεταμένες πρακτικές ασφάλειας εφοδιαστικής αλυσίδας εσωτερικά για όλα τα προϊόντα της. Μάθετε περισσότερα στο [The Journey to Secure the Software Supply Chain at Microsoft](https://devblogs.microsoft.com/engineering-at-microsoft/the-journey-to-secure-the-software-supply-chain-at-microsoft/).

# Καθιερωμένες βέλτιστες πρακτικές ασφαλείας που θα ενισχύσουν τη στάση ασφαλείας της υλοποίησης MCP σας

Κάθε υλοποίηση MCP κληρονομεί τη υπάρχουσα στάση ασφαλείας του περιβάλλοντος της οργάνωσής σας πάνω στην οποία βασίζεται, οπότε όταν εξετάζετε την ασφάλεια του MCP ως συστατικό των συνολικών συστημάτων AI σας, συνιστάται να βελτιώσετε τη συνολική υπάρχουσα στάση ασφαλείας. Οι ακόλουθοι καθιερωμένοι έλεγχοι ασφαλείας είναι ιδιαίτερα σημαντικοί:

-   Βέλτιστες πρακτικές ασφαλούς κωδικοποίησης στην εφαρμογή AI σας - προστασία έναντι των [OWASP Top 10](https://owasp.org/www-project-top-ten/), των [OWASP Top 10 για LLMs](https://genai.owasp.org/download/43299/?tmstv=1731900559), χρήση ασφαλών θηκών για μυστικά και tokens, υλοποίηση ασφαλούς επικοινωνίας end-to-end μεταξύ όλων των συστατικών της εφαρμογής κ.ά.
-   Σκληροποίηση server -- χρήση MFA όπου είναι δυνατόν, διατήρηση ενημερώσεων, ενσωμάτωση του server με τρίτο πάροχο ταυτότητας για πρόσβαση κ.ά.
-   Διατήρηση συσκευών, υποδομών και εφαρμογών ενημερωμένων με patches
-   Παρακολούθηση ασφαλείας -- υλοποίηση καταγραφής και παρακολούθησης μιας εφαρμογής AI (συμπεριλαμβανομένων MCP clients/servers) και αποστολή αυτών των logs σε κεντρικό SIEM για ανίχνευση ανωμαλιών
-   Αρχιτεκτονική μηδενικής εμπιστοσύνης -- απομόνωση συστατικών μέσω δικτύου και ελέγχων ταυτότητας με λογικό τρόπο για ελαχιστοποίηση της πλευρικής κίνησης σε περίπτωση παραβίασης εφαρμογής AI.

# Βασικά Συμπεράσματα

- Τα θεμέλια της ασφάλειας παραμένουν κρίσιμα: Ασφαλής κωδικοποίηση, ελάχιστα προνόμια, επαλήθευση εφοδιαστικής αλυσίδας και συνεχής παρακολούθηση είναι απαραίτητα για MCP και workloads AI.
- Το MCP εισάγει νέους κινδύνους—όπως εισαγωγή prompts, δηλητηρίαση εργαλείων, απαγωγή συνεδρίας, προβλήματα confused deputy, ευπάθειες token passthrough και υπερβολικά δικαιώματα—που απαιτούν τόσο παραδοσιακούς όσο και ειδικούς για AI ελέγχους.
- Χρησιμοποιήστε ισχυρές πρακτικές αυθεντικοποίησης, εξουσιοδότησης και διαχείρισης token, αξιοποιώντας εξωτερικούς παρόχους ταυτότητας όπως το Microsoft Entra ID όπου είναι δυνατόν.
- Προστατευτείτε από έμμεση εισαγωγή prompts και δηλητηρίαση εργαλείων επικυρώνοντας τα μεταδεδομένα εργαλείων, παρακολουθώντας δυναμικές αλλαγές και χρησιμοποιώντας λύσεις όπως το Microsoft Prompt Shields.
- Υλοποιήστε ασφαλή διαχείριση συνεδριών χρησιμοποιώντας μη προβλέψιμα session IDs, συνδέοντας τις συνεδρίες με ταυτότητες χρηστών και μην χρησιμοποιείτε ποτέ συνεδρίες για αυθεντικοποίηση.
- Αποφύγετε επιθέσεις confused deputy απαιτώντας ρητή συγκατάθεση χρήστη για κάθε δυναμικά εγγεγραμμένο client και εφαρμόζοντας σωστές πρακτικές ασφαλείας OAuth.
- Αποφύγετε ευπάθειες token passthrough διασφαλίζοντας ότι οι MCP servers δέχονται μόνο tokens που εκδόθηκαν ρητά για αυτούς και επικυρώνοντας κατάλληλα τα claims των tokens.
- Αντιμετωπίστε όλα τα στοιχεία της AI εφοδιαστικής αλυσίδας—συμπεριλαμβανομένων μοντέλων, embeddings και παρόχων context—με την ίδια αυστηρότητα όπως τις εξαρτήσεις κώδικα.
- Μείνετε ενημερωμένοι με τις εξελισσόμενες προδιαγραφές MCP και συμβάλλετε στην κοινότητα για να βοηθήσετε στη διαμόρφωση ασφαλών προτύπων.

# Πρόσθετοι Πόροι

## Εξωτερικοί Πόροι
- [Microsoft Digital Defense Report](https://aka.ms/mddr)
- [MCP Specification](https://spec.modelcontextprotocol.io/)
- [MCP Security Best Practices](https://modelcontextprotocol.io/specification/draft/basic/security_best_practices)
- [MCP Authorization Specification](https://modelcontextprotocol.io/specification/draft/basic/authorization)
- [OAuth 2.0 Security Best Practices (RFC 9700)](https://datatracker.ietf.org/doc/html/rfc9700)
- [Prompt Injection in MCP (Simon Willison)](https://simonwillison.net/2025/Apr/9/mcp-prompt-injection/)
- [Tool Poisoning Attacks (Invariant Labs)](https://invariantlabs.ai/blog/mcp-security-notification-tool-poisoning-attacks)
- [Rug Pulls in MCP (Wiz Security)](https://www.wiz.io/blog/mcp-security-research-briefing#remote-servers-22)
- [Prompt Shields Documentation (Microsoft)](https://learn.microsoft.com/azure/ai-services/content-safety/concepts/jailbreak-detection)
- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [OWASP Top 10 for LLMs](https://genai.owasp.org/download/43299/?tmstv=1731900559)
- [GitHub Advanced Security](https://github.com/security/advanced-security)
- [Azure DevOps](https://azure

**Αποποίηση ευθυνών**:  
Αυτό το έγγραφο έχει μεταφραστεί χρησιμοποιώντας την υπηρεσία αυτόματης μετάφρασης AI [Co-op Translator](https://github.com/Azure/co-op-translator). Παρόλο που επιδιώκουμε την ακρίβεια, παρακαλούμε να έχετε υπόψη ότι οι αυτόματες μεταφράσεις ενδέχεται να περιέχουν λάθη ή ανακρίβειες. Το πρωτότυπο έγγραφο στη μητρική του γλώσσα πρέπει να θεωρείται η αυθεντική πηγή. Για κρίσιμες πληροφορίες, συνιστάται επαγγελματική ανθρώπινη μετάφραση. Δεν φέρουμε ευθύνη για τυχόν παρεξηγήσεις ή λανθασμένες ερμηνείες που προκύπτουν από τη χρήση αυτής της μετάφρασης.