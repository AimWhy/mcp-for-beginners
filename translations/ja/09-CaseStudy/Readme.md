<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b6b1bc868efed4cf02c52f8deada559d",
  "translation_date": "2025-05-16T14:46:57+00:00",
  "source_file": "09-CaseStudy/Readme.md",
  "language_code": "ja"
}
-->
# ケーススタディ：Azure AI Travel Agents – 参照実装

## 概要

[Azure AI Travel Agents](https://github.com/Azure-Samples/azure-ai-travel-agents) は、Microsoft が開発した包括的な参照ソリューションで、Model Context Protocol (MCP)、Azure OpenAI、Azure AI Search を活用してマルチエージェントによるAI搭載の旅行プランニングアプリケーションを構築する方法を示しています。このプロジェクトは、複数のAIエージェントの調整、企業データの統合、実際のシナリオに対応する安全で拡張可能なプラットフォームの提供に関するベストプラクティスを紹介しています。

## 主な特徴
- **マルチエージェント調整:** MCPを使って専門特化したエージェント（例：フライト、ホテル、旅程エージェント）を連携させ、複雑な旅行計画タスクを遂行します。
- **企業データ統合:** Azure AI Searchやその他の企業データソースに接続し、最新かつ関連性の高い情報を旅行の提案に提供します。
- **安全でスケーラブルなアーキテクチャ:** Azureのサービスを活用し、認証、認可、スケーラブルな展開を実現し、企業のセキュリティベストプラクティスに準拠しています。
- **拡張可能なツール:** 再利用可能なMCPツールやプロンプトテンプレートを実装し、新しいドメインやビジネス要件への迅速な適応を可能にします。
- **ユーザー体験:** Azure OpenAIとMCPによる会話型インターフェースを通じて、ユーザーが旅行エージェントとやり取りできます。

## アーキテクチャ
![Architecture](https://github.com/Azure-Samples/azure-ai-travel-agents/blob/main/docs/ai-travel-agents-architecture-diagram.png)

### アーキテクチャ図の説明

Azure AI Travel Agents ソリューションは、複数のAIエージェントと企業データソースをモジュール化、スケーラブルかつ安全に統合するよう設計されています。主なコンポーネントとデータフローは以下の通りです。

- **ユーザーインターフェース:** ユーザーは会話型UI（ウェブチャットやTeamsボットなど）を通じてシステムとやり取りし、質問を送信し旅行提案を受け取ります。
- **MCPサーバー:** 中央の調整役として機能し、ユーザー入力を受け取り、コンテキストを管理し、Model Context Protocolを通じて専門エージェント（FlightAgent、HotelAgent、ItineraryAgentなど）のアクションを調整します。
- **AIエージェント:** 各エージェントは特定ドメイン（フライト、ホテル、旅程）を担当し、MCPツールとして実装されています。プロンプトテンプレートとロジックを用いてリクエストを処理し、応答を生成します。
- **Azure OpenAI Service:** 高度な自然言語理解と生成を提供し、エージェントがユーザーの意図を解釈し、会話的な応答を生成できるようにします。
- **Azure AI Search & 企業データ:** エージェントはAzure AI Searchや他の企業データソースを検索し、最新のフライト、ホテル、旅行オプション情報を取得します。
- **認証とセキュリティ:** Microsoft Entra IDと連携し、安全な認証を実施、最小権限アクセス制御を全リソースに適用します。
- **展開:** Azure Container Appsでの展開を想定し、スケーラビリティ、監視、運用効率を確保しています。

このアーキテクチャにより、複数のAIエージェントのシームレスな調整、企業データとの安全な統合、ドメイン特化型AIソリューション構築のための堅牢で拡張性のあるプラットフォームが実現されます。

## アーキテクチャ図のステップごとの説明
大きな旅行を計画するときに、専門のアシスタントチームが細部までサポートしてくれると想像してください。Azure AI Travel Agents システムも同様に、各役割を持つ複数のパーツ（チームメンバーのようなもの）で構成されています。全体の流れは以下の通りです。

### ユーザーインターフェース (UI):
これは旅行代理店の受付のようなものです。ユーザーはここで「パリ行きのフライトを探して」といった質問やリクエストを行います。ウェブサイトのチャットウィンドウやメッセージングアプリが該当します。

### MCPサーバー (コーディネーター):
MCPサーバーは受付でユーザーのリクエストを聞き、どの専門家が対応すべきか判断するマネージャーの役割を果たします。会話の状況を管理し、全体がスムーズに進むよう調整します。

### AIエージェント (専門アシスタント):
それぞれのエージェントは特定分野の専門家で、フライト、ホテル、旅程の知識を持っています。ユーザーのリクエストはMCPサーバーを通じて適切なエージェントに送られ、最適な選択肢を提案します。

### Azure OpenAI Service (言語の専門家):
どのように言われても正確に意味を理解できる言語の専門家のような存在です。エージェントがユーザーの意図を理解し、自然な会話で応答するのを助けます。

### Azure AI Search & 企業データ (情報図書館):
最新の旅行情報（フライトスケジュールやホテルの空き状況など）が揃った巨大で最新の図書館のようなものです。エージェントはここから正確な情報を取得します。

### 認証とセキュリティ (警備員):
特定のエリアに入る人をチェックする警備員のように、認可されたユーザーやエージェントだけが重要情報にアクセスできるようにします。データの安全とプライバシーを守ります。

### Azure Container Apps での展開 (建物):
これらすべてのアシスタントやツールは、安全でスケーラブルな建物（クラウド）内で連携しています。これにより、多くのユーザーに対応でき、いつでも利用可能な状態が保たれます。

## 連携の流れ:

ユーザーは受付（UI）で質問をします。  
マネージャー（MCPサーバー）が適切な専門家（エージェント）を判断します。  
専門家は言語の専門家（OpenAI）を使ってリクエストを理解し、図書館（AI Search）で最適な答えを探します。  
警備員（認証）がすべての安全を確保します。  
これらすべてが信頼性の高いスケーラブルな建物（Azure Container Apps）内で行われ、スムーズかつ安全な体験を提供します。  
このチームワークにより、まるで専門の旅行代理店チームが一緒に働くように、迅速かつ安全に旅行計画をサポートします。

## 技術的な実装
- **MCPサーバー:** コアの調整ロジックをホストし、エージェントツールを公開し、複数ステップの旅行計画ワークフローのコンテキストを管理します。
- **エージェント:** 各エージェント（例：FlightAgent、HotelAgent）は独自のプロンプトテンプレートとロジックを持つMCPツールとして実装されています。
- **Azure連携:** 自然言語理解にAzure OpenAIを、データ取得にAzure AI Searchを使用します。
- **セキュリティ:** Microsoft Entra IDと統合し、すべてのリソースに最小権限アクセス制御を適用します。
- **展開:** スケーラビリティと運用効率のためにAzure Container Appsへの展開をサポートします。

## 結果と影響
- MCPを用いて複数のAIエージェントを実際の本番環境レベルで調整する方法を実証しています。
- エージェントの調整、データ統合、安全な展開のための再利用可能なパターンを提供し、ソリューション開発を加速します。
- MCPとAzureサービスを活用したドメイン特化型AIアプリケーション構築の設計図として機能します。

## 参考資料
- [Azure AI Travel Agents GitHub リポジトリ](https://github.com/Azure-Samples/azure-ai-travel-agents)
- [Azure OpenAI Service](https://azure.microsoft.com/en-us/products/ai-services/openai-service/)
- [Azure AI Search](https://azure.microsoft.com/en-us/products/ai-services/ai-search/)
- [Model Context Protocol (MCP)](https://modelcontextprotocol.io/)

**免責事項**：  
本書類はAI翻訳サービス「Co-op Translator」（https://github.com/Azure/co-op-translator）を使用して翻訳されました。正確性の確保に努めておりますが、自動翻訳には誤りや不正確な部分が含まれる可能性があることをご理解ください。原文の言語で記載された文書が正式な情報源とみなされます。重要な情報については、専門の人間による翻訳を推奨いたします。本翻訳の利用により生じたいかなる誤解や誤訳についても、当方は責任を負いかねます。