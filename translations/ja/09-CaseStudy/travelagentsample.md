<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "4d3415b9d2bf58bc69be07f945a69e07",
  "translation_date": "2025-06-13T21:43:15+00:00",
  "source_file": "09-CaseStudy/travelagentsample.md",
  "language_code": "ja"
}
-->
# ケーススタディ: Azure AI Travel Agents – リファレンス実装

## 概要

[Azure AI Travel Agents](https://github.com/Azure-Samples/azure-ai-travel-agents) は、Microsoft が開発した包括的なリファレンスソリューションで、Model Context Protocol (MCP)、Azure OpenAI、Azure AI Search を活用してマルチエージェントのAI旅行プランニングアプリケーションを構築する方法を示しています。このプロジェクトは、複数のAIエージェントのオーケストレーション、企業データの統合、そして実際のシナリオに対応可能な安全で拡張性のあるプラットフォームの提供に関するベストプラクティスを紹介しています。

## 主な特徴
- **マルチエージェントのオーケストレーション:** MCPを利用して、フライト、ホテル、旅程などの専門エージェントが連携し、複雑な旅行計画タスクを遂行します。
- **企業データの統合:** Azure AI Searchやその他の企業データソースと接続し、最新で関連性の高い旅行情報を提供します。
- **安全でスケーラブルなアーキテクチャ:** Azureサービスを活用し、認証・認可およびスケーラブルなデプロイメントを実現、企業のセキュリティベストプラクティスに準拠しています。
- **拡張可能なツール:** 再利用可能なMCPツールやプロンプトテンプレートを実装し、新しいドメインやビジネス要件への迅速な適応を可能にします。
- **ユーザーエクスペリエンス:** Azure OpenAIとMCPにより駆動される会話型インターフェースを提供し、ユーザーが旅行エージェントと対話できます。

## アーキテクチャ
![Architecture](https://raw.githubusercontent.com/Azure-Samples/azure-ai-travel-agents/main/docs/ai-travel-agents-architecture-diagram.png)

### アーキテクチャ図の説明

Azure AI Travel Agents ソリューションは、モジュール性、スケーラビリティ、および複数のAIエージェントと企業データソースの安全な統合を念頭に設計されています。主なコンポーネントとデータフローは以下の通りです：

- **ユーザーインターフェース:** ユーザーは会話型UI（ウェブチャットやTeamsボットなど）を通じてシステムとやり取りし、質問を送信して旅行のおすすめを受け取ります。
- **MCPサーバー:** 中央のオーケストレーターとして機能し、ユーザー入力を受け取り、コンテキストを管理し、Model Context Protocolを介して専門エージェント（FlightAgent、HotelAgent、ItineraryAgentなど）の動作を調整します。
- **AIエージェント:** 各エージェントは特定のドメイン（フライト、ホテル、旅程）を担当し、MCPツールとして実装されています。プロンプトテンプレートやロジックを用いてリクエストを処理し、応答を生成します。
- **Azure OpenAI サービス:** 高度な自然言語理解と生成を提供し、エージェントがユーザーの意図を解釈し、会話的な応答を生成できるようにします。
- **Azure AI Search & 企業データ:** エージェントはAzure AI Searchやその他の企業データソースを検索し、最新のフライト、ホテル、旅行オプションに関する情報を取得します。
- **認証とセキュリティ:** Microsoft Entra IDと統合し、安全な認証を提供、すべてのリソースに最小権限のアクセス制御を適用します。
- **デプロイメント:** Azure Container Apps上でのデプロイを想定しており、スケーラビリティ、監視、運用効率を確保しています。

このアーキテクチャにより、複数のAIエージェントのシームレスなオーケストレーション、企業データとの安全な統合、そしてドメイン特化型AIソリューション構築のための堅牢で拡張可能なプラットフォームが実現されます。

## アーキテクチャ図のステップバイステップ解説
大きな旅行を計画するときに、専門家のチームが細部までサポートしてくれると想像してください。Azure AI Travel Agentsシステムも同様で、異なる役割を持つパーツ（チームメンバーのようなもの）が連携して動いています。以下はその仕組みです：

### ユーザーインターフェース (UI):
旅行代理店の受付のような役割です。ユーザー（あなた）が「パリ行きのフライトを探して」といった質問やリクエストをする場所です。ウェブサイトのチャットウィンドウやメッセージングアプリが該当します。

### MCPサーバー（コーディネーター）:
MCPサーバーは受付のマネージャーのような存在で、あなたのリクエストを聞いて、どの専門家が対応すべきか判断します。会話の流れを管理し、スムーズな進行を保証します。

### AIエージェント（専門アシスタント）:
それぞれのエージェントは専門分野のエキスパートで、フライト、ホテル、旅程の知識を持っています。リクエストが来ると、MCPサーバーが適切なエージェントに依頼し、彼らは自分の知識やツールを使って最適な選択肢を探します。

### Azure OpenAIサービス（言語の専門家）:
言い回しがどうであれ、あなたの意図を正確に理解する言語の専門家のような存在です。エージェントがリクエストを理解し、自然な会話で応答できるよう支援します。

### Azure AI Search & 企業データ（情報図書館）:
最新の旅行情報が集まった巨大な図書館のようなものです。フライトスケジュールやホテルの空き状況など、正確な情報をエージェントがここから検索します。

### 認証とセキュリティ（警備員）:
許可された人やエージェントだけが重要な情報にアクセスできるように管理する警備員の役割です。データの安全性とプライバシーを守ります。

### Azure Container Apps上のデプロイメント（建物）:
これらのアシスタントやツールがすべて、安全でスケーラブルな建物（クラウド）内で連携して動いています。多くのユーザーに対応でき、常に利用可能な状態を保ちます。

## 全体の流れ：

1. 受付（UI）で質問をします。
2. マネージャー（MCPサーバー）がどの専門家（エージェント）が対応するか判断します。
3. 専門家は言語の専門家（OpenAI）を使ってリクエストを理解し、情報図書館（AI Search）で最適な答えを探します。
4. 警備員（認証）がすべての安全を確保します。
5. これらすべてが信頼性が高くスケーラブルな建物（Azure Container Apps）内で行われるため、スムーズで安全な体験が提供されます。

このチームワークにより、まるで専門の旅行代理店チームが最新のオフィスで連携しているかのように、迅速かつ安全に旅行計画をサポートします。

## 技術的な実装
- **MCPサーバー:** コアのオーケストレーションロジックをホストし、エージェントツールを公開、マルチステップの旅行プランニングワークフローのコンテキストを管理します。
- **エージェント:** 各エージェント（例: FlightAgent、HotelAgent）はMCPツールとして実装され、それぞれ独自のプロンプトテンプレートとロジックを持ちます。
- **Azure統合:** 自然言語理解にはAzure OpenAIを、データ取得にはAzure AI Searchを利用します。
- **セキュリティ:** Microsoft Entra IDと統合し、最小権限アクセス制御をすべてのリソースに適用します。
- **デプロイメント:** スケーラビリティと運用効率を考慮し、Azure Container Appsへのデプロイをサポートします。

## 結果と影響
- MCPを用いて複数のAIエージェントを実運用レベルでオーケストレーションする方法を実証。
- エージェントの調整、データ統合、安全なデプロイメントの再利用可能なパターンを提供し、ソリューション開発を加速。
- MCPとAzureサービスを使ったドメイン特化型AIアプリケーション構築の設計図として機能。

## 参考資料
- [Azure AI Travel Agents GitHub リポジトリ](https://github.com/Azure-Samples/azure-ai-travel-agents)
- [Azure OpenAI サービス](https://azure.microsoft.com/en-us/products/ai-services/openai-service/)
- [Azure AI Search](https://azure.microsoft.com/en-us/products/ai-services/ai-search/)
- [Model Context Protocol (MCP)](https://modelcontextprotocol.io/)

**免責事項**：  
本書類はAI翻訳サービス「Co-op Translator」（https://github.com/Azure/co-op-translator）を使用して翻訳されています。正確性の向上に努めておりますが、自動翻訳には誤りや不正確な表現が含まれる可能性があることをご理解ください。原文（原言語の文書）が正式な情報源とみなされます。重要な情報については、専門の人間による翻訳を推奨します。本翻訳の利用により生じた誤解や誤訳について、当方は一切の責任を負いかねます。